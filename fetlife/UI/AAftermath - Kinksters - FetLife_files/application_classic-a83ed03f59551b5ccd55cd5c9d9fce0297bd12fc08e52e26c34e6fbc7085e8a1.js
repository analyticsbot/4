function log(e){"undefined"!=typeof console&&console.log(e)}function Loader(e){this.isLoading=ko.observable(!1),this.xhr=null,this.defaults=e||{},this.abort=function(){null!=this.xhr&&this.xhr.abort(),this.isLoading(!1)},this.onComplete=function(){this.isLoading(!1)},this.request=function(e){if(this.isLoading())return log("Already loading - you must call abort() before starting a new request."),!1;var t=$.extend({},this.defaults,e);return t.complete=_.bind(function(t,n){this.onComplete(),e.complete&&e.complete(t,n)},this),$.ajax(t),this.isLoading(!0),!0}}function JSONLoader(e){$.extend(this,e),this.loader=e,this.request=function(e){this.loader.request($.extend({},e,{dataType:"json"}))}}function PaginatingLoader(e,t){$.extend(this,e),t=t||{},this.loader=e,this.currentPage=ko.observable((t.startingPage||0)-1),this.request=function(e){var t=$.extend({},e);t.data=t.data||{},t.data.page=this.currentPage()+1,t.success=_.bind(function(t,n,i){this.currentPage(this.currentPage()+1),e.success&&e.success(t,n,i)},this),this.loader.request(t)}}function AfterLoader(e,t){$.extend(this,e),t=t||{},this.loader=e,this.afterThing=ko.observable(t.startAfterThing),this._nextAfterKey=t.nextAfterKey||"next_after",this.request=function(e){var t=$.extend({},e);t.data=t.data||{},this.afterThing()?(log("Submitting 'after' value: "+this.afterThing()),t.data.after=this.afterThing()):log("No 'after' value to submit"),t.success=_.bind(function(t,n,i){var r=t[this._nextAfterKey];log("Next 'after' value: "+r),this.afterThing(r),e.success&&e.success(t,n,i)},this),this.loader.request(t)}}function CollectionLoader(e,t){$.extend(this,e),t=t||{},this.loader=e,this.collection=ko.observableArray([]),this._resultKey=t.resultKey||"objects";var n=t.withResults||"append";if("append"==n)this.insertionMethod="push";else{if("prepend"!=n)throw new Error("you must specify whether to append or prepend the new data to the collection");this.insertionMethod="unshift"}this.request=function(e){var t=$.extend({},e);t.success=_.bind(function(t,n,i){var r=t[this._resultKey];if(null==r)throw log(t),new Error("No property named '"+this._resultKey+"' found in the response object.");this._insertNewObjects(r),e.success&&e.success(t,n,i)},this),this.loader.request(t)},this._insertNewObjects=function(e){this.collection[this.insertionMethod].apply(this.collection,e)}}function FiniteLoader(e,t){$.extend(this,e),t=t||{},this.loader=e,this._finishedKey=t.finishedKey||"finished",this.isFinished=ko.observable(!1),this.request=function(e){if(this.isFinished())throw new Error("Loader finished!");var t=$.extend({},e);t.success=_.bind(function(t,n,i){if(null==t[this._finishedKey])throw log(t),new Error("No property named '"+this._finishedKey+"' found in the response object.");this.isFinished(t[this._finishedKey]),e.success&&e.success(t,n,i)},this),this.loader.request(t)}}function distanceOfTimeInWords(e,t,n){var i=e.getTime(),r=t.getTime(),o=Math.round(Math.abs(i-r)/1e3),a=Math.round(o/60);return 1>=a?n?0==a?o+" seconds":"1 minute":0==a?"less than a minute":"1 minute":45>a?a+" minutes":90>a?"about 1 hour":1440>a?"about "+Math.round(a/60)+" hours":2880>a?"1 day":43200>a?Math.round(a/1440)+" days":86400>a?"about 1 month":525600>a?Math.round(a/43200)+" months":1051200>a?"about 1 year":"over "+Math.round(a/525600)+" years"}function distanceOfTimeInWordsWithoutAbout(e,t,n){var i=e.getTime(),r=t.getTime(),o=Math.round(Math.abs(i-r)/1e3),a=Math.round(o/60);return 1>=a?n?0==a?o+" seconds":"1 minute":0==a?"less than a minute":"1 minute":45>a?a+" minutes":90>a?"1 hour":1440>a?Math.round(a/60)+" hours":2880>a?"1 day":43200>a?Math.round(a/1440)+" days":86400>a?"1 month":525600>a?Math.round(a/43200)+" months":1051200>a?"1 year":"over "+Math.round(a/525600)+" years"}function limitChars(e,t,n){var i=e.value,r=i.length,o=document.getElementById(n);return r>t?(o.innerHTML="(0 characters left)",e.value=i.substr(0,t),!1):(o.innerHTML="("+(t-r)+" characters left)",!0)}function setTimeAgo(e){var t=new Date($(e).attr("data-timestamp"));$(e).html(distanceOfTimeInWords(t,new Date)+" ago"),$(e).attr("title",$.format.date(t,"EEEE, MMMM d, yyyy @ h:mma"))}function refreshAllTimestamps(){$(".refresh-timestamp").each(function(e,t){setTimeAgo(t)})}function initTimestamp(e){var t=$(e).html();$(e).attr("data-timestamp",t).addClass("refresh-timestamp").removeClass("timestamp"),setTimeAgo(e)}function linkify(e){var t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,n=e.replace(t,'<a href="$1" target="_blank" rel="noreferrer noopener">$1</a>'),i=/(^|[^\/])(www\.[\S]+(\b|$))/gim,n=n.replace(i,'$1<a href="http://$2" target="_blank" rel="noreferrer noopener">$2</a>'),r=/(\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6})/gim,n=n.replace(r,'<a href="mailto:$1">$1</a>');return n}function initTimeTagTimestamps(){$("time:not(.initialized)").each(function(e,t){var n=new Date($(t).attr("datetime"));$(t).attr("title",$.format.date(n,"EEEE, MMMM d, yyyy @ h:mma")),$(t).addClass("initialized"),$(t).is(".time_ago")&&$(t).html(distanceOfTimeInWords(new Date($(t).attr("datetime")),new Date)+" ago")})}function setStatusTimeAgo(e){var t="<a href='"+$(e).attr("data-url")+"'>"+distanceOfTimeInWords(new Date($(e).attr("data-timestamp")),new Date)+" ago</a>";$(e).html(t)}function refreshAllStatusTimestamps(){$(".refresh-status-timestamp").each(function(e,t){setStatusTimeAgo(t)})}function parseURI(e){var t=document.createElement("a");return t.href=e,t}function storage(e,t){return{_key:function(e){return[t,e].join("-")},set:function(t,n){e.setItem(this._key(t),n)},get:function(t){return e.getItem(this._key(t))},remove:function(t){return e.removeItem(this._key(t))},setObject:function(e,t){this.set(e,JSON.stringify(t||{}))},getObject:function(e){return JSON.parse(this.get(e))}}}function ItemTracker(e,t,n){this.items=ko.observableArray(e),this.countWord=t,this.element=$(n),this.visibleCount=ko.observable(140),this.totalCount=ko.dependentObservable(function(){return this.items().length}.bind(this)),this.formattedTotalCount=ko.dependentObservable(function(){return window.thousandsSeparator(this.totalCount())}.bind(this)),this.visibleItems=ko.dependentObservable(function(){return this.items.slice(0,this.visibleCount())}.bind(this)),this.howManyItems=ko.dependentObservable(function(){return 1==this.totalCount()?"1 "+this.countWord+"s it":[this.formattedTotalCount(),this.countWord+" it"].join(" ")}.bind(this)),this.showAll=function(){this.visibleCount(2*this.items().length)},this.fixLastColumn=function(){$("ul li",this.element).removeClass("last"),$("ul li",this.element).filter(":nth-child(7n)").addClass("last")},this.bind=function(){ko.applyBindings(this,this.element[0])}}function Improvement(e){this.path=e.path,this.title=e.title,this.body=e.body,this.spanks=ko.observable(e.spanks),this.likedByUser=ko.observable(e.liked_by_user),this.toggleUrl=e.toggle_url,this.id=e.id,this.author=e.author,this.authorUrl=e.author_url,this.authorAvatarUrl=e.author_avatar_url,this.authorIsSupporter=e.author_is_supporter,this.timeAgoInWords=e.time_ago_in_words,this.supportsFetLife=this.author+" supports FetLife",this.numberOfComments=ko.observable(e.number_of_comments),this.note=ko.observable(e.note),this.noteUpdatedInWords=ko.observable(e.note_updated_in_words),this.noteUrl=e.note_url,this.suggestionStatus=ko.observable(e._status),this.statusUpdatedInWords=ko.observable(e.status_updated_in_words),this.statusUrl=e.status_url,this.changelog=e.changelog,this.commentPath=this.path+"#comments",this.editPath=this.path+"/edit",this.displayGroups=ko.observableArray(),this.displayNoteForm=ko.observable(!1),this.displayFriendAvatars=ko.observable(!1),this.updatingNote=ko.observable(!1),this.updatingStatus=ko.observable(!1),this.formattedSpanks=ko.dependentObservable(function(){return 0==this.spanks()?0:window.thousandsSeparator(this.spanks())}.bind(this)),this.showing=function(e){return _.any(this.displayGroups(),function(t){return t[0]==e})}.bind(this),this.displayFirstSeparator=ko.dependentObservable(function(){return this.showing("status")?this.showing("note")||this.showing("friends"):void 0}.bind(this)),this.displaySecondSeparator=ko.dependentObservable(function(){return this.showing("note")?this.showing("friends"):void 0}.bind(this)),this.displayFriendAvatarsShowHide=ko.dependentObservable(function(){return this.displayFriendAvatars()?"hide":"show"}.bind(this)),this.toggleDisplayFriendAvatars=function(){var e=this.displayFriendAvatars()?!1:!0;this.displayFriendAvatars(e)}.bind(this),this.displayStatusForm=ko.dependentObservable(function(){return(this.updatingStatus()||"Completed"!=this.suggestionStatus())&&_suggestionBoxMod&&0!=$("#suggestionboxshow").length}.bind(this)),this.displayStatus=ko.dependentObservable(function(){return"Not Started"!=this.suggestionStatus()&&!this.displayStatusForm()}.bind(this)),this.statusUpdatedMsg=ko.dependentObservable(function(){return"Completed"!=this.suggestionStatus()?"updated "+this.statusUpdatedInWords():this.statusUpdatedInWords()}.bind(this)),this.displayExtraInfoBox=ko.dependentObservable(function(){return this.displayGroups().length>0}.bind(this)),this.canDownvote=ko.dependentObservable(function(){return _.include(["Not Started","On Hold"],this.suggestionStatus())&&this.likedByUser()}.bind(this)),this.displayNote=ko.dependentObservable(function(){return this.note()&&!this.displayNoteForm()}.bind(this)),this.displayAddNoteLink=ko.dependentObservable(function(){return!this.note()&&!this.displayNoteForm()&&0!=$("#suggestionboxshow").length}.bind(this)),this.buttonText=ko.dependentObservable(function(){return this.likedByUser()?"Voted":"Vote"}.bind(this)),this.hoverButtonText=ko.dependentObservable(function(){return this.likedByUser()?"Unvote":"Vote"}.bind(this)),this.indexPage=function(){return 0!==$("#newsuggestionbox").length},this.remaining=ko.dependentObservable(function(){return _remaining()}.bind(this)),this.addOrUpdateNote=function(){this.updatingNote(!0),$.ajax({url:this.noteUrl,data:{note:this.note()},dataType:"json",type:"post",complete:function(){this.updatingNote(!1),this.displayNoteForm(!1),this.noteUpdatedInWords("less than a minute")}.bind(this)})}.bind(this),this.addOrUpdateStatus=function(){return this.updatingStatus(!0),$.ajax({url:this.statusUrl,data:{status:this.suggestionStatus()},dataType:"json",type:"patch",complete:function(){this.updatingStatus(!1),this.statusUpdatedInWords("less than a minute")}.bind(this)}),!0}.bind(this),this.toggle=function(){if(this.likedByUser())this.spanks(this.spanks()-1),_remaining(_remaining()+1),this.pageToggleRemove(),this.likedByUser(!1);else{if(!(this.remaining()>0))return $("#no_more_spanks").dialog("open"),!1;this.spanks(this.spanks()+1),_remaining(_remaining()-1),this.pageToggleAdd(),this.likedByUser(!0)}$.ajax({url:this.toggleUrl,dataType:"json",type:"post"})}.bind(this)}function makePaginator(){function e(e,t){this.suggestions=e,this.baseUrl=t,this.page=0===e().length?1:2,this.nomore=!1,this.incrementPage=function(){this.page=this.page+1}}return e}function ImprovementLoader(e,t){var n={index:e,search:t};this.paginator=ko.observable(e),this.loadingMore=ko.observable(!1),this.suggestions=ko.dependentObservable(function(){return this.paginator().suggestions()},this);var i;this.loadMore=function(){this.loadingMore(!0),i=$.ajax({url:this.paginator().url(),dataType:"json",complete:function(){this.loadingMore(!1)}.bind(this),success:function(e){this.nomore=e.nomore,_.each(e.improvements,function(e){this.suggestions.push(new Improvement(e))}.bind(this)),this.incrementPage()}.bind(this.paginator())})},this.loadMoreDebounced=_.debounce(this.loadMore,750),this.switchModes=function(e){this.paginator(n[e])},this.shouldNotLoad=function(){return this.paginator().nomore||this.loadingMore()},this.setQuery=function(e){t.page=1,t.query=e,t.suggestions([]),void 0!==i&&i.abort()},this._setMode=function(e){this.paginator(e)}}function loadMoreOnScroll(e,t){new ScrollWatcher(e,function(){return t.shouldNotLoad()?!1:void t.loadMore()}.bind(this))}function ImprovementIndexView(e,t,n){this.remaining=e,this.youSpanked=t,this.loader=n,this.loadingMore=n.loadingMore,this.searchMode=ko.observable(!1),this.newtitle=ko.observable(""),this.improvements=ko.dependentObservable(function(){return this.loader.suggestions()},this),this.resultCount=ko.dependentObservable(function(){return"("+helpers.pluralize(this.improvements().length,"result")+")"},this),this.newtitleUrl=ko.dependentObservable(function(){return"/improvements/new?title="+this.newtitle()},this);var i;this.doSearch=function(e){return""===e?(this.cancelSearch(),!1):e==i?!1:(i=e,this.loader.setQuery(e),this.loader.switchModes("search"),void(this.searchMode()?this.loader.loadMoreDebounced():(this.searchMode(!0),this.loader.loadMore())))}.bind(this),this.cancelSearch=function(){this.searchMode(!1),this.loader.switchModes("index"),this.newtitle("")}.bind(this)}function ImprovementShowView(e,t){this.remaining=e,this.improvement=t}function enableWebNotifications(){var e=window.OneSignal||[];e.push(["registerForPushNotifications"]),$("#web-notifications-notice").hide()}!function(e){"use strict";function t(e){var t="",n=!0;return e.forEach(function(e){var i=encodeURIComponent(e.name),r=encodeURIComponent(e.value);n||(t+="&"),t+=i+"="+r,n=!1}),t.replace(/%20/g,"+")}function n(e,t){var n=e.split("&");t&&-1===n[0].indexOf("=")&&(n[0]="="+n[0]);var i=[];n.forEach(function(e){if(0!==e.length){var t=e.indexOf("=");if(-1!==t)var n=e.substring(0,t),r=e.substring(t+1);else n=e,r="";n=n.replace(/\+/g," "),r=r.replace(/\+/g," "),i.push({name:n,value:r})}});var r=[];return i.forEach(function(e){r.push({name:decodeURIComponent(e.name),value:decodeURIComponent(e.value)})}),r}function i(e){if(a)return new s(e);var t=document.createElement("a");return t.href=e,t}function r(e){var i=this;this._list=[],(void 0===e||null===e)&&(e=""),Object(e)===e&&e instanceof r||(e=String(e)),"string"==typeof e&&"?"===e.substring(0,1)&&(e=e.substring(1)),this._list="string"==typeof e?n(e):e._list.slice(),this._url_object=null,this._setList=function(e){o||(i._list=e)};var o=!1;this._update_steps=function(){o||(o=!0,i._url_object&&("about:"===i._url_object.protocol&&-1!==i._url_object.pathname.indexOf("?")&&(i._url_object.pathname=i._url_object.pathname.split("?")[0]),i._url_object.search=t(i._list),o=!1))}}function o(t,o){function l(){var e=c.href.replace(/#$|\?$|\?(?=#)/g,"");c.href!==e&&(c.href=e)}function u(){p._setList(c.search?n(c.search.substring(1)):[]),p._update_steps()}if(!(this instanceof e.URL))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator.");o&&(t=function(){if(a)return new s(t,o).href;var e;if(document.implementation&&document.implementation.createHTMLDocument?e=document.implementation.createHTMLDocument(""):document.implementation&&document.implementation.createDocument?(e=document.implementation.createElement("http://www.w3.org/1999/xhtml","html",null),e.documentElement.appendChild(e.createElement("head")),e.documentElement.appendChild(e.createElement("body"))):window.ActiveXObject&&(e=new window.ActiveXObject("htmlfile"),e.write("<head></head><body></body>"),e.close()),!e)throw Error("base not supported");var n=e.createElement("base");n.href=o,e.getElementsByTagName("head")[0].appendChild(n);var i=e.createElement("a");return i.href=t,i.href}());var c=i(t||""),d=function(){if(!("defineProperties"in Object))return!1;try{var e={};return Object.defineProperties(e,{prop:{get:function(){return!0}}}),e.prop}catch(t){return!1}}(),h=d?this:document.createElement("a"),p=new r(c.search?c.search.substring(1):null);return p._url_object=h,Object.defineProperties(h,{href:{get:function(){return c.href},set:function(e){c.href=e,l(),u()},enumerable:!0,configurable:!0},origin:{get:function(){return"origin"in c?c.origin:this.protocol+"//"+this.host},enumerable:!0,configurable:!0},protocol:{get:function(){return c.protocol},set:function(e){c.protocol=e},enumerable:!0,configurable:!0},username:{get:function(){return c.username},set:function(e){c.username=e},enumerable:!0,configurable:!0},password:{get:function(){return c.password},set:function(e){c.password=e},enumerable:!0,configurable:!0},host:{get:function(){var e={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/}[c.protocol];return e?c.host.replace(e,""):c.host},set:function(e){c.host=e},enumerable:!0,configurable:!0},hostname:{get:function(){return c.hostname},set:function(e){c.hostname=e},enumerable:!0,configurable:!0},port:{get:function(){return c.port},set:function(e){c.port=e},enumerable:!0,configurable:!0},pathname:{get:function(){return"/"!==c.pathname.charAt(0)?"/"+c.pathname:c.pathname},set:function(e){c.pathname=e},enumerable:!0,configurable:!0},search:{get:function(){return c.search},set:function(e){c.search!==e&&(c.search=e,l(),u())},enumerable:!0,configurable:!0},searchParams:{get:function(){return p},enumerable:!0,configurable:!0},hash:{get:function(){return c.hash},set:function(e){c.hash=e,l()},enumerable:!0,configurable:!0},toString:{value:function(){return c.toString()},enumerable:!1,configurable:!0},valueOf:{value:function(){return c.valueOf()},enumerable:!1,configurable:!0}}),h}var a,s=e.URL;try{if(s){if(a=new e.URL("http://example.com"),"searchParams"in a)return;"href"in a||(a=void 0)}}catch(l){}if(Object.defineProperties(r.prototype,{append:{value:function(e,t){this._list.push({name:e,value:t}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},"delete":{value:function(e){for(var t=0;t<this._list.length;)this._list[t].name===e?this._list.splice(t,1):++t;this._update_steps()},writable:!0,enumerable:!0,configurable:!0},get:{value:function(e){for(var t=0;t<this._list.length;++t)if(this._list[t].name===e)return this._list[t].value;return null},writable:!0,enumerable:!0,configurable:!0},getAll:{value:function(e){for(var t=[],n=0;n<this._list.length;++n)this._list[n].name===e&&t.push(this._list[n].value);return t},writable:!0,enumerable:!0,configurable:!0},has:{value:function(e){for(var t=0;t<this._list.length;++t)if(this._list[t].name===e)return!0;return!1},writable:!0,enumerable:!0,configurable:!0},set:{value:function(e,t){for(var n=!1,i=0;i<this._list.length;)this._list[i].name===e?n?this._list.splice(i,1):(this._list[i].value=t,n=!0,++i):++i;n||this._list.push({name:e,value:t}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},entries:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._list.length)return{done:!0,value:void 0};var n=e._list[t++];return{done:!1,value:[n.name,n.value]}}}},writable:!0,enumerable:!0,configurable:!0},keys:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._list.length)return{done:!0,value:void 0};var n=e._list[t++];return{done:!1,value:n.name}}}},writable:!0,enumerable:!0,configurable:!0},values:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._list.length)return{done:!0,value:void 0};var n=e._list[t++];return{done:!1,value:n.value}}}},writable:!0,enumerable:!0,configurable:!0},forEach:{value:function(e){var t=arguments.length>1?arguments[1]:void 0;this._list.forEach(function(n){e.call(t,n.name,n.value)})},writable:!0,enumerable:!0,configurable:!0},toString:{value:function(){return t(this._list)},writable:!0,enumerable:!1,configurable:!0}}),"Symbol"in e&&"iterator"in e.Symbol&&Object.defineProperty(r.prototype,e.Symbol.iterator,{value:r.prototype.entries,writable:!0,enumerable:!0,configurable:!0}),s)for(var u in s)s.hasOwnProperty(u)&&"function"==typeof s[u]&&(o[u]=s[u]);e.URL=o,e.URLSearchParams=r}(self);var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,i=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e};return function(r,o,a){var s=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(r)||/\d/.test(r)||(o=r,r=void 0),r=r?new Date(r):new Date,isNaN(r))throw SyntaxError("invalid date");o=String(s.masks[o]||o||s.masks["default"]),"UTC:"==o.slice(0,4)&&(o=o.slice(4),a=!0);var l=a?"getUTC":"get",u=r[l+"Date"](),c=r[l+"Day"](),d=r[l+"Month"](),h=r[l+"FullYear"](),p=r[l+"Hours"](),f=r[l+"Minutes"](),m=r[l+"Seconds"](),g=r[l+"Milliseconds"](),v=a?0:r.getTimezoneOffset(),A={d:u,dd:i(u),ddd:s.i18n.dayNames[c],dddd:s.i18n.dayNames[c+7],m:d+1,mm:i(d+1),mmm:s.i18n.monthNames[d],mmmm:s.i18n.monthNames[d+12],yy:String(h).slice(2),yyyy:h,h:p%12||12,hh:i(p%12||12),H:p,HH:i(p),M:f,MM:i(f),s:m,ss:i(m),l:i(g,3),L:i(g>99?Math.round(g/10):g),t:12>p?"a":"p",tt:12>p?"am":"pm",T:12>p?"A":"P",TT:12>p?"AM":"PM",Z:a?"UTC":(String(r).match(t)||[""]).pop().replace(n,""),o:(v>0?"-":"+")+i(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!=10)*u%10]};return o.replace(e,function(e){return e in A?A[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return dateFormat(this,e,t)},/*
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based upon the plugin by Tzury Bar Yochay:
 * http://github.com/tzuryby/hotkeys
 *
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
 */
function(e){function t(t){if("string"==typeof t.data&&(t.data={keys:t.data}),t.data&&t.data.keys&&"string"==typeof t.data.keys){var n=t.handler,i=t.data.keys.toLowerCase().split(" ");t.handler=function(t){if(this===t.target||!(/textarea|select/i.test(t.target.nodeName)||e.hotkeys.options.filterTextInputs&&e.inArray(t.target.type,e.hotkeys.textAcceptingInputTypes)>-1)){var r="keypress"!==t.type&&e.hotkeys.specialKeys[t.which],o=String.fromCharCode(t.which).toLowerCase(),a="",s={};e.each(["alt","ctrl","shift"],function(e,n){t[n+"Key"]&&r!==n&&(a+=n+"+")}),t.metaKey&&!t.ctrlKey&&"meta"!==r&&(a+="meta+"),t.metaKey&&"meta"!==r&&a.indexOf("alt+ctrl+shift+")>-1&&(a=a.replace("alt+ctrl+shift+","hyper+")),r?s[a+r]=!0:(s[a+o]=!0,s[a+e.hotkeys.shiftNums[o]]=!0,"shift+"===a&&(s[e.hotkeys.shiftNums[o]]=!0));for(var l=0,u=i.length;u>l;l++)if(s[i[l]])return n.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],options:{filterTextInputs:!0}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(jQuery||this.jQuery||window.jQuery),/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL Version 2 (GPL_LICENSE.txt) licenses.
 *
 * Version: 1.1.1
 * Requires jQuery 1.3+
 * Docs: http://docs.jquery.com/Plugins/livequery
 */
function(e){e.extend(e.fn,{livequery:function(t,n,i){var r,o=this;return e.isFunction(t)&&(i=n,n=t,t=void 0),e.each(e.livequery.queries,function(e,a){return o.selector!=a.selector||o.context!=a.context||t!=a.type||n&&n.$lqguid!=a.fn.$lqguid||i&&i.$lqguid!=a.fn2.$lqguid?void 0:(r=a)&&!1}),r=r||new e.livequery(this.selector,this.context,t,n,i),r.stopped=!1,r.run(),this},expire:function(t,n,i){var r=this;return e.isFunction(t)&&(i=n,n=t,t=void 0),e.each(e.livequery.queries,function(o,a){r.selector!=a.selector||r.context!=a.context||t&&t!=a.type||n&&n.$lqguid!=a.fn.$lqguid||i&&i.$lqguid!=a.fn2.$lqguid||this.stopped||e.livequery.stop(a.id)}),this}}),e.livequery=function(t,n,i,r,o){return this.selector=t,this.context=n,this.type=i,this.fn=r,this.fn2=o,this.elements=[],this.stopped=!1,this.id=e.livequery.queries.push(this)-1,r.$lqguid=r.$lqguid||e.livequery.guid++,o&&(o.$lqguid=o.$lqguid||e.livequery.guid++),this},e.livequery.prototype={stop:function(){var e=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(t,n){e.fn2.apply(n)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var t=this,n=this.elements,i=e(this.selector,this.context),r=i.not(n);this.elements=i,this.type?(r.bind(this.type,this.fn),n.length>0&&e.each(n,function(n,r){e.inArray(r,i)<0&&e.event.remove(r,t.type,t.fn)})):(r.each(function(){t.fn.apply(this)}),this.fn2&&n.length>0&&e.each(n,function(n,r){e.inArray(r,i)<0&&t.fn2.apply(r)}))}}},e.extend(e.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(e.livequery.running&&e.livequery.queue.length)for(var t=e.livequery.queue.length;t--;)e.livequery.queries[e.livequery.queue.shift()].run()},pause:function(){e.livequery.running=!1},play:function(){e.livequery.running=!0,e.livequery.run()},registerPlugin:function(){e.each(arguments,function(t,n){if(e.fn[n]){var i=e.fn[n];e.fn[n]=function(){var t=i.apply(this,arguments);return e.livequery.run(),t}}})},run:function(t){void 0!=t?e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t):e.each(e.livequery.queries,function(t){e.inArray(t,e.livequery.queue)<0&&e.livequery.queue.push(t)}),e.livequery.timeout&&clearTimeout(e.livequery.timeout),e.livequery.timeout=setTimeout(e.livequery.checkQueue,20)},stop:function(t){void 0!=t?e.livequery.queries[t].stop():e.each(e.livequery.queries,function(t){e.livequery.queries[t].stop()})}}),e.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html"),e(function(){e.livequery.play()})}(jQuery),/*!
 * Masonry PACKAGED v3.3.0
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
function(e){function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function r(t,n){e.fn[t]=function(r){if("string"==typeof r){for(var a=i.call(arguments,1),s=0,l=this.length;l>s;s++){var u=this[s],c=e.data(u,t);if(c)if(e.isFunction(c[r])&&"_"!==r.charAt(0)){var d=c[r].apply(c,a);if(void 0!==d)return d}else o("no such method '"+r+"' for "+t+" instance");else o("cannot call methods on "+t+" prior to initialization; attempted to call '"+r+"'")}return this}return this.each(function(){var i=e.data(this,t);i?(i.option(r),i._init()):(i=new n(this,r),e.data(this,t,i))})}}if(e){var o="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){n(t),r(e,t)},e.bridget}}var i=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],n):n("object"==typeof exports?require("jquery"):e.jQuery)}(window),/*!
 * eventie v1.0.6
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */
function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(i=function(e,n,i){e[n+i]=i.handleEvent?function(){var n=t(e);i.handleEvent.call(i,n)}:function(){var n=t(e);i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var r=function(){};n.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var o={bind:i,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",o):"object"==typeof exports?module.exports=o:e.eventie=o}(window),function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):a.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,o,a=this.getListenersAsObject(e);for(r in a)if(a.hasOwnProperty(r))for(i=a[r].length;i--;)n=a[r][i],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:r.EventEmitter=e}.call(this),/*!
 * getStyleProperty v1.0.4
 * original by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 * MIT license
 */
function(e){function t(e){if(e){if("string"==typeof i[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,r=0,o=n.length;o>r;r++)if(t=n[r]+e,"string"==typeof i[t])return t}}var n="Webkit Moz ms Ms O".split(" "),i=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:e.getStyleProperty=t}(window),/*!
 * getSize v1.2.2
 * measure size of elements
 * MIT license
 */
function(e){function t(e){var t=parseFloat(e),n=-1===e.indexOf("%")&&!isNaN(t);return n&&t}function n(){}function i(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,n=a.length;n>t;t++){var i=a[t];e[i]=0}return e}function r(n){function r(){if(!h){h=!0;var i=e.getComputedStyle;if(u=function(){var e=i?function(e){return i(e,null)}:function(e){return e.currentStyle};return function(t){var n=e(t);return n||o("Style returned "+n+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),n}}(),c=n("boxSizing")){var r=document.createElement("div");r.style.width="200px",r.style.padding="1px 2px 3px 4px",r.style.borderStyle="solid",r.style.borderWidth="1px 2px 3px 4px",r.style[c]="border-box";var a=document.body||document.documentElement;a.appendChild(r);var s=u(r);d=200===t(s.width),a.removeChild(r)}}}function s(e){if(r(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var n=u(e);if("none"===n.display)return i();var o={};o.width=e.offsetWidth,o.height=e.offsetHeight;for(var s=o.isBorderBox=!(!c||!n[c]||"border-box"!==n[c]),h=0,p=a.length;p>h;h++){var f=a[h],m=n[f];m=l(e,m);var g=parseFloat(m);o[f]=isNaN(g)?0:g}var v=o.paddingLeft+o.paddingRight,A=o.paddingTop+o.paddingBottom,y=o.marginLeft+o.marginRight,b=o.marginTop+o.marginBottom,w=o.borderLeftWidth+o.borderRightWidth,E=o.borderTopWidth+o.borderBottomWidth,_=s&&d,k=t(n.width);k!==!1&&(o.width=k+(_?0:v+w));var C=t(n.height);return C!==!1&&(o.height=C+(_?0:A+E)),o.innerWidth=o.width-(v+w),o.innerHeight=o.height-(A+E),o.outerWidth=o.width+y,o.outerHeight=o.height+b,o}}function l(t,n){if(e.getComputedStyle||-1===n.indexOf("%"))return n;var i=t.style,r=i.left,o=t.runtimeStyle,a=o&&o.left;return a&&(o.left=t.currentStyle.left),i.left=n,n=i.pixelLeft,i.left=r,a&&(o.left=a),n}var u,c,d,h=!1;return s}var o="undefined"==typeof console?n:function(e){console.error(e)},a=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],r):"object"==typeof exports?module.exports=r(require("desandro-get-style-property")):e.getSize=r(e.getStyleProperty)}(window),/*!
 * docReady v1.0.4
 * Cross browser DOMContentLoaded event emitter
 * MIT license
 */
function(e){function t(e){"function"==typeof e&&(t.isReady?e():a.push(e))}function n(e){var n="readystatechange"===e.type&&"complete"!==o.readyState;t.isReady||n||i()}function i(){t.isReady=!0;for(var e=0,n=a.length;n>e;e++){var i=a[e];i()}}function r(r){return"complete"===o.readyState?i():(r.bind(o,"DOMContentLoaded",n),r.bind(o,"readystatechange",n),r.bind(e,"load",n)),t}var o=e.document,a=[];t.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],r):"object"==typeof exports?module.exports=r(require("eventie")):e.docReady=r(e.eventie)}(window),function(e){function t(e,t){return e[a](t)}function n(e){if(!e.parentNode){var t=document.createDocumentFragment();t.appendChild(e)}}function i(e,t){n(e);for(var i=e.parentNode.querySelectorAll(t),r=0,o=i.length;o>r;r++)if(i[r]===e)return!0;return!1}function r(e,i){return n(e),t(e,i)}var o,a=function(){if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],n=0,i=t.length;i>n;n++){var r=t[n],o=r+"MatchesSelector";if(e[o])return o}}();if(a){var s=document.createElement("div"),l=t(s,"div");o=l?t:r}else o=i;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return o}):"object"==typeof exports?module.exports=o:window.matchesSelector=o}(Element.prototype),function(e,t){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(n,i){return t(e,n,i)}):"object"==typeof exports?module.exports=t(e,require("doc-ready"),require("desandro-matches-selector")):e.fizzyUIUtils=t(e,e.docReady,e.matchesSelector)}(window,function(e,t,n){var i={};i.extend=function(e,t){for(var n in t)e[n]=t[n];return e},i.modulo=function(e,t){return(e%t+t)%t};var r=Object.prototype.toString;i.isArray=function(e){return"[object Array]"==r.call(e)},i.makeArray=function(e){var t=[];if(i.isArray(e))t=e;else if(e&&"number"==typeof e.length)for(var n=0,r=e.length;r>n;n++)t.push(e[n]);else t.push(e);return t},i.indexOf=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},i.removeFrom=function(e,t){var n=i.indexOf(e,t);-1!=n&&e.splice(n,1)},i.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1==e.nodeType&&"string"==typeof e.nodeName},i.setText=function(){function e(e,n){t=t||(void 0!==document.documentElement.textContent?"textContent":"innerText"),e[t]=n}var t;return e}(),i.getParent=function(e,t){for(;e!=document.body;)if(e=e.parentNode,n(e,t))return e},i.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},i.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.filterFindElements=function(e,t){e=i.makeArray(e);for(var r=[],o=0,a=e.length;a>o;o++){var s=e[o];if(i.isElement(s))if(t){n(s,t)&&r.push(s);for(var l=s.querySelectorAll(t),u=0,c=l.length;c>u;u++)r.push(l[u])}else r.push(s)}return r},i.debounceMethod=function(e,t,n){var i=e.prototype[t],r=t+"Timeout";e.prototype[t]=function(){var e=this[r];e&&clearTimeout(e);var t=arguments,o=this;this[r]=setTimeout(function(){i.apply(o,t),delete o[r]},n||100)}},i.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()};var o=e.console;return i.htmlInit=function(n,r){t(function(){for(var t=i.toDashed(r),a=document.querySelectorAll(".js-"+t),s="data-"+t+"-options",l=0,u=a.length;u>l;l++){var c,d=a[l],h=d.getAttribute(s);try{c=h&&JSON.parse(h)}catch(p){o&&o.error("Error parsing "+s+" on "+d.nodeName.toLowerCase()+(d.id?"#"+d.id:"")+": "+p);continue}var f=new n(d,c),m=e.jQuery;m&&m.data(d,r,f)}})},i}),function(e,t){"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(n,i,r,o){return t(e,n,i,r,o)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(e.Outlayer={},e.Outlayer.Item=t(e,e.EventEmitter,e.getSize,e.getStyleProperty,e.fizzyUIUtils))}(window,function(e,t,n,i,r){function o(e){for(var t in e)return!1;return t=null,!0}function a(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var s=e.getComputedStyle,l=s?function(e){return s(e,null)}:function(e){return e.currentStyle},u=i("transition"),c=i("transform"),d=u&&c,h=!!i("perspective"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[u],f=["transform","transition","transitionDuration","transitionProperty"],m=function(){for(var e={},t=0,n=f.length;n>t;t++){var r=f[t],o=i(r);o&&o!==r&&(e[r]=o)}return e}();r.extend(a.prototype,t.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},a.prototype.getSize=function(){this.size=n(this.element)},a.prototype.css=function(e){var t=this.element.style;for(var n in e){var i=m[n]||n;t[i]=e[n]}},a.prototype.getPosition=function(){var e=l(this.element),t=this.layout.options,n=t.isOriginLeft,i=t.isOriginTop,r=parseInt(e[n?"left":"right"],10),o=parseInt(e[i?"top":"bottom"],10);r=isNaN(r)?0:r,o=isNaN(o)?0:o;var a=this.layout.size;r-=n?a.paddingLeft:a.paddingRight,o-=i?a.paddingTop:a.paddingBottom,this.position.x=r,this.position.y=o},a.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,n={},i=t.isOriginLeft?"paddingLeft":"paddingRight",r=t.isOriginLeft?"left":"right",o=t.isOriginLeft?"right":"left",a=this.position.x+e[i];a=t.percentPosition&&!t.isHorizontal?a/e.width*100+"%":a+"px",n[r]=a,n[o]="";var s=t.isOriginTop?"paddingTop":"paddingBottom",l=t.isOriginTop?"top":"bottom",u=t.isOriginTop?"bottom":"top",c=this.position.y+e[s];c=t.percentPosition&&t.isHorizontal?c/e.height*100+"%":c+"px",n[l]=c,n[u]="",this.css(n),this.emitEvent("layout",[this])};var g=h?function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"}:function(e,t){return"translate("+e+"px, "+t+"px)"};a.prototype._transitionTo=function(e,t){this.getPosition();var n=this.position.x,i=this.position.y,r=parseInt(e,10),o=parseInt(t,10),a=r===this.position.x&&o===this.position.y;if(this.setPosition(e,t),a&&!this.isTransitioning)return void this.layoutPosition();var s=e-n,l=t-i,u={},c=this.layout.options;s=c.isOriginLeft?s:-s,l=c.isOriginTop?l:-l,u.transform=g(s,l),this.transition({to:u,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},a.prototype.moveTo=d?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},a.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},a.prototype._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(e);var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);if(e.from){this.css(e.from);var i=this.element.offsetHeight;i=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var v=c&&r.toDashed(c)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:v,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(p,this,!1))},a.prototype.transition=a.prototype[u?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},a.prototype.onotransitionend=function(e){this.ontransitionend(e)};var A={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,n=A[e.propertyName]||e.propertyName;if(delete t.ingProperties[n],o(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]),n in t.onEnd){var i=t.onEnd[n];i.call(this),delete t.onEnd[n]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(p,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var y={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(y)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!u||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var e=this;this.once("transitionEnd",function(){e.removeElem()}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("visibleStyle");t[n]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},a.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},a.prototype.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var n in t)return n},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("hiddenStyle");t[n]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},a.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}),/*!
 * Outlayer v1.4.0
 * the brains and guts of a layout library
 * MIT license
 */
function(e,t){"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(n,i,r,o,a){return t(e,n,i,r,o,a)}):"object"==typeof exports?module.exports=t(e,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):e.Outlayer=t(e,e.eventie,e.EventEmitter,e.getSize,e.fizzyUIUtils,e.Outlayer.Item)}(window,function(e,t,n,i,r,o){function a(e,t){var n=r.getQueryElement(e);if(!n)return void(s&&s.error("Bad element for "+this.constructor.namespace+": "+(n||e)));this.element=n,l&&(this.$element=l(this.element)),this.options=r.extend({},this.constructor.defaults),this.option(t);var i=++c;this.element.outlayerGUID=i,d[i]=this,this._create(),this.options.isInitLayout&&this.layout()}var s=e.console,l=e.jQuery,u=function(){},c=0,d={};return a.namespace="outlayer",a.Item=o,a.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},r.extend(a.prototype,n.prototype),a.prototype.option=function(e){r.extend(this.options,e)},a.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),r.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},a.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},a.prototype._itemize=function(e){for(var t=this._filterFindItemElements(e),n=this.constructor.Item,i=[],r=0,o=t.length;o>r;r++){var a=t[r],s=new n(a,this);i.push(s)}return i},a.prototype._filterFindItemElements=function(e){return r.filterFindElements(e,this.options.itemSelector)},a.prototype.getItemElements=function(){for(var e=[],t=0,n=this.items.length;n>t;t++)e.push(this.items[t].element);return e},a.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},a.prototype._init=a.prototype.layout,a.prototype._resetLayout=function(){this.getSize()},a.prototype.getSize=function(){this.size=i(this.element)},a.prototype._getMeasurement=function(e,t){var n,o=this.options[e];o?("string"==typeof o?n=this.element.querySelector(o):r.isElement(o)&&(n=o),this[e]=n?i(n)[t]:o):this[e]=0},a.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},a.prototype._getItemsForLayout=function(e){for(var t=[],n=0,i=e.length;i>n;n++){var r=e[n];r.isIgnored||t.push(r)}return t},a.prototype._layoutItems=function(e,t){if(this._emitCompleteOnItems("layout",e),e&&e.length){for(var n=[],i=0,r=e.length;r>i;i++){var o=e[i],a=this._getItemLayoutPosition(o);a.item=o,a.isInstant=t||o.isLayoutInstant,n.push(a)}this._processLayoutQueue(n)}},a.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},a.prototype._processLayoutQueue=function(e){for(var t=0,n=e.length;n>t;t++){var i=e[t];this._positionItem(i.item,i.x,i.y,i.isInstant)}},a.prototype._positionItem=function(e,t,n,i){i?e.goTo(t,n):e.moveTo(t,n)},a.prototype._postLayout=function(){this.resizeContainer()},a.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},a.prototype._getContainerSize=u,a.prototype._setContainerMeasure=function(e,t){if(void 0!==e){var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},a.prototype._emitCompleteOnItems=function(e,t){function n(){r.emitEvent(e+"Complete",[t])}function i(){a++,a===o&&n()}var r=this,o=t.length;if(!t||!o)return void n();for(var a=0,s=0,l=t.length;l>s;s++){var u=t[s];u.once(e,i)}},a.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},a.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},a.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,n=e.length;n>t;t++){var i=e[t];this.ignore(i)}}},a.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,n=e.length;n>t;t++){var i=e[t];r.removeFrom(this.stamps,i),this.unignore(i)}},a.prototype._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=r.makeArray(e)):void 0},a.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;t>e;e++){var n=this.stamps[e];this._manageStamp(n)}}},a.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},a.prototype._manageStamp=u,a.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,r=i(e),o={left:t.left-n.left-r.marginLeft,top:t.top-n.top-r.marginTop,right:n.right-t.right-r.marginRight,bottom:n.bottom-t.bottom-r.marginBottom};return o},a.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},a.prototype.bindResize=function(){this.isResizeBound||(t.bind(e,"resize",this),this.isResizeBound=!0)},a.prototype.unbindResize=function(){this.isResizeBound&&t.unbind(e,"resize",this),this.isResizeBound=!1},a.prototype.onresize=function(){function e(){t.resize(),delete t.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(e,100)},a.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},a.prototype.needsResizeLayout=function(){var e=i(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},a.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},a.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},a.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)}},a.prototype.reveal=function(e){this._emitCompleteOnItems("reveal",e);for(var t=e&&e.length,n=0;t&&t>n;n++){var i=e[n];i.reveal()}},a.prototype.hide=function(e){this._emitCompleteOnItems("hide",e);for(var t=e&&e.length,n=0;t&&t>n;n++){var i=e[n];i.hide()}},a.prototype.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},a.prototype.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},a.prototype.getItem=function(e){for(var t=0,n=this.items.length;n>t;t++){var i=this.items[t];if(i.element===e)return i}},a.prototype.getItems=function(e){e=r.makeArray(e);for(var t=[],n=0,i=e.length;i>n;n++){var o=e[n],a=this.getItem(o);a&&t.push(a)}return t},a.prototype.remove=function(e){var t=this.getItems(e);if(this._emitCompleteOnItems("remove",t),t&&t.length)for(var n=0,i=t.length;i>n;n++){var o=t[n];o.remove(),r.removeFrom(this.items,o)}},a.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,n=this.items.length;n>t;t++){var i=this.items[t];i.destroy()}this.unbindResize();var r=this.element.outlayerGUID;delete d[r],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},a.data=function(e){e=r.getQueryElement(e);var t=e&&e.outlayerGUID;return t&&d[t]},a.create=function(e,t){function n(){a.apply(this,arguments)}return Object.create?n.prototype=Object.create(a.prototype):r.extend(n.prototype,a.prototype),n.prototype.constructor=n,n.defaults=r.extend({},a.defaults),r.extend(n.defaults,t),n.prototype.settings={},n.namespace=e,n.data=a.data,n.Item=function(){o.apply(this,arguments)},n.Item.prototype=new o,r.htmlInit(n,e),l&&l.bridget&&l.bridget(e,n),n},a.Item=o,a}),/*!
 * Masonry v3.3.0
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
function(e,t){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],t):"object"==typeof exports?module.exports=t(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):e.Masonry=t(e.Outlayer,e.getSize,e.fizzyUIUtils)}(window,function(e,t,n){var i=e.create("masonry");return i.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var e=this.cols;for(this.colYs=[];e--;)this.colYs.push(0);this.maxY=0},i.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],n=e&&e.element;this.columnWidth=n&&t(n).outerWidth||this.containerWidth}var i=this.columnWidth+=this.gutter,r=this.containerWidth+this.gutter,o=r/i,a=i-r%i,s=a&&1>a?"round":"floor";o=Math[s](o),this.cols=Math.max(o,1)},i.prototype.getContainerWidth=function(){var e=this.options.isFitWidth?this.element.parentNode:this.element,n=t(e);this.containerWidth=n&&n.innerWidth},i.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,i=t&&1>t?"round":"ceil",r=Math[i](e.size.outerWidth/this.columnWidth);r=Math.min(r,this.cols);for(var o=this._getColGroup(r),a=Math.min.apply(Math,o),s=n.indexOf(o,a),l={x:this.columnWidth*s,y:a},u=a+e.size.outerHeight,c=this.cols+1-o.length,d=0;c>d;d++)this.colYs[s+d]=u;return l},i.prototype._getColGroup=function(e){if(2>e)return this.colYs;for(var t=[],n=this.cols+1-e,i=0;n>i;i++){var r=this.colYs.slice(i,i+e);t[i]=Math.max.apply(Math,r)}return t},i.prototype._manageStamp=function(e){var n=t(e),i=this._getElementOffset(e),r=this.options.isOriginLeft?i.left:i.right,o=r+n.outerWidth,a=Math.floor(r/this.columnWidth);a=Math.max(0,a);var s=Math.floor(o/this.columnWidth);s-=o%this.columnWidth?0:1,s=Math.min(this.cols-1,s);for(var l=(this.options.isOriginTop?i.top:i.bottom)+n.outerHeight,u=a;s>=u;u++)this.colYs[u]=Math.max(l,this.colYs[u])},i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this.options.isFitWidth&&(e.width=this._getContainerFitWidth()),e},i.prototype._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},i.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!==this.containerWidth},i}),function(e,t){!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):e.sammy=t.Sammy=n(e)}(function(e){var n,i="([^/]+)",r=/:([\w\d]+)/g,o=/\?([^#]*)?$/,a=function(e){return Array.prototype.slice.call(e)},s=function(e){return"[object Function]"===Object.prototype.toString.call(e)},l=function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},c=function(e){return decodeURIComponent((e||"").replace(/\+/g," "))},d=encodeURIComponent,h=function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},p=function(e){return function(){return this.route.apply(this,[e].concat(Array.prototype.slice.call(arguments)))}},f={},m=!(!t.history||!history.pushState),g=[];return n=function(){var t,i,r=a(arguments);return n.apps=n.apps||{},0===r.length||r[0]&&s(r[0])?n.apply(n,["body"].concat(r)):"string"==typeof(i=r.shift())?(t=n.apps[i]||new n.Application,t.element_selector=i,r.length>0&&e.each(r,function(e,n){t.use(n)}),t.element_selector!=i&&delete n.apps[i],n.apps[t.element_selector]=t,t):void 0},n.VERSION="0.7.3",n.addLogger=function(e){g.push(e)},n.log=function(){var t=a(arguments);t.unshift("["+Date()+"]"),e.each(g,function(e,i){i.apply(n,t)})},"undefined"!=typeof t.console?n.addLogger(s(t.console.log.apply)?function(){t.console.log.apply(t.console,arguments)}:function(){t.console.log(arguments)}):"undefined"!=typeof console&&n.addLogger(function(){console.log.apply(console,arguments)}),e.extend(n,{makeArray:a,isFunction:s,isArray:l}),n.Object=function(t){return e.extend(this,t||{})},e.extend(n.Object.prototype,{escapeHTML:h,h:h,toHash:function(){var t={};return e.each(this,function(e,n){s(n)||(t[e]=n)}),t},toHTML:function(){var t="";return e.each(this,function(e,n){s(n)||(t+="<strong>"+e+"</strong> "+n+"<br />")}),t},keys:function(e){var t=[];for(var n in this)s(this[n])&&e||t.push(n);return t},has:function(t){return this[t]&&""!==e.trim(this[t].toString())},join:function(){var e=a(arguments),t=e.shift();return e.join(t)},log:function(){n.log.apply(n,arguments)},toString:function(t){var n=[];return e.each(this,function(e,i){(!s(i)||t)&&n.push('"'+e+'": '+i.toString())}),"Sammy.Object: {"+n.join(",")+"}"}}),n.targetIsThisWindow=function(n){var i=e(n.target).attr("target");return"_blank"===i?!1:null===i||i===t.name||"_self"===i?!0:"top"===i&&t===t.top?!0:!1},n.DefaultLocationProxy=function(e,t){this.app=e,this.is_native=!1,this.has_history=m,this._startPolling(t)},n.DefaultLocationProxy.fullPath=function(e){var t=e.toString().match(/^[^#]*(#.+)$/),n=t?t[1]:"";return[e.pathname,e.search,n].join("")},e.extend(n.DefaultLocationProxy.prototype,{bind:function(){var i=this,r=this.app,o=n.DefaultLocationProxy;e(t).bind("hashchange."+this.app.eventNamespace(),function(e,n){i.is_native!==!1||n||(i.is_native=!0,t.clearInterval(o._interval),o._interval=null),r.trigger("location-changed")}),m&&!r.disable_push_state&&(e(t).bind("popstate."+this.app.eventNamespace(),function(){r.trigger("location-changed")}),e(document).delegate("a","click.history-"+this.app.eventNamespace(),function(e){if(!(e.isDefaultPrevented()||e.metaKey||e.ctrlKey)){var a=o.fullPath(this);return this.hostname==t.location.hostname&&r.lookupRoute("get",a)&&n.targetIsThisWindow(e)?(e.preventDefault(),i.setLocation(a),!1):void 0}})),o._bindings||(o._bindings=0),o._bindings++},unbind:function(){e(t).unbind("hashchange."+this.app.eventNamespace()),e(t).unbind("popstate."+this.app.eventNamespace()),e(document).undelegate("a","click.history-"+this.app.eventNamespace()),n.DefaultLocationProxy._bindings--,n.DefaultLocationProxy._bindings<=0&&(t.clearInterval(n.DefaultLocationProxy._interval),n.DefaultLocationProxy._interval=null)},getLocation:function(){return n.DefaultLocationProxy.fullPath(t.location)},setLocation:function(e){if(/^([^#\/]|$)/.test(e)&&(e=m&&!this.app.disable_push_state?"/"+e:"#!/"+e),e!=this.getLocation()){if(!m||this.app.disable_push_state||!/^\//.test(e))return t.location=e;history.pushState({path:e},t.title,e),this.app.trigger("location-changed")}},_startPolling:function(i){var r=this;if(!n.DefaultLocationProxy._interval){i||(i=10);var o=function(){var i=r.getLocation();("undefined"==typeof n.DefaultLocationProxy._last_location||i!=n.DefaultLocationProxy._last_location)&&t.setTimeout(function(){e(t).trigger("hashchange",[!0])},0),n.DefaultLocationProxy._last_location=i};o(),n.DefaultLocationProxy._interval=t.setInterval(o,i)}}}),n.Application=function(e){var t=this;this.routes={},this.listeners=new n.Object({}),this.arounds=[],this.befores=[],this.namespace=(new Date).getTime()+"-"+parseInt(1e3*Math.random(),10),this.context_prototype=function(){n.EventContext.apply(this,arguments)},this.context_prototype.prototype=new n.EventContext,s(e)&&e.apply(this,[this]),this._location_proxy||this.setLocationProxy(new n.DefaultLocationProxy(this,this.run_interval_every)),this.debug&&this.bindToAllEvents(function(e,n){t.log(t.toString(),e.cleaned_type,n||{})})},n.Application.prototype=e.extend({},n.Object.prototype,{ROUTE_VERBS:["get","post","put","delete"],APP_EVENTS:["run","unload","lookup-route","run-route","route-found","event-context-before","event-context-after","changed","error","check-form-submission","redirect","location-changed"],_last_route:null,_location_proxy:null,_running:!1,element_selector:"body",debug:!1,raise_errors:!1,run_interval_every:50,disable_push_state:!1,template_engine:null,toString:function(){return"Sammy.Application:"+this.element_selector},$element:function(t){return t?e(this.element_selector).find(t):e(this.element_selector)},use:function(){var e=a(arguments),t=e.shift(),i=t||"";try{e.unshift(this),"string"==typeof t&&(i="Sammy."+t,t=n[t]),t.apply(this,e)}catch(r){"undefined"==typeof t?this.error("Plugin Error: called use() but plugin ("+i.toString()+") is not defined",r):s(t)?this.error("Plugin Error",r):this.error("Plugin Error: called use() but '"+i.toString()+"' is not a function",r)}return this},setLocationProxy:function(e){var t=this._location_proxy;this._location_proxy=e,this.isRunning()&&(t&&t.unbind(),this._location_proxy.bind())},log:function(){n.log.apply(n,Array.prototype.concat.apply([this.element_selector],arguments))},route:function(t,n){var o,a,l=this,u=[],c=Array.prototype.slice.call(arguments,2);if(0===c.length&&s(n)&&(n=t,c=[n],t="any"),t=t.toLowerCase(),n.constructor==String){for(r.lastIndex=0;null!==(a=r.exec(n));)u.push(a[1]);n=new RegExp(n.replace(r,i)+"$")}return e.each(c,function(e,t){"string"==typeof t&&(c[e]=l[t])}),o=function(e){var t={verb:e,path:n,callback:c,param_names:u};l.routes[e]=l.routes[e]||[],l.routes[e].push(t)},"any"===t?e.each(this.ROUTE_VERBS,function(e,t){o(t)}):o(t),this},get:p("get"),post:p("post"),put:p("put"),del:p("delete"),any:p("any"),mapRoutes:function(t){var n=this;return e.each(t,function(e,t){n.route.apply(n,t)}),this},eventNamespace:function(){return["sammy-app",this.namespace].join("-")},bind:function(e,t,n){var i=this;"undefined"==typeof n&&(n=t);var r=function(){var e,t,r;e=arguments[0],r=arguments[1],r&&r.context?(t=r.context,delete r.context):t=new i.context_prototype(i,"bind",e.type,r,e.target),e.cleaned_type=e.type.replace(i.eventNamespace(),""),n.apply(t,[e,r])};return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(r),this.isRunning()&&this._listen(e,r),this},trigger:function(e,t){return this.$element().trigger([e,this.eventNamespace()].join("."),[t]),this},refresh:function(){return this.last_location=null,this.trigger("location-changed"),this},before:function(e,t){return s(e)&&(t=e,e={}),this.befores.push([e,t]),this},after:function(e){return this.bind("event-context-after",e)},around:function(e){return this.arounds.push(e),this},onComplete:function(e){return this._onComplete=e,this},isRunning:function(){return this._running},helpers:function(t){return e.extend(this.context_prototype.prototype,t),this},helper:function(e,t){return this.context_prototype.prototype[e]=t,this},run:function(i){if(this.isRunning())return!1;var r=this;return e.each(this.listeners.toHash(),function(t,n){e.each(n,function(e,n){r._listen(t,n)})}),this.trigger("run",{start_url:i}),this._running=!0,this.last_location=null,/\#(.+)/.test(this.getLocation())||"undefined"==typeof i||this.setLocation(i),this._checkLocation(),this._location_proxy.bind(),this.bind("location-changed",function(){r._checkLocation()}),this.bind("submit",function(t){if(!n.targetIsThisWindow(t))return!0;var i=r._checkFormSubmission(e(t.target).closest("form"));return i===!1?t.preventDefault():!1}),e(t).bind("unload",function(){r.unload()}),this.trigger("changed")},unload:function(){if(!this.isRunning())return!1;var t=this;return this.trigger("unload"),this._location_proxy.unbind(),this.$element().unbind("submit").removeClass(t.eventNamespace()),e.each(this.listeners.toHash(),function(n,i){e.each(i,function(e,i){t._unlisten(n,i)})}),this._running=!1,this},destroy:function(){return this.unload(),delete n.apps[this.element_selector],this},bindToAllEvents:function(t){var n=this;return e.each(this.APP_EVENTS,function(e,i){n.bind(i,t)}),e.each(this.listeners.keys(!0),function(i,r){-1==e.inArray(r,n.APP_EVENTS)&&n.bind(r,t)}),this},routablePath:function(e){return e.replace(o,"")},lookupRoute:function(e,t){var n,i,r=this,o=!1,a=0;if("undefined"!=typeof this.routes[e])for(n=this.routes[e].length;n>a;a++)if(i=this.routes[e][a],r.routablePath(t).match(i.path)){o=i;break}return o},runRoute:function(t,n,i,r){var o,a,s,l,u,d,h,p,f=this,m=this.lookupRoute(t,n);if(this.debug&&this.log("runRoute",[t,n].join(" ")),this.trigger("run-route",{verb:t,path:n,params:i}),"undefined"==typeof i&&(i={}),e.extend(i,this._parseQueryString(n)),m){this.trigger("route-found",{route:m}),null!==(h=m.path.exec(this.routablePath(n)))&&(h.shift(),e.each(h,function(e,t){m.param_names[e]?i[m.param_names[e]]=c(t):(i.splat||(i.splat=[]),i.splat.push(c(t)))})),o=new this.context_prototype(this,t,n,i,r),s=this.arounds.slice(0),l=this.befores.slice(0),d=[o],i.splat&&(d=d.concat(i.splat)),a=function(){for(var e,t,n;l.length>0;)if(u=l.shift(),f.contextMatchesOptions(o,u[0])&&(e=u[1].apply(o,[o]),e===!1))return!1;return f.last_route=m,o.trigger("event-context-before",{context:o}),"function"==typeof m.callback&&(m.callback=[m.callback]),m.callback&&m.callback.length&&(t=-1,n=function(){t++,m.callback[t]?e=m.callback[t].apply(o,d):f._onComplete&&f._onComplete(o)},d.push(n),n()),o.trigger("event-context-after",{context:o}),e},e.each(s.reverse(),function(e,t){var n=a;a=function(){return t.apply(o,[n])}});try{p=a()}catch(g){this.error(["500 Error",t,n].join(" "),g)}return p}return this.notFound(t,n)},contextMatchesOptions:function(t,n,i){var r=n;if(("string"==typeof r||u(r))&&(r={path:r}),"undefined"==typeof i&&(i=!0),e.isEmptyObject(r))return!0;if(l(r.path)){var o,a,s,c;for(o=[],a=0,c=r.path.length;c>a;a+=1)s=e.extend({},r,{path:r.path[a]}),o.push(this.contextMatchesOptions(t,s));var d=e.inArray(!0,o)>-1?!0:!1;return i?d:!d}if(r.only)return this.contextMatchesOptions(t,r.only,!0);if(r.except)return this.contextMatchesOptions(t,r.except,!1);var h=!0,p=!0;return r.path&&(u(r.path)||(r.path=new RegExp(r.path.toString()+"$")),h=r.path.test(t.path)),r.verb&&(p="string"==typeof r.verb?r.verb===t.verb:r.verb.indexOf(t.verb)>-1),i?p&&h:!(p&&h)},getLocation:function(){return this._location_proxy.getLocation()},setLocation:function(e){return this._location_proxy.setLocation(e)},swap:function(e,t){var n=this.$element().html(e);return s(t)&&t(e),n},templateCache:function(e,t){return"undefined"!=typeof t?f[e]=t:f[e]},clearTemplateCache:function(){return f={}},notFound:function(e,t){var n=this.error(["404 Not Found",e,t].join(" "));return"get"===e?n:!0},error:function(e,t){if(t||(t=new Error),t.message=[e,t.message].join(" "),this.trigger("error",{message:t.message,error:t}),this.raise_errors)throw t;this.log(t.message,t)},_checkLocation:function(){var e,t;return e=this.getLocation(),this.last_location&&"get"==this.last_location[0]&&this.last_location[1]==e||(this.last_location=["get",e],t=this.runRoute("get",e)),t},_getFormVerb:function(t){var n,i,r=e(t);return i=r.find('input[name="_method"]'),i.length>0&&(n=i.val()),n||(n=r[0].getAttribute("method")),n&&""!==n||(n="get"),e.trim(n.toString().toLowerCase())},_checkFormSubmission:function(t){var n,i,r,o,a;return this.trigger("check-form-submission",{form:t}),n=e(t),i=n.attr("action")||"",r=this._getFormVerb(n),this.debug&&this.log("_checkFormSubmission",n,i,r),"get"===r?(o=this._serializeFormParams(n),""!==o&&(i+="?"+o),this.setLocation(i),a=!1):(o=e.extend({},this._parseFormParams(n)),a=this.runRoute(r,i,o,t.get(0))),"undefined"==typeof a?!1:a},_serializeFormParams:function(e){var t,n="",i=e.serializeArray();if(i.length>0)for(n=this._encodeFormPair(i[0].name,i[0].value),t=1;t<i.length;t++)n=n+"&"+this._encodeFormPair(i[t].name,i[t].value);return n},_encodeFormPair:function(e,t){return d(e)+"="+d(t)},_parseFormParams:function(e){var t,n={},i=e.serializeArray();for(t=0;t<i.length;t++)n=this._parseParamPair(n,i[t].name,i[t].value);return n},_parseQueryString:function(e){var t,n,i,r,a={};if(t=e.match(o),t&&t[1])for(n=t[1].split("&"),r=0;r<n.length;r++)i=n[r].split("="),a=this._parseParamPair(a,c(i[0]),c(i[1]||""));return a},_parseParamPair:function(e,t,n){return"undefined"!=typeof e[t]?l(e[t])?e[t].push(n):e[t]=[e[t],n]:e[t]=n,e},_listen:function(e,t){return this.$element().bind([e,this.eventNamespace()].join("."),t)},_unlisten:function(e,t){return this.$element().unbind([e,this.eventNamespace()].join("."),t)}}),n.RenderContext=function(e){this.event_context=e,this.callbacks=[],this.previous_content=null,this.content=null,this.next_engine=!1,this.waiting=!1},n.RenderContext.prototype=e.extend({},n.Object.prototype,{then:function(e){if(!s(e)){if(!("string"==typeof e&&e in this.event_context))return this;var n=this.event_context[e];e=function(e){return n.apply(this.event_context,[e])}}var i=this;return this.waiting?this.callbacks.push(e):(this.wait(),t.setTimeout(function(){var t=e.apply(i,[i.content,i.previous_content]);t!==!1&&i.next(t)},0)),this},wait:function(){this.waiting=!0},next:function(e){this.waiting=!1,"undefined"!=typeof e&&(this.previous_content=this.content,this.content=e),this.callbacks.length>0&&this.then(this.callbacks.shift())},load:function(t,n,i){var r=this;return this.then(function(){var o,a,l;return s(n)?(i=n,n={}):n=e.extend({},n),i&&this.then(i),"string"==typeof t?(l=t.match(/\.json$/)||n.json,o=l?n.cache===!0:n.cache!==!1,r.next_engine=r.event_context.engineFor(t),delete n.cache,delete n.json,n.engine&&(r.next_engine=n.engine,delete n.engine),o&&(a=this.event_context.app.templateCache(t))?a:(this.wait(),e.ajax(e.extend({url:t,data:{},dataType:l?"json":"text",type:"get",success:function(e){o&&r.event_context.app.templateCache(t,e),r.next(e)}},n)),!1)):t.nodeType?t.innerHTML:t.selector?(r.next_engine=t.attr("data-engine"),n.clone===!1?t.remove()[0].innerHTML.toString():t[0].innerHTML.toString()):void 0})},loadPartials:function(e){var t;if(e){this.partials=this.partials||{};for(t in e)!function(t,n){t.load(e[n]).then(function(e){this.partials[n]=e})}(this,t)}return this},render:function(e,t,n,i){return s(e)&&!t?this.then(e):(s(t)?(i=n,n=t,t=null):n&&!s(n)&&(i=n,n=null),this.loadPartials(i).load(e).interpolate(t,e).then(n))},partial:function(e,t,n,i){return s(n)?this.render(e,t,i).swap(n):s(t)?this.render(e,{},n).swap(t):this.render(e,t,n).swap()},send:function(){var e=this,t=a(arguments),n=t.shift();return l(t[0])&&(t=t[0]),this.then(function(){return t.push(function(t){e.next(t)}),e.wait(),n.apply(n,t),!1})},collect:function(t,n,i){var r=this,o=function(){s(t)&&(n=t,t=this.content);var i=[],o=!1;return e.each(t,function(e,t){var a=n.apply(r,[e,t]);return a.jquery&&1==a.length&&(a=a[0],o=!0),i.push(a),a}),o?i:i.join("")};return i?o():this.then(o)},renderEach:function(t,n,i,r){return l(n)&&(r=i,i=n,n=null),this.load(t).then(function(o){var a=this;return i||(i=l(this.previous_content)?this.previous_content:[]),r?void e.each(i,function(e,i){var s={},l=this.next_engine||t;n?s[n]=i:s=i,r(i,a.event_context.interpolate(o,s,l))}):this.collect(i,function(e,i){var r={},a=this.next_engine||t;return n?r[n]=i:r=i,this.event_context.interpolate(o,r,a)},!0)})},interpolate:function(e,t,n){var i=this;return this.then(function(r,o){!e&&o&&(e=o),this.next_engine&&(t=this.next_engine,this.next_engine=!1);var a=i.event_context.interpolate(r,e,t,this.partials);return n?o+a:a})},swap:function(e){return this.then(function(t){return this.event_context.swap(t,e),t}).trigger("changed",{})},appendTo:function(t){return this.then(function(n){e(t).append(n)}).trigger("changed",{})},prependTo:function(t){return this.then(function(n){e(t).prepend(n)}).trigger("changed",{})},replace:function(t){return this.then(function(n){e(t).html(n)}).trigger("changed",{})},trigger:function(e,t){return this.then(function(n){return"undefined"==typeof t&&(t={content:n}),this.event_context.trigger(e,t),n})}}),n.EventContext=function(e,t,i,r,o){this.app=e,this.verb=t,this.path=i,this.params=new n.Object(r),this.target=o},n.EventContext.prototype=e.extend({},n.Object.prototype,{$element:function(){return this.app.$element(a(arguments).shift())},engineFor:function(e){var t,n=this;return s(e)?e:(e=(e||n.app.template_engine).toString(),(t=e.match(/\.([^\.\?\#]+)$/))&&(e=t[1]),e&&s(n[e])?n[e]:n.app.template_engine?this.engineFor(n.app.template_engine):function(e){return e})},interpolate:function(e,t,n,i){return this.engineFor(n).apply(this,[e,t,i])},render:function(e,t,i,r){return new n.RenderContext(this).render(e,t,i,r)},renderEach:function(e,t,i,r){return new n.RenderContext(this).renderEach(e,t,i,r)},load:function(e,t,i){return new n.RenderContext(this).load(e,t,i)},loadPartials:function(e){return new n.RenderContext(this).loadPartials(e)},partial:function(e,t,i,r){return new n.RenderContext(this).partial(e,t,i,r)},send:function(){var e=new n.RenderContext(this);return e.send.apply(e,arguments)},redirect:function(){var t,n=a(arguments),i=this.app.getLocation(),r=n.length;if(r>1){for(var o=0,s=[],l=[],u={},c=!1;r>o;o++)"string"==typeof n[o]?s.push(n[o]):(e.extend(u,n[o]),c=!0);if(t=s.join("/"),c){for(var d in u)l.push(this.app._encodeFormPair(d,u[d]));t+="?"+l.join("&")}}else t=n[0];this.trigger("redirect",{to:t}),this.app.last_location=[this.verb,this.path],this.app.setLocation(t),new RegExp(t).test(i)&&this.app.trigger("location-changed")},trigger:function(e,t){return"undefined"==typeof t&&(t={}),t.context||(t.context=this),this.app.trigger(e,t)},eventNamespace:function(){return this.app.eventNamespace()},swap:function(e,t){return this.app.swap(e,t)},notFound:function(){return this.app.notFound(this.verb,this.path)},json:function(t){return e.parseJSON(t)},toString:function(){return"Sammy.EventContext: "+[this.verb,this.path,this.params].join(" ")}}),n})}(jQuery,window),/**
 * Copyright (c) 2007-2008 James Coglan
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Parts of this software are derived from the following open-source projects:
 *
 * - The Prototype framework, (c) 2005-2007 Sam Stephenson
 * - Alex Arnell's Inheritance library, (c) 2006, Alex Arnell
 * - Base, (c) 2006-7, Dean Edwards
 */
JS={extend:function(e,t){t=t||{};for(var n in t)e[n]!==t[n]&&(e[n]=t[n]);return e},makeFunction:function(){return function(){return this.initialize?this.initialize.apply(this,arguments)||this:this}},makeBridge:function(e){var t=function(){};return t.prototype=e.prototype,new t},delegate:function(e,t){return function(){return this[e][t].apply(this[e],arguments)}},bind:function(){var e=JS.array(arguments),t=e.shift(),n=e.shift()||null;return function(){return t.apply(n,e.concat(JS.array(arguments)))}},callsSuper:function(e){return void 0===e.SUPER?e.SUPER=/\bcallSuper\b/.test(e.toString()):e.SUPER},mask:function(e){var t=e.toString().replace(/callSuper/g,"super");return e.toString=function(){return t},e},array:function(e){if(!e)return[];if(e.toArray)return e.toArray();for(var t=e.length,n=[];t--;)n[t]=e[t];return n},indexOf:function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},isFn:function(e){return e instanceof Function},ignore:function(e,t){return/^(include|extend)$/.test(e)&&"object"==typeof t}},JS.Module=JS.makeFunction(),JS.extend(JS.Module.prototype,{initialize:function(e,t){t=t||{},this.__mod__=this,this.__inc__=[],this.__fns__={},this.__dep__=[],this.__res__=t._resolve||null,this.include(e||{})},define:function(e,t,n){n=n||{},this.__fns__[e]=t,JS.Module._notify&&n._notify&&JS.isFn(t)&&JS.Module._notify(e,n._notify);for(var i=this.__dep__.length;i--;)this.__dep__[i].resolve()},instanceMethod:function(e){var t=this.lookup(e).pop();return JS.isFn(t)?t:null},include:function(e,t,n){if(!e)return n&&this.resolve();t=t||{};var i,r,o,a,s=e.include,l=e.extend,u=t._included||this;if(e.__inc__&&e.__fns__)this.__inc__.push(e),e.__dep__.push(this),t._extended?e.extended&&e.extended(t._extended):e.included&&e.included(u);else{if(!t._recall){if("object"==typeof s)for(i=[].concat(s),r=0,o=i.length;o>r;r++)u.include(i[r],t);if("object"==typeof l){for(i=[].concat(l),r=0,o=i.length;o>r;r++)u.extend(i[r],!1);u.extend()}return t._recall=!0,u.include(e,t,n)}for(a in e)JS.ignore(a,e[a])||this.define(a,e[a],{_notify:u||t._extended||this})}n&&this.resolve()},includes:function(e){if(Object===e||this===e||this.__res__===e.prototype)return!0;for(var t=this.__inc__.length;t--;)if(this.__inc__[t].includes(e))return!0;return!1},ancestors:function(e){e=e||[];for(var t=0,n=this.__inc__.length;n>t;t++)this.__inc__[t].ancestors(e);var i=(this.__res__||{}).klass,r=i&&this.__res__===i.prototype?i:this;return-1===JS.indexOf(e,r)&&e.push(r),e},lookup:function(e){var t,n,i,r=this.ancestors(),o=[];for(t=0,n=r.length;n>t;t++)i=r[t].__mod__.__fns__[e],i&&o.push(i);return o},make:function(e,t){if(!JS.isFn(t)||!JS.callsSuper(t))return t;var n=this;return function(){return n.chain(this,e,arguments)}},chain:JS.mask(function(e,t,n){var i,r=this.lookup(t),o=r.length-1,a=e.callSuper,s=JS.array(n);return e.callSuper=function(){for(var t=arguments.length;t--;)s[t]=arguments[t];o-=1;var n=r[o].apply(e,s);return o+=1,n},i=r.pop().apply(e,s),a?e.callSuper=a:delete e.callSuper,i}),resolve:function(e){var t,n,i,r,e=e||this,o=e.__res__;if(e===this)for(t=this.__dep__.length;t--;)this.__dep__[t].resolve();if(o){for(t=0,n=this.__inc__.length;n>t;t++)this.__inc__[t].resolve(e);for(i in this.__fns__)r=e.make(i,this.__fns__[i]),o[i]!==r&&(o[i]=r)}}}),JS.ObjectMethods=new JS.Module({__eigen__:function(){if(this.__meta__)return this.__meta__;var e=this.__meta__=new JS.Module({},{_resolve:this});return e.include(this.klass.__mod__),e},extend:function(e,t){return this.__eigen__().include(e,{_extended:this},t!==!1)},isA:function(e){return this.__eigen__().includes(e)},method:function(e){var t=this,n=t.__mcache__=t.__mcache__||{};return(n[e]||{}).fn===t[e]?n[e].bd:(n[e]={fn:t[e],bd:JS.bind(t[e],t)}).bd}}),JS.Class=JS.makeFunction(),JS.extend(JS.Class.prototype=JS.makeBridge(JS.Module),{initialize:function(e,t){var n=JS.extend(JS.makeFunction(),this);n.klass=n.constructor=this.klass,JS.isFn(e)||(t=e,e=Object),n.inherit(e),n.include(t,null,!1),n.resolve();do e.inherited&&e.inherited(n);while(e=e.superclass);return n},inherit:function(e){this.superclass=e,this.__eigen__&&(this.__eigen__().include(e.__eigen__?e.__eigen__():new JS.Module(e.prototype)),this.__meta__.resolve()),this.subclasses=[],(e.subclasses||[]).push(this);var t=this.prototype=JS.makeBridge(e);t.klass=t.constructor=this,this.__mod__=new JS.Module({},{_resolve:this.prototype}),this.include(JS.ObjectMethods,null,!1),e!==Object&&this.include(e.__mod__||new JS.Module(e.prototype,{_resolve:e.prototype}),null,!1)},include:function(e,t,n){if(e){var i=this.__mod__,t=t||{};return t._included=this,i.include(e,t,n!==!1)}},extend:function(){if(this.callSuper){this.callSuper();for(var e=this.subclasses.length;e--;)this.subclasses[e].extend()}},define:function(){var e=this.__mod__;e.define.apply(e,arguments),e.resolve()},includes:JS.delegate("__mod__","includes"),ancestors:JS.delegate("__mod__","ancestors"),resolve:JS.delegate("__mod__","resolve")}),JS.Module=JS.extend(new JS.Class(JS.Module.prototype),JS.ObjectMethods.__fns__),JS.Module.include(JS.ObjectMethods),JS.Class=JS.extend(new JS.Class(JS.Module,JS.Class.prototype),JS.ObjectMethods.__fns__),JS.Module.klass=JS.Module.constructor=JS.Class.klass=JS.Class.constructor=JS.Class,JS.Module.extend({_observers:[],methodAdded:function(e,t){this._observers.push([e,t])},_notify:function(e,t){for(var n=this._observers,i=n.length;i--;)n[i][0].call(n[i][1]||null,e,t)}}),JS.extend(JS,{Interface:new JS.Class({initialize:function(e){this.test=function(t,n){for(var i=e.length;i--;)if(!JS.isFn(t[e[i]]))return n?e[i]:!1;return!0}},extend:{ensure:function(){for(var e,t,n=JS.array(arguments),i=n.shift();e=n.shift();)if(t=e.test(i,!0),t!==!0)throw new Error("object does not implement "+t+"()")}}}),Singleton:new JS.Class({initialize:function(e,t){return new new JS.Class(e,t)}})}),JS.Enumerable=new JS.Module({extend:{forEach:function(e,t){for(var n=0,i=this.length;i>n;n++)this[n]&&e.call(t||null,this[n],n)},isComparable:function(e){return e.all(function(e){return JS.isFn(e.compareTo)})},Collection:new JS.Class({initialize:function(e){this.length=0;var t=Array.prototype.push;JS.Enumerable.forEach.call(e,function(e){t.call(this,e)},this)}})},all:function(e,t){var n=!0;return this.forEach(function(i,r){n=n&&e.call(t||null,i,r)}),!!n},any:function(e,t){var n=!1;return this.forEach(function(i,r){n=n||e.call(t||null,i,r)}),!!n},forEachCons:function(e,t,n){for(var i=this.entries(),r=i.length,o=r-e,a=0;o>=a;a++)t.call(n||null,i.slice(a,a+e),a)},forEachSlice:function(e,t,n){for(var i=this.entries(),r=i.length,o=Math.ceil(r/e),a=0;o>a;a++)t.call(n||null,i.slice(a*e,(a+1)*e),a)},find:function(e,t){var n={},i=n;return this.forEach(function(r,o){n===i&&(n=e.call(t||null,r,o)?r:n)}),n===i?null:n},inject:function(e,t,n){var i=0,r={};return JS.isFn(e)&&(n=t,t=e,e=r),this.forEach(function(o,a){return i++||e!==r?void(e=t.call(n||null,e,o,a)):e=o}),e},map:function(e,t){var n=[];return this.forEach(function(i,r){n.push(e.call(t||null,i,r))}),n},max:function(e,t){var n=this.sort(e,t);return n[n.length-1]},member:function(e){return this.any(function(t){return t===e})},min:function(e,t){var n=this.sort(e,t);return n[0]},partition:function(e,t){var n=[],i=[];return this.forEach(function(r,o){(e.call(t||null,r,o)?n:i).push(r)}),[n,i]},reject:function(e,t){var n=[];return this.forEach(function(i,r){e.call(t||null,i,r)||n.push(i)}),n},select:function(e,t){var n=[];return this.forEach(function(i,r){e.call(t||null,i,r)&&n.push(i)}),n},sort:function(e,t){var n=JS.Enumerable.isComparable(this),i=this.entries();return e=e||(n?function(e,t){return e.compareTo(t)}:null),e?i.sort(function(n,i){return e.call(t||null,n,i)}):i.sort()},sortBy:function(e,t){var n=JS.Enumerable,i=new n.Collection(this.map(e,t)),r=n.isComparable(i);return new n.Collection(i.zip(this).sort(function(e,t){return e=e[0],t=t[0],r?e.compareTo(t):t>e?-1:e>t?1:0})).map(function(e){return e[1]})},toArray:function(){return this.map(function(e){return e})},zip:function(){var e,t,n=JS.Enumerable,i=[],r=0,o=arguments.length;arguments[o-1]instanceof Function&&(e=arguments[o-1],t={}),arguments[o-2]instanceof Function&&(e=arguments[o-2],t=arguments[o-1]),n.forEach.call(arguments,function(n){n!==e&&n!==t&&(n.toArray&&(n=n.toArray()),n instanceof Array&&i.push(n))});var a=this.map(function(e){var t=[e];return n.forEach.call(i,function(e){t.push(void 0===e[r]?null:e[r])}),++r&&t});return e?void n.forEach.call(a,e,t):a}}),JS.Enumerable.include({forEach:JS.Enumerable.forEach,collect:JS.Enumerable.instanceMethod("map"),detect:JS.Enumerable.instanceMethod("find"),entries:JS.Enumerable.instanceMethod("toArray"),every:JS.Enumerable.instanceMethod("all"),findAll:JS.Enumerable.instanceMethod("select"),filter:JS.Enumerable.instanceMethod("select"),some:JS.Enumerable.instanceMethod("any")}),JS.Enumerable.Collection.include(JS.Enumerable),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},handleRemote:function(i){var r,o,a,s,l,u;if(n.fire(i,"ajax:before")){if(s=i.data("with-credentials")||null,l=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),o=i.attr("action"),a=i.serializeArray();var c=i.data("ujs:submit-button");c&&(a.push(c),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),a=i.data("params")||null);return u={type:r||"GET",data:a,dataType:l,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[e,r])?void i.trigger("ajax:send",e):!1},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(o)},s&&(u.xhrFields={withCredentials:s}),o&&(u.url=o),n.ajax(u)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!n.protocol||!n.host||t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch(i){return!0}},handleMethod:function(i){var r=n.href(i),o=i.data("method"),a=i.attr("target"),s=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),u=e('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+o+'" type="hidden" />';l===t||s===t||n.isCrossDomain(r)||(c+='<input name="'+l+'" value="'+s+'" type="hidden" />'),a&&u.attr("target",a),u.hide().append(c).appendTo("body"),u.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,i;n=e.is("button")?"html":"val",i=e.data("disable-with"),e.data("ujs:enable-with",e[n]()),i!==t&&e[n](i),e.prop("disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,i=e.data("confirm"),r=!1;return i?(n.fire(e,"confirm")&&(r=n.confirm(i),t=n.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,n,i){var r,o,a=e(),s=n||"input,textarea",l=t.find(s);return l.each(function(){if(r=e(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!i){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;a=a.add(r)}}),a.length?a:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var i=e.data("disable-with");e.data("ujs:enable-with",e.html()),i!==t&&e.html(i),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:enable-with")&&e.rails.enableElement(t)})}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=e(this),o=r.data("method"),a=r.data("params"),s=i.metaKey||i.ctrlKey;if(!n.allowAction(r))return n.stopEverything(i);if(!s&&r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t){if(s&&(!o||"GET"===o)&&!a)return!0;var l=n.handleRemote(r);return l===!1?n.enableElement(r):l.fail(function(){n.enableElement(r)}),!1}return o?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return r===!1?n.enableFormElement(i):r.fail(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r,o,a=e(this),s=a.data("remote")!==t;if(!n.allowAction(a))return n.stopEverything(i);if(a.attr("novalidate")==t&&(r=n.blankInputs(a,n.requiredInputSelector),r&&n.fire(a,"ajax:aborted:required",[r])))return n.stopEverything(i);if(s){if(o=n.nonBlankInputs(a,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(a)},13);var l=n.fire(a,"ajax:aborted:file",[o]);return l||setTimeout(function(){n.enableFormElements(a)},13),l}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),/*!
 * JavaScript Cookie v2.0.3
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var t=window.Cookies,n=window.Cookies=e(window.jQuery);n.noConflict=function(){return window.Cookies=t,n}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,r,o){var a;if(arguments.length>1){if(o=e({path:"/"},i.defaults,o),"number"==typeof o.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(l){}return r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}t||(a={});for(var u=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var h=u[d].split("="),p=h[0].replace(c,decodeURIComponent),f=h.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{if(f=n&&n(f,p)||f.replace(c,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(l){}if(t===p){a=f;break}t||(a[p]=f)}catch(l){}}return a}return i.get=i.set=i,i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}return t()}),/*!
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
function(e){function t(t,n,i,r){var o={data:r||(n?n.data:{}),_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:u,nest:c,wrap:d,html:h,update:p};return t&&e.extend(o,t,{nodes:[],parent:n}),i&&(o.tmpl=i,o._ctnt=o._ctnt||o.tmpl(e,o),o.key=++w,(_.length?y:A)[w]=o),o}function n(t,r,o){var a,s=o?e.map(o,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+g+'="'+t.key+'" $2'):e:n(e,t,e._ctnt)}):t;return r?s:(s=s.join(""),s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,r,o){a=e(r).get(),l(a),n&&(a=i(n).concat(a)),o&&(a=a.concat(i(o)))}),a?a:i(s))}function i(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function r(t){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,i,r,o,s,l){var u,c,d,h=e.tmpl.tag[i];if(!h)throw"Template command not found: "+i;return u=h._default||[],s&&!/\w$/.test(o)&&(o+=s,s=""),o?(o=a(o),l=l?","+a(l)+")":s?")":"",c=s?o.indexOf(".")>-1?o+a(s):"("+o+").call($item"+l:o,d=s?c:"(typeof("+o+")==='function'?("+o+").call($item):("+o+"))"):d=c=u.$1||"null",r=a(r),"');"+h[n?"close":"open"].split("$notnull_1").join(o?"typeof("+o+")!=='undefined' && ("+o+")!=null":"true").split("$1a").join(d).split("$1").join(c).split("$2").join(r||u.$2||"")+"_.push('"})+"');}return _;")}function o(t,i){t._wrap=n(t,!0,e.isArray(i)?i:[v.test(i)?i:e(i).html()]).join("")}function a(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function l(n){function i(n){function i(e){e+=u,a=c[e]=c[e]||t(a,A[a.parent.key+u]||a.parent)}var r,o,a,s,l=n;if(s=n.getAttribute(g)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(r=l.getAttribute(g)););r!==s&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(g)||0:0,(a=A[s])||(a=y[s],a=t(a,A[l]||y[l]),a.key=++w,A[w]=a),E&&i(s)),n.removeAttribute(g)}else E&&(a=e.data(n,"tmplItem"))&&(i(a.key),A[a.key]=a,l=e.data(n.parentNode,"tmplItem"),l=l?l.key:0);if(a){for(o=a;o&&o.key!=l;)o.nodes.push(n),o=o.parent;delete a._ctnt,delete a._wrap,e.data(n,"tmplItem",a)}}var r,o,a,s,l,u="_"+E,c={};for(a=0,s=n.length;s>a;a++)if(1===(r=n[a]).nodeType){for(o=r.getElementsByTagName("*"),l=o.length-1;l>=0;l--)i(o[l]);i(r)}}function u(e,t,n,i){return e?void _.push({_:e,tmpl:t,item:this,data:n,options:i}):_.pop()}function c(t,n,i){return e.tmpl(e.template(t),n,i,this)}function d(t,n){var i=t.options||{};return i.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,i,t.item)}function h(t,n){var i=this._wrap;return e.map(e(e.isArray(i)?i.join(""):i).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||s(e)})}function p(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var f,m=e.fn.domManip,g="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,A={},y={},b={key:0,data:{}},w=0,E=0,_=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(i){var r,o,a,s,l=[],u=e(i),c=1===this.length&&this[0].parentNode;if(f=A||{},c&&11===c.nodeType&&1===c.childNodes.length&&1===u.length)u[n](this[0]),l=this;else{for(o=0,a=u.length;a>o;o++)E=o,r=(o>0?this.clone(!0):this).get(),e(u[o])[n](r),l=l.concat(r);E=0,l=this.pushStack(l,t,u.selector)}return s=f,f=null,e.tmpl.complete(s),l}}),e.fn.extend({tmpl:function(t,n,i){return e.tmpl(this[0],t,n,i)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,n,i){if(t[0]&&e.isArray(t[0])){for(var r,o=e.makeArray(arguments),a=t[0],s=a.length,l=0;s>l&&!(r=e.data(a[l++],"tmplItem")););r&&E&&(o[2]=function(t){e.tmpl.afterManip(this,t,i)}),m.apply(this,o)}else m.apply(this,arguments);return E=0,f||e.tmpl.complete(A),this}}),e.extend({tmpl:function(i,r,a,s){var l,u=!s;if(u)s=b,i=e.template[i]||e.template(null,i),y={};else if(!i)return i=s.tmpl,A[s.key]=s,s.nodes=[],s.wrapped&&o(s,s.wrapped),e(n(s,null,s.tmpl(e,s)));return i?("function"==typeof r&&(r=r.call(s||{})),a&&a.wrapped&&o(a,a.wrapped),l=e.isArray(r)?e.map(r,function(e){return e?t(a,s,i,e):null}):[t(a,s,i,r)],u?e(n(s,null,l)):l):[]},tmplItem:function(t){var n;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode););return n||b},template:function(t,n){return n?("string"==typeof n?n=r(n):n instanceof e&&(n=n[0]||{}),n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",r(n.innerHTML))),"string"==typeof t?e.template[t]=n:n):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,v.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){A={}},afterManip:function(t,n,i){var r=11===n.nodeType?e.makeArray(n.childNodes):1===n.nodeType?[n]:[];i.call(t,n),l(r),E++}})}(jQuery),/*
 * jQuery Format Plugin v1.1
 * http://www.asual.com/jquery/format/
 *
 * Copyright (c) 2009-2010 Rostislav Hristov
 * Uses code by Matt Kruse
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Date: 2010-09-26 19:38:37 +0300 (Sun, 26 Sep 2010)
 */
function(e){e.format=function(){var e="undefined",t={date:{format:"dddd, MMMM dd, yyyy h:mm:ss tt",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],timeFormat:"h:mm tt",shortDateFormat:"M/d/yyyy",longDateFormat:"dddd, MMMM dd, yyyy"},number:{format:"#,##0.0#",groupingSeparator:",",decimalSeparator:"."}};return{locale:function(e){if(a={a:6},e)for(var n in e)for(var i in e[n])t[n][i]=e[n][i];return t},date:function(n,i){var r,o,a=0,s=0,l=0,u="",c="";if("string"==typeof n){var d=function(e,t,n,i){for(var r=i;r>=n;r--){var o=e.substring(t,t+r);if(o.length>=n&&new RegExp(/^\d+$/).test(o))return o}return null};typeof i==e&&(i=t.date.format);for(var h,p,f=!1,m=0,g=new Date,v=g.getYear(),A=g.getMonth()+1,y=1,b=g.getHours(),w=g.getMinutes(),E=g.getSeconds(),_=g.getMilliseconds(),k="";a<i.length;){for(c="",u=i.charAt(a);i.charAt(a)==u&&a<i.length;)c+=i.charAt(a++);if(c.indexOf("MMMM")>-1&&c.length>4&&(c="MMMM"),c.indexOf("EEEE")>-1&&c.length>4&&(c="EEEE"),"yyyy"==c||"yy"==c||"y"==c){if("yyyy"==c&&(r=4,o=4),"yy"==c&&(r=2,o=2),"y"==c&&(r=2,o=4),v=d(n,m,r,o),null===v)return 0;m+=v.length,2==v.length&&(v=parseInt(v,10),v=v>70?1900+v:2e3+v)}else if("MMMM"==c){for(A=0,s=0,l=t.date.monthsFull.length;l>s;s++)if(h=t.date.monthsFull[s],n.substring(m,m+h.length).toLowerCase()==h.toLowerCase()){A=s+1,m+=h.length;break}if(1>A||A>12)return 0}else if("MMM"==c){for(A=0,s=0,l=t.date.monthsShort.length;l>s;s++)if(h=t.date.monthsShort[s],n.substring(m,m+h.length).toLowerCase()==h.toLowerCase()){A=s+1,m+=h.length;break}if(1>A||A>12)return 0}else if("EEEE"==c){for(s=0,l=t.date.daysFull.length;l>s;s++)if(p=t.date.daysFull[s],n.substring(m,m+p.length).toLowerCase()==p.toLowerCase()){m+=p.length;break}}else if("EEE"==c){for(s=0,l=t.date.daysShort.length;l>s;s++)if(p=t.date.daysShort[s],n.substring(m,m+p.length).toLowerCase()==p.toLowerCase()){m+=p.length;break}}else if("MM"==c||"M"==c){if(A=d(n,m,f?c.length:1,2),null===A||1>A||A>12)return 0;m+=A.length}else if("dd"==c||"d"==c){if(y=d(n,m,f?c.length:1,2),null===y||1>y||y>31)return 0;m+=y.length}else if("hh"==c||"h"==c){if(b=d(n,m,f?c.length:1,2),null===b||1>b||b>12)return 0;m+=b.length}else if("HH"==c||"H"==c){if(b=d(n,m,f?c.length:1,2),null===b||0>b||b>23)return 0;m+=b.length}else if("KK"==c||"K"==c){if(b=d(n,m,f?c.length:1,2),null===b||0>b||b>11)return 0;m+=b.length}else if("kk"==c||"k"==c){if(b=d(n,m,f?c.length:1,2),null===b||1>b||b>24)return 0;m+=b.length,b--}else if("mm"==c||"m"==c){if(w=d(n,m,f?c.length:1,2),null===w||0>w||w>59)return 0;m+=w.length}else if("ss"==c||"s"==c){if(E=d(n,m,f?c.length:1,2),null===E||0>E||E>59)return 0;m+=E.length}else if("SSS"==c||"SS"==c||"S"==c){if(_=d(n,m,f?c.length:1,3),null===_||0>_||_>999)return 0;m+=_.length}else if("a"==c){var C=n.substring(m,m+2).toLowerCase();if("am"==C)k="AM";else{if("pm"!=C)return 0;k="PM"}m+=2}else{if(c!=n.substring(m,m+c.length))return 0;m+=c.length}}if(m!=n.length)return 0;if(2==A)if(v%4===0&&v%100!==0||v%400===0){if(y>29)return 0}else if(y>28)return 0;return(4==A||6==A||9==A||11==A)&&y>30?0:(12>b&&"PM"==k?b=b-0+12:b>11&&"AM"==k&&(b-=12),new Date(v,A-1,y,b,w,E,_))}var S=function(t,n){return typeof n==e||2==n?(t>=0&&10>t?"0":"")+t:t>=0&&10>t?"00"+t:t>=10&&100>t?"0"+t:t};typeof i==e&&(i=t.date.format),o=n.getYear(),1e3>o&&(o=String(o+1900));var x=n.getMonth()+1,j=n.getDate(),T=n.getDay(),L=n.getHours(),R=n.getMinutes(),I=n.getSeconds(),P=n.getMilliseconds();n={y:o,yyyy:o,yy:String(o).substring(2,4),M:x,MM:S(x),MMM:t.date.monthsShort[x-1],MMMM:t.date.monthsFull[x-1],d:j,dd:S(j),EEE:t.date.daysShort[T],EEEE:t.date.daysFull[T],H:L,HH:S(L)},n.h=0===L?12:L>12?L-12:L,n.hh=S(n.h),n.k=L+1,n.kk=S(n.k),n.K=L>11?L-12:L,n.KK=S(n.K),n.a=L>11?"PM":"AM",n.m=R,n.mm=S(R),n.s=I,n.ss=S(I),n.S=P,n.SS=S(P),n.SSS=S(P,3);var M="";for(a=0,u="",c="",I=!1;a<i.length;)if(c="",u=i.charAt(a),"'"==u)a++,i.charAt(a)==u?(M+=u,a++):I=!I;else{for(;i.charAt(a)==u;)c+=i.charAt(a++);-1!=c.indexOf("MMMM")&&c.length>4&&(c="MMMM"),-1!=c.indexOf("EEEE")&&c.length>4&&(c="EEEE"),M+=typeof n[c]==e||I?c:n[c]}return M},number:function(n,i){var r,o,a,s,l,u;if("string"==typeof n)return r=t.number.groupingSeparator,a=t.number.decimalSeparator,s=n.indexOf(a),l=1,-1!=s&&(l=Math.pow(10,n.length-s-1)),n=n.replace(new RegExp("["+r+"]","g"),""),n=n.replace(new RegExp("["+a+"]"),"."),parseInt(n*l,10)/l;(typeof i==e||i.length<1)&&(i=t.number.format);var c="",d="",h=0>n;if(n=Math.abs(n),r=",",o=i.lastIndexOf(r),a=".",s=i.indexOf(a),-1!=s){d=t.number.decimalSeparator;var p=i.substr(s+1).replace(/#/g,"").length,f=i.substr(s+1).length;if(f>0){l=1e3;var m=Math.pow(10,f),g=Math.round(parseInt(n*m*l-Math.round(n)*m*l,10)/l),v=String(0>g?Math.round(parseInt(n*m*l-parseInt(n,10)*m*l,10)/l):g),A=n.toString().split(".");if(typeof A[1]!=e)for(u=0;u<A[1].length&&"0"==A[1].substr(u,1);u++)v="0"+v;for(u=0;u<f-d.length;u++)v+="0";var y,b="";for(u=0;u<v.length&&(y=v.substr(u,1),!(u>=p&&"0"==y&&/^0*$/.test(v.substr(u+1))));u++)b+=y;d+=b}d==t.number.decimalSeparator&&(d="")}if(0!==s){c=String(""!=d?Math.floor(n):Math.round(n));var w=t.number.groupingSeparator,E=0;if(-1!=o&&(E=-1!=s?s-o:i.length-o,E--),E>0){var _=0,k="";for(u=c.length;u--;)0!==_&&_%E===0&&(k=w+k),k=c.substr(u,1)+k,_++;c=k}var C;C=-1!=s?i.substr(0,s).replace(new RegExp("#|"+w,"g"),"").length:i.replace(new RegExp("#|"+w,"g"),"").length;var S=c.length;for(u=S;C>u;u++)c="0"+c}return result=c+d,(h?"-":"")+result}}}()}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function n(t){var n=t.target,i=e(n);if(!i.is("[type=submit],[type=image]")){var r=i.closest("[type=submit]");if(0===r.length)return;n=r[0]}var o=this;if(o.clk=n,"image"==n.type)if(void 0!==t.offsetX)o.clk_x=t.offsetX,o.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=i.offset();o.clk_x=t.pageX-a.left,o.clk_y=t.pageY-a.top}else o.clk_x=t.pageX-n.offsetLeft,o.clk_y=t.pageY-n.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function i(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var r={};r.fileapi=void 0!==e("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData;var o=!!e.fn.prop;e.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function n(n){var i,r,o=e.param(n,t.traditional).split("&"),a=o.length,s=[];for(i=0;a>i;i++)o[i]=o[i].replace(/\+/g," "),r=o[i].split("="),s.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return s}function a(i){for(var r=new FormData,o=0;o<i.length;o++)r.append(i[o].name,i[o].value);if(t.extraData){var a=n(t.extraData);for(o=0;o<a.length;o++)a[o]&&r.append(a[o][0],a[o][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});t.uploadProgress&&(s.xhr=function(){var n=e.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(e){var n=0,i=e.loaded||e.position,r=e.total;e.lengthComputable&&(n=Math.ceil(i/r*100)),t.uploadProgress(e,i,r,n)},!1),n}),s.data=null;var u=s.beforeSend;return s.beforeSend=function(e,n){n.data=t.formData?t.formData:r,u&&u.call(this,e,n)},e.ajax(s)}function s(n){function r(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){i("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){i("cannot get iframe.contentDocument: "+n),t=e.document}return t}function a(){function t(){try{var e=r(v).readyState;i("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(n){i("Server abort: ",n," (",n.name,")"),s(S),E&&clearTimeout(E),E=void 0}}var n=d.attr2("target"),o=d.attr2("action"),a="multipart/form-data",u=d.attr("enctype")||d.attr("encoding")||a;_.setAttribute("target",f),(!l||/post/i.test(l))&&_.setAttribute("method","POST"),o!=h.url&&_.setAttribute("action",h.url),h.skipEncodingOverride||l&&!/post/i.test(l)||d.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),h.timeout&&(E=setTimeout(function(){w=!0,s(C)},h.timeout));var c=[];try{if(h.extraData)for(var p in h.extraData)h.extraData.hasOwnProperty(p)&&c.push(e.isPlainObject(h.extraData[p])&&h.extraData[p].hasOwnProperty("name")&&h.extraData[p].hasOwnProperty("value")?e('<input type="hidden" name="'+h.extraData[p].name+'">').val(h.extraData[p].value).appendTo(_)[0]:e('<input type="hidden" name="'+p+'">').val(h.extraData[p]).appendTo(_)[0]);h.iframeTarget||g.appendTo("body"),v.attachEvent?v.attachEvent("onload",s):v.addEventListener("load",s,!1),setTimeout(t,15);try{_.submit()}catch(m){var A=document.createElement("form").submit;A.apply(_)}}finally{_.setAttribute("action",o),_.setAttribute("enctype",u),n?_.setAttribute("target",n):d.removeAttr("target"),e(c).remove()}}function s(t){if(!A.aborted&&!R){if(L=r(v),L||(i("cannot access response document"),t=S),t===C&&A)return A.abort("timeout"),void k.reject(A,"timeout");if(t==S&&A)return A.abort("server abort"),void k.reject(A,"error","server abort");if(L&&L.location.href!=h.iframeSrc||w){v.detachEvent?v.detachEvent("onload",s):v.removeEventListener("load",s,!1);var n,o="success";try{if(w)throw"timeout";var a="xml"==h.dataType||L.XMLDocument||e.isXMLDoc(L);if(i("isXml="+a),!a&&window.opera&&(null===L.body||!L.body.innerHTML)&&--I)return i("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var l=L.body?L.body:L.documentElement;A.responseText=l?l.innerHTML:null,A.responseXML=L.XMLDocument?L.XMLDocument:L,a&&(h.dataType="xml"),A.getResponseHeader=function(e){var t={"content-type":h.dataType};return t[e.toLowerCase()]},l&&(A.status=Number(l.getAttribute("status"))||A.status,A.statusText=l.getAttribute("statusText")||A.statusText);var u=(h.dataType||"").toLowerCase(),c=/(json|script|text)/.test(u);if(c||h.textarea){var d=L.getElementsByTagName("textarea")[0];if(d)A.responseText=d.value,A.status=Number(d.getAttribute("status"))||A.status,A.statusText=d.getAttribute("statusText")||A.statusText;else if(c){var f=L.getElementsByTagName("pre")[0],m=L.getElementsByTagName("body")[0];f?A.responseText=f.textContent?f.textContent:f.innerText:m&&(A.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==u&&!A.responseXML&&A.responseText&&(A.responseXML=P(A.responseText));try{T=O(A,u,h)}catch(y){o="parsererror",A.error=n=y||o}}catch(y){i("error caught: ",y),o="error",A.error=n=y||o}A.aborted&&(i("upload aborted"),o=null),A.status&&(o=A.status>=200&&A.status<300||304===A.status?"success":"error"),"success"===o?(h.success&&h.success.call(h.context,T,"success",A),k.resolve(A.responseText,"success",A),p&&e.event.trigger("ajaxSuccess",[A,h])):o&&(void 0===n&&(n=A.statusText),h.error&&h.error.call(h.context,A,o,n),k.reject(A,"error",n),p&&e.event.trigger("ajaxError",[A,h,n])),p&&e.event.trigger("ajaxComplete",[A,h]),p&&!--e.active&&e.event.trigger("ajaxStop"),h.complete&&h.complete.call(h.context,A,o),R=!0,h.timeout&&clearTimeout(E),setTimeout(function(){h.iframeTarget?g.attr("src",h.iframeSrc):g.remove(),A.responseXML=null},100)}}}var u,c,h,p,f,g,v,A,y,b,w,E,_=d[0],k=e.Deferred();if(k.abort=function(e){A.abort(e)},n)for(c=0;c<m.length;c++)u=e(m[c]),o?u.prop("disabled",!1):u.removeAttr("disabled");if(h=e.extend(!0,{},e.ajaxSettings,t),h.context=h.context||h,f="jqFormIO"+(new Date).getTime(),h.iframeTarget?(g=e(h.iframeTarget),b=g.attr2("name"),b?f=b:g.attr2("name",f)):(g=e('<iframe name="'+f+'" src="'+h.iframeSrc+'" />'),g.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=g[0],A={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";i("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(r){}g.attr("src",h.iframeSrc),A.error=n,h.error&&h.error.call(h.context,A,n,t),p&&e.event.trigger("ajaxError",[A,h,n]),h.complete&&h.complete.call(h.context,A,n)}},p=h.global,p&&0===e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[A,h]),h.beforeSend&&h.beforeSend.call(h.context,A,h)===!1)return h.global&&e.active--,k.reject(),k;if(A.aborted)return k.reject(),k;y=_.clk,y&&(b=y.name,b&&!y.disabled&&(h.extraData=h.extraData||{},h.extraData[b]=y.value,"image"==y.type&&(h.extraData[b+".x"]=_.clk_x,h.extraData[b+".y"]=_.clk_y)));var C=1,S=2,x=e("meta[name=csrf-token]").attr("content"),j=e("meta[name=csrf-param]").attr("content");j&&x&&(h.extraData=h.extraData||{},h.extraData[j]=x),h.forceSync?a():setTimeout(a,10);var T,L,R,I=50,P=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},M=e.parseJSON||function(e){return window.eval("("+e+")")},O=function(t,n,i){var r=t.getResponseHeader("content-type")||"",o="xml"===n||!n&&r.indexOf("xml")>=0,a=o?t.responseXML:t.responseText;return o&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(a=i.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&r.indexOf("json")>=0?a=M(a):("script"===n||!n&&r.indexOf("javascript")>=0)&&e.globalEval(a)),a};return k}if(!this.length)return i("ajaxSubmit: skipping submit process - no element selected"),this;var l,u,c,d=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),l=t.type||this.attr2("method"),u=t.url||this.attr2("action"),c="string"==typeof u?e.trim(u):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:c,success:e.ajaxSettings.success,type:l||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var h={};if(this.trigger("form-pre-serialize",[this,t,h]),h.veto)return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return i("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=t.traditional;void 0===p&&(p=e.ajaxSettings.traditional);var f,m=[],g=this.formToArray(t.semantic,m);if(t.data&&(t.extraData=t.data,f=e.param(t.data,p)),t.beforeSubmit&&t.beforeSubmit(g,this,t)===!1)return i("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[g,this,t,h]),h.veto)return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=e.param(g,p);f&&(v=v?v+"&"+f:f),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+v,t.data=null):t.data=v;var A=[];if(t.resetForm&&A.push(function(){d.resetForm()}),t.clearForm&&A.push(function(){d.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};A.push(function(n){var i=t.replaceTarget?"replaceWith":"html";e(t.target)[i](n).each(y,arguments)})}else t.success&&A.push(t.success);if(t.success=function(e,n,i){for(var r=t.context||this,o=0,a=A.length;a>o;o++)A[o].apply(r,[e,n,i||d,d])},t.error){var b=t.error;t.error=function(e,n,i){var r=t.context||this;b.apply(r,[e,n,i,d])}}if(t.complete){var w=t.complete;t.complete=function(e,n){var i=t.context||this;w.apply(i,[e,n,d])}}var E=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),_=E.length>0,k="multipart/form-data",C=d.attr("enctype")==k||d.attr("encoding")==k,S=r.fileapi&&r.formdata;i("fileAPI :"+S);var x,j=(_||C)&&!S;t.iframe!==!1&&(t.iframe||j)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){x=s(g)}):x=s(g):x=(_||C)&&S?a(g):e.ajax(t),d.removeData("jqxhr").data("jqxhr",x);for(var T=0;T<m.length;T++)m[T]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(r){if(r=r||{},r.delegation=r.delegation&&e.isFunction(e.fn.on),!r.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!e.isReady&&o.s?(i("DOM not ready, queuing ajaxForm"),e(function(){e(o.s,o.c).ajaxForm(r)}),this):(i("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return r.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,r,t).on("click.form-plugin",this.selector,r,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,t).bind("click.form-plugin",r,n)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,n){var i=[];if(0===this.length)return i;var o,a=this[0],s=this.attr("id"),l=t?a.getElementsByTagName("*"):a.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=e(l).get()),s&&(o=e(':input[form="'+s+'"]').get(),o.length&&(l=(l||[]).concat(o))),!l||!l.length)return i;var u,c,d,h,p,f,m;for(u=0,f=l.length;f>u;u++)if(p=l[u],d=p.name,d&&!p.disabled)if(t&&a.clk&&"image"==p.type)a.clk==p&&(i.push({name:d,value:e(p).val(),type:p.type}),i.push({name:d+".x",value:a.clk_x},{name:d+".y",value:a.clk_y}));else if(h=e.fieldValue(p,!0),h&&h.constructor==Array)for(n&&n.push(p),c=0,m=h.length;m>c;c++)i.push({name:d,value:h[c]});else if(r.fileapi&&"file"==p.type){n&&n.push(p);var g=p.files;if(g.length)for(c=0;c<g.length;c++)i.push({name:d,value:g[c],type:p.type});else i.push({name:d,value:"",type:p.type})}else null!==h&&"undefined"!=typeof h&&(n&&n.push(p),i.push({name:d,value:h,type:p.type,required:p.required}));if(!t&&a.clk){var v=e(a.clk),A=v[0];d=A.name,d&&!A.disabled&&"image"==A.type&&(i.push({name:d,value:v.val()}),i.push({name:d+".x",value:a.clk_x},{name:d+".y",value:a.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var i=this.name;if(i){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var o=0,a=r.length;a>o;o++)n.push({name:i,value:r[o]});else null!==r&&"undefined"!=typeof r&&n.push({name:this.name,value:r})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,r=this.length;r>i;i++){var o=this[i],a=e.fieldValue(o,t);null===a||"undefined"==typeof a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(n,a):n.push(a))}return n},e.fieldValue=function(t,n){var i=t.name,r=t.type,o=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==o&&-1==t.selectedIndex))return null;if("select"==o){var a=t.selectedIndex;if(0>a)return null;for(var s=[],l=t.options,u="select-one"==r,c=u?a+1:l.length,d=u?a:0;c>d;d++){var h=l[d];if(h.selected){var p=h.value;if(p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),u)return p;s.push(p)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,r=this.tagName.toLowerCase();n.test(i)||"textarea"==r?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});var swfobject=function(){function e(){if(!z){try{var e=D.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(t){return}z=!0;for(var n=B.length,i=0;n>i;i++)B[i]()}}function t(e){z?e():B[B.length]=e}function n(e){if(typeof O.addEventListener!=j)O.addEventListener("load",e,!1);else if(typeof D.addEventListener!=j)D.addEventListener("load",e,!1);else if(typeof O.attachEvent!=j)v(O,"onload",e);else if("function"==typeof O.onload){var t=O.onload;O.onload=function(){t(),e()}}else O.onload=e}function i(){F?r():o()}function r(){var e=D.getElementsByTagName("body")[0],t=g(T);t.setAttribute("type",I);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=j){var r=n.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),J.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(10>i)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,o()}()}else o()}function o(){var e=U.length;if(e>0)for(var t=0;e>t;t++){var n=U[t].id,i=U[t].callbackFn,r={success:!1,id:n};if(J.pv[0]>0){var o=m(n);if(o)if(!A(U[t].swfVersion)||J.wk&&J.wk<312)if(U[t].expressInstall&&s()){var c={};c.data=U[t].expressInstall,c.width=o.getAttribute("width")||"0",c.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(c.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(c.align=o.getAttribute("align"));for(var d={},h=o.getElementsByTagName("param"),p=h.length,f=0;p>f;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(d[h[f].getAttribute("name")]=h[f].getAttribute("value"));l(c,d,n,i)}else u(o),i&&i(r);else b(n,!0),i&&(r.success=!0,r.ref=a(n),i(r))}else if(b(n,!0),i){var g=a(n);g&&typeof g.SetVariable!=j&&(r.success=!0,r.ref=g),i(r)}}}function a(e){var t=null,n=m(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=j)t=n;else{var i=n.getElementsByTagName(T)[0];i&&(t=i)}return t}function s(){return!G&&A("6.0.65")&&(J.win||J.mac)&&!(J.wk&&J.wk<312)}function l(e,t,n,i){G=!0,k=i||null,C={success:!1,id:n};var r=m(n);if(r){"OBJECT"==r.nodeName?(E=c(r),_=null):(E=r,_=n),e.id=P,(typeof e.width==j||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==j||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),D.title=D.title.slice(0,47)+" - Flash Player Installation";var o=J.ie&&J.win?"ActiveX":"PlugIn",a="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+D.title;if(typeof t.flashvars!=j?t.flashvars+="&"+a:t.flashvars=a,J.ie&&J.win&&4!=r.readyState){var s=g("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}d(e,t,n)}}function u(e){if(J.ie&&J.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(c(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(c(e),e)}function c(e){var t=g("div");if(J.win&&J.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(T)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;r>o;o++)1==i[o].nodeType&&"PARAM"==i[o].nodeName||8==i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function d(e,t,n){var i,r=m(n);if(J.wk&&J.wk<312)return i;if(r)if(typeof e.id==j&&(e.id=n),J.ie&&J.win){var o="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?o+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(o+=" "+a+'="'+e[a]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+s+"</object>",Y[Y.length]=e.id,i=m(e.id)}else{var u=g(T);u.setAttribute("type",I);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?u.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&u.setAttribute(c,e[c]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&h(u,d,t[d]);r.parentNode.replaceChild(u,r),i=u}return i}function h(e,t,n){var i=g("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function p(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(J.ie&&J.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=m(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=D.getElementById(e)}catch(n){}return t}function g(e){return D.createElement(e)}function v(e,t,n){e.attachEvent(t,n),W[W.length]=[e,t,n]}function A(e){var t=J.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function y(e,t,n,i){if(!J.ie||!J.mac){var r=D.getElementsByTagName("head")[0];if(r){var o=n&&"string"==typeof n?n:"screen";if(i&&(S=null,x=null),!S||x!=o){var a=g("style");a.setAttribute("type","text/css"),a.setAttribute("media",o),S=r.appendChild(a),J.ie&&J.win&&typeof D.styleSheets!=j&&D.styleSheets.length>0&&(S=D.styleSheets[D.styleSheets.length-1]),x=o}J.ie&&J.win?S&&typeof S.addRule==T&&S.addRule(e,t):S&&typeof D.createTextNode!=j&&S.appendChild(D.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if(V){var n=t?"visible":"hidden";z&&m(e)?m(e).style.visibility=n:y("#"+e,"visibility:"+n)}}function w(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=j?encodeURIComponent(e):e}{var E,_,k,C,S,x,j="undefined",T="object",L="Shockwave Flash",R="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",P="SWFObjectExprInst",M="onreadystatechange",O=window,D=document,N=navigator,F=!1,B=[i],U=[],Y=[],W=[],z=!1,G=!1,V=!0,J=function(){var e=typeof D.getElementById!=j&&typeof D.getElementsByTagName!=j&&typeof D.createElement!=j,t=N.userAgent.toLowerCase(),n=N.platform.toLowerCase(),i=/win/.test(n?n:t),r=/mac/.test(n?n:t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,a=!1,s=[0,0,0],l=null;if(typeof N.plugins!=j&&typeof N.plugins[L]==T)l=N.plugins[L].description,!l||typeof N.mimeTypes!=j&&N.mimeTypes[I]&&!N.mimeTypes[I].enabledPlugin||(F=!0,a=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof O.ActiveXObject!=j)try{var u=new ActiveXObject(R);u&&(l=u.GetVariable("$version"),l&&(a=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(c){}return{w3:e,pv:s,wk:o,ie:a,win:i,mac:r}}();!function(){J.w3&&((typeof D.readyState!=j&&"complete"==D.readyState||typeof D.readyState==j&&(D.getElementsByTagName("body")[0]||D.body))&&e(),z||(typeof D.addEventListener!=j&&D.addEventListener("DOMContentLoaded",e,!1),J.ie&&J.win&&(D.attachEvent(M,function(){"complete"==D.readyState&&(D.detachEvent(M,arguments.callee),e())}),O==top&&!function(){if(!z){try{D.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),J.wk&&!function(){return z?void 0:/loaded|complete/.test(D.readyState)?void e():void setTimeout(arguments.callee,0)}(),n(e)))}(),function(){J.ie&&J.win&&window.attachEvent("onunload",function(){for(var e=W.length,t=0;e>t;t++)W[t][0].detachEvent(W[t][1],W[t][2]);for(var n=Y.length,i=0;n>i;i++)p(Y[i]);for(var r in J)J[r]=null;J=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}()}return{registerObject:function(e,t,n,i){if(J.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,U[U.length]=r,b(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return J.w3?a(e):void 0},embedSWF:function(e,n,i,r,o,a,u,c,h,p){var f={success:!1,id:n};J.w3&&!(J.wk&&J.wk<312)&&e&&n&&i&&r&&o?(b(n,!1),t(function(){i+="",r+="";var t={};if(h&&typeof h===T)for(var m in h)t[m]=h[m];t.data=e,t.width=i,t.height=r;var g={};if(c&&typeof c===T)for(var v in c)g[v]=c[v];if(u&&typeof u===T)for(var y in u)typeof g.flashvars!=j?g.flashvars+="&"+y+"="+u[y]:g.flashvars=y+"="+u[y];if(A(o)){var w=d(t,g,n);t.id==n&&b(n,!0),f.success=!0,f.ref=w}else{if(a&&s())return t.data=a,void l(t,g,n,p);b(n,!0)}p&&p(f)})):p&&p(f)},switchOffAutoHideShow:function(){V=!1},ua:J,getFlashPlayerVersion:function(){return{major:J.pv[0],minor:J.pv[1],release:J.pv[2]}},hasFlashPlayerVersion:A,createSWF:function(e,t,n){return J.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,i){J.w3&&s()&&l(e,t,n,i)},removeSWF:function(e){J.w3&&p(e)},createCSS:function(e,t,n,i){J.w3&&y(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=D.location.search||D.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return w(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return w(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(G){var e=m(P);e&&E&&(e.parentNode.replaceChild(E,e),_&&(b(_,!0),J.ie&&J.win&&(E.style.display="block")),k&&k(C)),G=!1}}}}(),FlashDetect=new function(){var e=this;e.installed=!1,e.raw="",e.major=-1,e.minor=-1,e.revision=-1,e.revisionStr="";var t=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(e){return n(e)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(e){var t="6,0,21";try{e.AllowScriptAccess="always",t=n(e)}catch(i){}return t}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(e){return n(e)}}],n=function(e){var t=-1;try{t=e.GetVariable("$version")}catch(n){}return t},r=function(e){var t=-1;try{t=new ActiveXObject(e)}catch(n){t={activeXError:!0}}return t},o=function(e){var t=e.split(",");return{raw:e,major:parseInt(t[0].split(" ")[1],10),minor:parseInt(t[1],10),revision:parseInt(t[2],10),revisionStr:t[2]}},a=function(e){var t=e.split(/ +/),n=t[2].split(/\./),i=t[3];return{raw:e,major:parseInt(n[0],10),minor:parseInt(n[1],10),revisionStr:i,revision:s(i)}},s=function(t){return parseInt(t.replace(/[a-zA-Z]/g,""),10)||e.revision};e.majorAtLeast=function(t){return e.major>=t},e.minorAtLeast=function(t){return e.minor>=t},e.revisionAtLeast=function(t){return e.revision>=t},e.versionAtLeast=function(){var t=[e.major,e.minor,e.revision],n=Math.min(t.length,arguments.length);for(i=0;i<n;i++){if(t[i]>=arguments[i]){if(i+1<n&&t[i]==arguments[i])continue;return!0}return!1}},e.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var n="application/x-shockwave-flash",i=navigator.mimeTypes;if(i&&i[n]&&i[n].enabledPlugin&&i[n].enabledPlugin.description){var s=i[n].enabledPlugin.description,l=a(s);e.raw=l.raw,e.major=l.major,e.minor=l.minor,e.revisionStr=l.revisionStr,e.revision=l.revision,e.installed=!0}}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript)for(var s=-1,u=0;u<t.length&&-1==s;u++){var c=r(t[u].name);if(!c.activeXError&&(e.installed=!0,s=t[u].version(c),-1!=s)){var l=o(s);e.raw=l.raw,e.major=l.major,e.minor=l.minor,e.revision=l.revision,e.revisionStr=l.revisionStr}}}()};FlashDetect.JS_RELEASE="1.0.4","undefined"==typeof jwplayer&&(jwplayer=function(e){return jwplayer.api?jwplayer.api.selectPlayer(e):void 0},jwplayer.version="6.8.4616",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(e){function t(e){return function(){return l(e)}}function n(e,t,n,i,r){return function(){var o,s;if(r)n(e);else{try{if((o=e.responseXML)&&(s=o.firstChild,o.lastChild&&"parsererror"===o.lastChild.nodeName))return void(i&&i("Invalid XML"))}catch(l){}if(o&&s)return n(e);(o=a.parseXML(e.responseText))&&o.firstChild?(e=a.extend({},e,{responseXML:o}),n(e)):i&&i(e.responseText?"Invalid XML":t)}}}var i=document,r=window,o=navigator,a=e.utils=function(){};a.exists=function(e){switch(typeof e){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1}return!0},a.styleDimension=function(e){return e+(0<e.toString().indexOf("%")?"":"px")},a.getAbsolutePath=function(e,t){if(a.exists(t)||(t=i.location.href),a.exists(e)){var n;
if(a.exists(e)){n=e.indexOf("://");var r=e.indexOf("?");n=n>0&&(0>r||r>n)}else n=void 0;if(n)return e;n=t.substring(0,t.indexOf("://")+3);var o,r=t.substring(n.length,t.indexOf("/",n.length+1));0===e.indexOf("/")?o=e.split("/"):(o=t.split("?")[0],o=o.substring(n.length+r.length+1,o.lastIndexOf("/")),o=o.split("/").concat(e.split("/")));for(var s=[],l=0;l<o.length;l++)o[l]&&a.exists(o[l])&&"."!=o[l]&&(".."==o[l]?s.pop():s.push(o[l]));return n+r+"/"+s.join("/")}},a.extend=function(){var e=a.extend.arguments;if(1<e.length){for(var t=1;t<e.length;t++)a.foreach(e[t],function(t,n){try{a.exists(n)&&(e[0][t]=n)}catch(i){}});return e[0]}return null};var s=window.console=window.console||{log:function(){}};a.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof s.log?s.log(e):s.log.apply(s,e)};var l=a.userAgentMatch=function(e){return null!==o.userAgent.toLowerCase().match(e)};a.isIE=a.isMSIE=t(/msie/i),a.isFF=t(/firefox/i),a.isChrome=t(/chrome/i),a.isIPod=t(/iP(hone|od)/i),a.isIPad=t(/iPad/i),a.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),a.isIETrident=function(e){return e?(e=parseFloat(e).toFixed(1),l(RegExp("msie\\s*"+e+"|trident/.+rv:\\s*"+e,"i"))):l(/msie|trident/i)},a.isSafari=function(){return l(/safari/i)&&!l(/chrome/i)&&!l(/chromium/i)&&!l(/android/i)},a.isIOS=function(e){return l(e?RegExp("iP(hone|ad|od).+\\sOS\\s"+e,"i"):/iP(hone|ad|od)/i)},a.isAndroid=function(e,t){var n=t?!l(/chrome\/[23456789]/i):!0;return e?n&&l(RegExp("android.*"+e,"i")):n&&l(/android/i)},a.isMobile=function(){return a.isIOS()||a.isAndroid()},a.saveCookie=function(e,t){i.cookie="jwplayer."+e+"="+t+"; path=/"},a.getCookies=function(){for(var e={},t=i.cookie.split("; "),n=0;n<t.length;n++){var r=t[n].split("=");0===r[0].indexOf("jwplayer.")&&(e[r[0].substring(9,r[0].length)]=r[1])}return e},a.typeOf=function(e){var t=typeof e;return"object"===t?e?e instanceof Array?"array":t:"null":t},a.translateEventResponse=function(t,n){var i=a.extend({},n);if(t!=e.events.JWPLAYER_FULLSCREEN||i.fullscreen)if("object"==typeof i.data){var r=i.data;delete i.data,i=a.extend(i,r)}else"object"==typeof i.metadata&&a.deepReplaceKeyName(i.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);else i.fullscreen="true"==i.message?!0:!1,delete i.message;return a.foreach(["position","duration","offset"],function(e,t){i[t]&&(i[t]=Math.round(1e3*i[t])/1e3)}),i},a.flashVersion=function(){if(a.isAndroid())return 0;var e,t=o.plugins;try{if("undefined"!==t&&(e=t["Shockwave Flash"]))return parseInt(e.description.replace(/\D+(\d+)\..*/,"$1"),10)}catch(n){}if("undefined"!=typeof r.ActiveXObject)try{if(e=new r.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(e.GetVariable("$version").split(" ")[1].split(",")[0],10)}catch(i){}return 0},a.getScriptPath=function(e){for(var t=i.getElementsByTagName("script"),n=0;n<t.length;n++){var r=t[n].src;if(r&&0<=r.indexOf(e))return r.substr(0,r.indexOf(e))}return""},a.deepReplaceKeyName=function(t,n,i){switch(e.utils.typeOf(t)){case"array":for(var r=0;r<t.length;r++)t[r]=e.utils.deepReplaceKeyName(t[r],n,i);break;case"object":a.foreach(t,function(r,o){var a;if(n instanceof Array&&i instanceof Array){if(n.length!=i.length)return;a=n}else a=[n];for(var s=r,l=0;l<a.length;l++)s=s.replace(RegExp(n[l],"g"),i[l]);t[s]=e.utils.deepReplaceKeyName(o,n,i),r!=s&&delete t[r]})}return t};var u=a.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};a.getPluginPathType=function(e){if("string"==typeof e){e=e.split("?")[0];var t=e.indexOf("://");if(t>0)return u.ABSOLUTE;var n=e.indexOf("/");return e=a.extension(e),!(0>t&&0>n)||e&&isNaN(e)?u.RELATIVE:u.CDN}},a.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},a.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},a.isYouTube=function(e){return/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)},a.youTubeID=function(e){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(e).slice(1).join("").replace("?","")}catch(t){return""}},a.isRtmp=function(e,t){return 0===e.indexOf("rtmp")||"rtmp"==t},a.foreach=function(e,t){var n,i;for(n in e)"function"==a.typeOf(e.hasOwnProperty)?e.hasOwnProperty(n)&&(i=e[n],t(n,i)):(i=e[n],t(n,i))},a.isHTTPS=function(){return 0===r.location.href.indexOf("https")},a.repo=function(){var t="http://p.jwpcdn.com/"+e.version.split(/\W/).splice(0,2).join("/")+"/";try{a.isHTTPS()&&(t=t.replace("http://","https://ssl."))}catch(n){}return t},a.ajax=function(e,t,i,o){var s;if(0<e.indexOf("#")&&(e=e.replace(/#.*$/,"")),e&&0<=e.indexOf("://")&&e.split("/")[2]!=r.location.href.split("/")[2]&&a.exists(r.XDomainRequest))s=new r.XDomainRequest,s.onload=n(s,e,t,i,o),s.ontimeout=s.onprogress=function(){},s.timeout=5e3;else{if(!a.exists(r.XMLHttpRequest))return i&&i(),s;var l=s=new r.XMLHttpRequest,u=e;s.onreadystatechange=function(){if(4===l.readyState)switch(l.status){case 200:n(l,u,t,i,o)();break;case 404:i("File not found")}}}return s.overrideMimeType&&s.overrideMimeType("text/xml"),s.onerror=function(){i("Error loading file")},setTimeout(function(){try{s.open("GET",e,!0),s.send()}catch(t){i&&i(e)}},0),s},a.parseXML=function(e){var t;try{if(r.DOMParser){if(t=(new r.DOMParser).parseFromString(e,"text/xml"),t.childNodes&&t.childNodes.length&&"parsererror"==t.childNodes[0].firstChild.nodeName)return}else t=new r.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)}catch(n){return}return t},a.filterPlaylist=function(e,t){var n,i,r,o,s=[];for(n=0;n<e.length;n++)if(i=a.extend({},e[n]),i.sources=a.filterSources(i.sources),0<i.sources.length){for(r=0;r<i.sources.length;r++)o=i.sources[r],o.label||(o.label=r.toString());s.push(i)}if(t&&0===s.length)for(n=0;n<e.length;n++)if(i=a.extend({},e[n]),i.sources=a.filterSources(i.sources,!0),0<i.sources.length){for(r=0;r<i.sources.length;r++)o=i.sources[r],o.label||(o.label=r.toString());s.push(i)}return s},a.filterSources=function(t,n){var i,r,o=a.extensionmap;if(t){r=[];for(var s=0;s<t.length;s++){var l=t[s].type,u=t[s].file;u&&(u=a.trim(u)),l||(l=o.extType(a.extension(u)),t[s].type=l),n?e.embed.flashCanPlay(u,l)&&(i||(i=l),l==i&&r.push(a.extend({},t[s]))):a.canPlayHTML5(l)&&(i||(i=l),l==i&&r.push(a.extend({},t[s])))}}return r},a.canPlayHTML5=function(t){return!a.isAndroid()||"hls"!=t&&"m3u"!=t&&"m3u8"!=t?(t=a.extensionmap.types[t],!!t&&!!e.vid.canPlayType&&e.vid.canPlayType(t)):!1},a.seconds=function(e){e=e.replace(",",".");var t=e.split(":"),n=0;return"s"==e.slice(-1)?n=parseFloat(e):"m"==e.slice(-1)?n=60*parseFloat(e):"h"==e.slice(-1)?n=3600*parseFloat(e):1<t.length?(n=parseFloat(t[t.length-1]),n+=60*parseFloat(t[t.length-2]),3==t.length&&(n+=3600*parseFloat(t[t.length-3]))):n=parseFloat(e),n},a.serialize=function(e){return null==e?null:"true"==e.toString().toLowerCase()?!0:"false"==e.toString().toLowerCase()?!1:isNaN(Number(e))||5<e.length||0===e.length?e:Number(e)}}(jwplayer),function(e){var t="video/",n=e.foreach,i={mp4:t+"mp4",vorbis:"audio/ogg",ogg:t+"ogg",webm:t+"webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"},r={mp4:i.mp4,f4v:i.mp4,m4v:i.mp4,mov:i.mp4,m4a:i.aac,f4a:i.aac,aac:i.aac,mp3:i.mp3,ogv:i.ogg,ogg:i.vorbis,oga:i.vorbis,webm:i.webm,m3u8:i.hls,hls:i.hls},t="video",t={flv:t,f4v:t,mov:t,m4a:t,m4v:t,mp4:t,aac:t,f4a:t,mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},o=e.extensionmap={};n(r,function(e,t){o[e]={html5:t}}),n(t,function(e,t){o[e]||(o[e]={}),o[e].flash=t}),o.types=i,o.mimeType=function(e){var t;return n(i,function(n,i){!t&&i==e&&(t=n)}),t},o.extType=function(e){return o.mimeType(r[e])}}(jwplayer.utils),function(e){var t=e.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},n=document;e.scriptloader=function(i){function r(){a=t.ERROR,l.sendEvent(s.ERROR)}function o(){a=t.COMPLETE,l.sendEvent(s.COMPLETE)}var a=t.NEW,s=jwplayer.events,l=new s.eventdispatcher;e.extend(this,l),this.load=function(){var l=e.scriptloader.loaders[i];if(!l||l.getStatus()!=t.NEW&&l.getStatus()!=t.LOADING){if(e.scriptloader.loaders[i]=this,a==t.NEW){a=t.LOADING;var u=n.createElement("script");u.addEventListener?(u.onload=o,u.onerror=r):u.readyState&&(u.onreadystatechange=function(){("loaded"==u.readyState||"complete"==u.readyState)&&o()}),n.getElementsByTagName("head")[0].appendChild(u),u.src=i}}else l.addEventListener(s.ERROR,r),l.addEventListener(s.COMPLETE,o)},this.getStatus=function(){return a}},e.scriptloader.loaders={}}(jwplayer.utils),function(e){e.trim=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},e.pad=function(e,t,n){for(n||(n="0");e.length<t;)e=n+e;return e},e.xmlAttribute=function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()==t.toLowerCase())return e.attributes[n].value.toString();return""},e.extension=function(e){return e&&"rtmp"!=e.substr(0,4)?(e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0],-1<e.lastIndexOf(".")?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0):""},e.stringToColor=function(e){return e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2"),3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)}}(jwplayer.utils),function(e){var t="touchmove",n="touchstart";e.touch=function(i){function r(e){e.type==n?(l=!0,c=a(h.DRAG_START,e)):e.type==t?l&&(d||(o(h.DRAG_START,e,c),d=!0),o(h.DRAG,e)):(l&&(d?o(h.DRAG_END,e):(e.cancelBubble=!0,o(h.TAP,e))),l=d=!1,c=null)}function o(e,t,n){u[e]&&(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),t=n?n:a(e,t))&&u[e](t)}function a(e,t){var n=null;if(t.touches&&t.touches.length?n=t.touches[0]:t.changedTouches&&t.changedTouches.length&&(n=t.changedTouches[0]),!n)return null;var i=s.getBoundingClientRect(),n={type:e,target:s,x:n.pageX-window.pageXOffset-i.left,y:n.pageY,deltaX:0,deltaY:0};return e!=h.TAP&&c&&(n.deltaX=n.x-c.x,n.deltaY=n.y-c.y),n}var s=i,l=!1,u={},c=null,d=!1,h=e.touchEvents;return document.addEventListener(t,r),document.addEventListener("touchend",function(e){l&&d&&o(h.DRAG_END,e),l=d=!1,c=null}),document.addEventListener("touchcancel",r),i.addEventListener(n,r),i.addEventListener("touchend",r),this.addEventListener=function(e,t){u[e]=t},this.removeEventListener=function(e){delete u[e]},this}}(jwplayer.utils),function(e){e.touchEvents={DRAG:"jwplayerDrag",DRAG_START:"jwplayerDragStart",DRAG_END:"jwplayerDragEnd",TAP:"jwplayerTap"}}(jwplayer.utils),function(e){e.key=function(t){var n,i,r;this.edition=function(){return r&&r.getTime()<(new Date).getTime()?"invalid":n},this.token=function(){return i},e.exists(t)||(t="");try{t=e.tea.decrypt(t,"36QXq4W@GSBV^teR");var o=t.split("/");(n=o[0])?/^(free|pro|premium|ads)$/i.test(n)?(i=o[1],o[2]&&0<parseInt(o[2])&&(r=new Date,r.setTime(String(o[2])))):n="invalid":n="free"}catch(a){n="invalid"}}}(jwplayer.utils),function(e){var t=e.tea={};t.encrypt=function(e,r){if(0==e.length)return"";var o=t.strToLongs(i.encode(e));1>=o.length&&(o[1]=0);for(var a,s=t.strToLongs(i.encode(r).slice(0,16)),l=o.length,u=o[l-1],c=o[0],d=Math.floor(6+52/l),h=0;0<d--;){h+=2654435769,a=h>>>2&3;for(var p=0;l>p;p++)c=o[(p+1)%l],u=(u>>>5^c<<2)+(c>>>3^u<<4)^(h^c)+(s[3&p^a]^u),u=o[p]+=u}return o=t.longsToStr(o),n.encode(o)},t.decrypt=function(e,r){if(0==e.length)return"";for(var o,a=t.strToLongs(n.decode(e)),s=t.strToLongs(i.encode(r).slice(0,16)),l=a.length,u=a[l-1],c=a[0],d=2654435769*Math.floor(6+52/l);0!=d;){o=d>>>2&3;for(var h=l-1;h>=0;h--)u=a[h>0?h-1:l-1],u=(u>>>5^c<<2)+(c>>>3^u<<4)^(d^c)+(s[3&h^o]^u),c=a[h]-=u;d-=2654435769}return a=t.longsToStr(a),a=a.replace(/\0+$/,""),i.decode(a)},t.strToLongs=function(e){for(var t=Array(Math.ceil(e.length/4)),n=0;n<t.length;n++)t[n]=e.charCodeAt(4*n)+(e.charCodeAt(4*n+1)<<8)+(e.charCodeAt(4*n+2)<<16)+(e.charCodeAt(4*n+3)<<24);return t},t.longsToStr=function(e){for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(255&e[n],e[n]>>>8&255,e[n]>>>16&255,e[n]>>>24&255);return t.join("")};var n={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e,t){var r,o,a,s,l,u,c=[],d="",h=n.code;if(u=("undefined"==typeof t?0:t)?i.encode(e):e,l=u.length%3,l>0)for(;3>l++;)d+="=",u+="\x00";for(l=0;l<u.length;l+=3)r=u.charCodeAt(l),o=u.charCodeAt(l+1),a=u.charCodeAt(l+2),s=r<<16|o<<8|a,r=s>>18&63,o=s>>12&63,a=s>>6&63,s&=63,c[l/3]=h.charAt(r)+h.charAt(o)+h.charAt(a)+h.charAt(s);return c=c.join(""),c=c.slice(0,c.length-d.length)+d},decode:function(e,t){t="undefined"==typeof t?!1:t;var r,o,a,s,l,u,c=[],d=n.code;u=t?i.decode(e):e;for(var h=0;h<u.length;h+=4)r=d.indexOf(u.charAt(h)),o=d.indexOf(u.charAt(h+1)),s=d.indexOf(u.charAt(h+2)),l=d.indexOf(u.charAt(h+3)),a=r<<18|o<<12|s<<6|l,r=a>>>16&255,o=a>>>8&255,a&=255,c[h/4]=String.fromCharCode(r,o,a),64==l&&(c[h/4]=String.fromCharCode(r,o)),64==s&&(c[h/4]=String.fromCharCode(r));return s=c.join(""),t?i.decode(s):s}},i={encode:function(e){return e=e.replace(/[\u0080-\u07ff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(192|e>>6,128|63&e)}),e=e.replace(/[\u0800-\uffff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e)})},decode:function(e){return e=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){return e=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2),String.fromCharCode(e)}),e=e.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){return e=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1),String.fromCharCode(e)})}}}(jwplayer.utils),function(e){e.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_SETUP_ERROR:"jwplayerSetupError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_CAPTIONS_LOADED:"jwplayerCaptionsLoaded",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_USER_ACTION:"jwplayerUserAction",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed",JWPLAYER_AD_TIME:"jwplayerAdTime",JWPLAYER_AD_ERROR:"jwplayerAdError",JWPLAYER_AD_CLICK:"jwplayerAdClicked",JWPLAYER_AD_COMPLETE:"jwplayerAdComplete",JWPLAYER_AD_IMPRESSION:"jwplayerAdImpression",JWPLAYER_AD_COMPANIONS:"jwplayerAdCompanions",JWPLAYER_AD_SKIPPED:"jwplayerAdSkipped"}}(jwplayer),function(e){var t=e.utils;e.events.eventdispatcher=function(n,i){function r(e,n,i){if(e)for(var r=0;r<e.length;r++){var o=e[r];if(o){null!==o.count&&0===--o.count&&delete e[r];try{o.listener(n)}catch(a){t.log('Error handling "'+i+'" event listener ['+r+"]: "+a.toString(),o.listener,n)}}}}var o,a;this.resetEventListeners=function(){o={},a=[]},this.resetEventListeners(),this.addEventListener=function(e,n,i){try{t.exists(o[e])||(o[e]=[]),"string"==t.typeOf(n)&&(n=new Function("return "+n)()),o[e].push({listener:n,count:i||null})}catch(r){t.log("error",r)}return!1},this.removeEventListener=function(e,n){if(o[e]){try{for(var i=0;i<o[e].length;i++)if(o[e][i].listener.toString()==n.toString()){o[e].splice(i,1);break}}catch(r){t.log("error",r)}return!1}},this.addGlobalListener=function(e,n){try{"string"==t.typeOf(e)&&(e=new Function("return "+e)()),a.push({listener:e,count:n||null})}catch(i){t.log("error",i)}return!1},this.removeGlobalListener=function(e){if(e){try{for(var n=a.length;n--;)a[n].listener.toString()==e.toString()&&a.splice(n,1)}catch(i){t.log("error",i)}return!1}},this.sendEvent=function(s,l){t.exists(l)||(l={}),t.extend(l,{id:n,version:e.version,type:s}),i&&t.log(s,l),r(o[s],l,s),r(a,l,s)}}}(window.jwplayer),function(e){var t={},n={};e.plugins=function(){},e.plugins.loadPlugins=function(i,r){return n[i]=new e.plugins.pluginloader(new e.plugins.model(t),r),n[i]},e.plugins.registerPlugin=function(n,i,r,o){var a=e.utils.getPluginName(n);t[a]||(t[a]=new e.plugins.plugin(n)),t[a].registerPlugin(n,i,r,o)}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(n){var i=e.utils.getPluginName(n);return t[i]||(t[i]=new e.plugins.plugin(n)),t[i]},this.getPlugins=function(){return t}}}(jwplayer),function(e){var t=jwplayer.utils,n=jwplayer.events;e.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2},e.plugin=function(i){function r(){switch(t.getPluginPathType(i)){case t.pluginPathType.ABSOLUTE:return i;case t.pluginPathType.RELATIVE:return t.getAbsolutePath(i,window.location.href)}}function o(){c=setTimeout(function(){d=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE)},1e3)}function a(){d=t.loaderstatus.ERROR,h.sendEvent(n.ERROR)}var s,l,u,c,d=t.loaderstatus.NEW,h=new n.eventdispatcher;t.extend(this,h),this.load=function(){if(d==t.loaderstatus.NEW)if(0<i.lastIndexOf(".swf"))s=i,d=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE);else if(t.getPluginPathType(i)==t.pluginPathType.CDN)d=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE);else{d=t.loaderstatus.LOADING;var e=new t.scriptloader(r());e.addEventListener(n.COMPLETE,o),e.addEventListener(n.ERROR,a),e.load()}},this.registerPlugin=function(e,i,r,o){c&&(clearTimeout(c),c=void 0),u=i,r&&o?(s=o,l=r):"string"==typeof r?s=r:"function"==typeof r?l=r:!r&&!o&&(s=e),d=t.loaderstatus.COMPLETE,h.sendEvent(n.COMPLETE)},this.getStatus=function(){return d},this.getPluginName=function(){return t.getPluginName(i)},this.getFlashPath=function(){if(s)switch(t.getPluginPathType(s)){case t.pluginPathType.ABSOLUTE:return s;case t.pluginPathType.RELATIVE:return 0<i.lastIndexOf(".swf")?t.getAbsolutePath(s,window.location.href):t.getAbsolutePath(s,r())}return null},this.getJS=function(){return l},this.getTarget=function(){return u},this.getPluginmode=function(){return"undefined"!=typeof s&&"undefined"!=typeof l?e.pluginmodes.HYBRID:"undefined"!=typeof s?e.pluginmodes.FLASH:"undefined"!=typeof l?e.pluginmodes.JAVASCRIPT:void 0},this.getNewInstance=function(e,t,n){return new l(e,t,n)},this.getURL=function(){return i}}}(jwplayer.plugins),function(e){var t=e.utils,n=e.events,i=t.foreach;e.plugins.pluginloader=function(r,o){function a(){d?p.sendEvent(n.ERROR,{message:l}):c||(c=!0,u=t.loaderstatus.COMPLETE,p.sendEvent(n.COMPLETE))}function s(){if(h||a(),!c&&!d){var n=0,i=r.getPlugins();t.foreach(h,function(r){r=t.getPluginName(r);var o=i[r];r=o.getJS();var s=o.getTarget(),o=o.getStatus();o==t.loaderstatus.LOADING||o==t.loaderstatus.NEW?n++:r&&(!s||parseFloat(s)>parseFloat(e.version))&&(d=!0,l="Incompatible player version",a())}),0==n&&a()}}var l,u=t.loaderstatus.NEW,c=!1,d=!1,h=o,p=new n.eventdispatcher;t.extend(this,p),this.setupPlugins=function(e,n,o){var a={length:0,plugins:{}},s=0,l={},u=r.getPlugins();return i(n.plugins,function(i,r){var c=t.getPluginName(i),d=u[c],h=d.getFlashPath(),p=d.getJS(),f=d.getURL();h&&(a.plugins[h]=t.extend({},r),a.plugins[h].pluginmode=d.getPluginmode(),a.length++);try{if(p&&n.plugins&&n.plugins[f]){var m=document.createElement("div");m.id=e.id+"_"+c,m.style.position="absolute",m.style.top=0,m.style.zIndex=s+10,l[c]=d.getNewInstance(e,t.extend({},n.plugins[f]),m),s++,e.onReady(o(l[c],m,!0)),e.onResize(o(l[c],m))}}catch(g){t.log("ERROR: Failed to load "+c+".")}}),e.plugins=l,a},this.load=function(){if(!t.exists(o)||"object"==t.typeOf(o)){u=t.loaderstatus.LOADING,i(o,function(e){t.exists(e)&&(e=r.addPlugin(e),e.addEventListener(n.COMPLETE,s),e.addEventListener(n.ERROR,f))});var e=r.getPlugins();i(e,function(e,t){t.load()})}s()};var f=this.pluginFailed=function(){d||(d=!0,l="File not found",a())};this.getStatus=function(){return u}}}(jwplayer),function(){jwplayer.parsers={localName:function(e){return e?e.localName?e.localName:e.baseName?e.baseName:"":""},textContent:function(e){return e?e.textContent?jwplayer.utils.trim(e.textContent):e.text?jwplayer.utils.trim(e.text):"":""},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}(jwplayer),function(e){var t=e.parsers;(t.jwparser=function(){}).parseEntry=function(n,i){for(var r=[],o=[],a=e.utils.xmlAttribute,s=0;s<n.childNodes.length;s++){var l=n.childNodes[s];if("jwplayer"==l.prefix){var u=t.localName(l);"source"==u?(delete i.sources,r.push({file:a(l,"file"),"default":a(l,"default"),label:a(l,"label"),type:a(l,"type")})):"track"==u?(delete i.tracks,o.push({file:a(l,"file"),"default":a(l,"default"),kind:a(l,"kind"),label:a(l,"label")})):(i[u]=e.utils.serialize(t.textContent(l)),"file"==u&&i.sources&&delete i.sources)}i.file||(i.file=i.link)}if(r.length)for(i.sources=[],s=0;s<r.length;s++)0<r[s].file.length&&(r[s]["default"]="true"==r[s]["default"]?!0:!1,r[s].label.length||delete r[s].label,i.sources.push(r[s]));if(o.length)for(i.tracks=[],s=0;s<o.length;s++)0<o[s].file.length&&(o[s]["default"]="true"==o[s]["default"]?!0:!1,o[s].kind=o[s].kind.length?o[s].kind:"captions",o[s].label.length||delete o[s].label,i.tracks.push(o[s]));return i}}(jwplayer),function(e){var t=jwplayer.utils,n=t.xmlAttribute,i=e.localName,r=e.textContent,o=e.numChildren,a=e.mediaparser=function(){};a.parseGroup=function(e,s){var l,u,c=[];for(u=0;u<o(e);u++)if(l=e.childNodes[u],"media"==l.prefix&&i(l))switch(i(l).toLowerCase()){case"content":n(l,"duration")&&(s.duration=t.seconds(n(l,"duration"))),0<o(l)&&(s=a.parseGroup(l,s)),n(l,"url")&&(s.sources||(s.sources=[]),s.sources.push({file:n(l,"url"),type:n(l,"type"),width:n(l,"width"),label:n(l,"label")}));break;case"title":s.title=r(l);break;case"description":s.description=r(l);break;case"guid":s.mediaid=r(l);break;case"thumbnail":s.image||(s.image=n(l,"url"));break;case"group":a.parseGroup(l,s);break;case"subtitle":var d={};if(d.file=n(l,"url"),d.kind="captions",0<n(l,"lang").length){var h=d;l=n(l,"lang");var p={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};l=p[l]?p[l]:l,h.label=l}c.push(d)}for(s.hasOwnProperty("tracks")||(s.tracks=[]),u=0;u<c.length;u++)s.tracks.push(c[u]);return s}}(jwplayer.parsers),function(e){function t(t){for(var r={},o=0;o<t.childNodes.length;o++){var s=t.childNodes[o],l=a(s);if(l)switch(l.toLowerCase()){case"enclosure":r.file=n.xmlAttribute(s,"url");break;case"title":r.title=i(s);break;case"guid":r.mediaid=i(s);break;case"pubdate":r.date=i(s);break;case"description":r.description=i(s);break;case"link":r.link=i(s);break;case"category":r.tags=r.tags?r.tags+i(s):i(s)}}return r=e.mediaparser.parseGroup(t,r),r=e.jwparser.parseEntry(t,r),new jwplayer.playlist.item(r)}var n=jwplayer.utils,i=e.textContent,r=e.getChildNode,o=e.numChildren,a=e.localName;e.rssparser={},e.rssparser.parse=function(e){for(var n=[],i=0;i<o(e);i++){var s=r(e,i);if("channel"==a(s).toLowerCase())for(var l=0;l<o(s);l++){var u=r(s,l);"item"==a(u).toLowerCase()&&n.push(t(u))}}return n}}(jwplayer.parsers),function(e){e.playlist=function(t){var n=[];if("array"==e.utils.typeOf(t))for(var i=0;i<t.length;i++)n.push(new e.playlist.item(t[i]));else n.push(new e.playlist.item(t));return n}}(jwplayer),function(e){var t=e.item=function(n){var i=jwplayer.utils,r=i.extend({},t.defaults,n);r.tracks=n&&i.exists(n.tracks)?n.tracks:[],0==r.sources.length&&(r.sources=[new e.source(r)]);for(var o=0;o<r.sources.length;o++){var a=r.sources[o]["default"];r.sources[o]["default"]=a?"true"==a.toString():!1,r.sources[o]=new e.source(r.sources[o])}if(r.captions&&!i.exists(n.tracks)){for(n=0;n<r.captions.length;n++)r.tracks.push(r.captions[n]);delete r.captions}for(o=0;o<r.tracks.length;o++)r.tracks[o]=new e.track(r.tracks[o]);return r};t.defaults={description:"",image:"",mediaid:"",title:"",sources:[],tracks:[]}}(jwplayer.playlist),function(e){var t=jwplayer,n=t.utils,i=t.events,r=t.parsers;e.loader=function(){function t(t){try{var n=t.responseXML.childNodes;t="";for(var o=0;o<n.length&&(t=n[o],!(8!=t.nodeType));o++);if("xml"==r.localName(t)&&(t=t.nextSibling),"rss"!=r.localName(t))a("Not a valid RSS feed");else{var l=new e(r.rssparser.parse(t));s.sendEvent(i.JWPLAYER_PLAYLIST_LOADED,{playlist:l})}}catch(u){a()}}function o(e){a(e.match(/invalid/i)?"Not a valid RSS feed":"")}function a(e){s.sendEvent(i.JWPLAYER_ERROR,{message:e?e:"Error loading file"})}var s=new i.eventdispatcher;n.extend(this,s),this.load=function(e){n.ajax(e,t,o)}}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,type:void 0,"default":void 0};e.source=function(e){var i=t.extend({},n);return t.foreach(n,function(n){t.exists(e[n])&&(i[n]=e[n],delete e[n])}),i.type&&0<i.type.indexOf("/")&&(i.type=t.extensionmap.mimeType(i.type)),"m3u8"==i.type&&(i.type="hls"),"smil"==i.type&&(i.type="rtmp"),i}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,kind:"captions","default":!1};e.track=function(e){var i=t.extend({},n);return e||(e={}),t.foreach(n,function(n){t.exists(e[n])&&(i[n]=e[n],delete e[n])}),i}}(jwplayer.playlist),function(e){function t(e,t,i){var r=e.style;r.backgroundColor="#000",r.color="#FFF",r.width=n.styleDimension(i.width),r.height=n.styleDimension(i.height),r.display="table",r.opacity=1,i=document.createElement("p"),r=i.style,r.verticalAlign="middle",r.textAlign="center",r.display="table-cell",r.font="15px/20px Arial, Helvetica, sans-serif",i.innerHTML=t.replace(":",":<br>"),e.innerHTML="",e.appendChild(i)}var n=e.utils,i=e.events,r=!0,o=!1,a=document,s=e.embed=function(l){function u(e,t){n.foreach(t,function(t,n){"function"==typeof e[t]&&e[t].call(e,n)})}function c(){if(!C)if("array"==n.typeOf(y.playlist)&&2>y.playlist.length&&(0==y.playlist.length||!y.playlist[0].sources||0==y.playlist[0].sources.length))p();else if(!k)if("string"==n.typeOf(y.playlist)){var t=new e.playlist.loader;t.addEventListener(i.JWPLAYER_PLAYLIST_LOADED,function(e){y.playlist=e.playlist,k=o,c()}),t.addEventListener(i.JWPLAYER_ERROR,function(e){k=o,p(e)}),k=r,t.load(y.playlist)}else if(_.getStatus()==n.loaderstatus.COMPLETE){for(t=0;t<y.modes.length;t++)if(y.modes[t].type&&s[y.modes[t].type]){var a=n.extend({},y),h=new s[y.modes[t].type](g,y.modes[t],a,_,l);if(h.supportsConfig())return h.addEventListener(i.ERROR,d),h.embed(),u(l,a.events),l}var m;y.fallback?(m="No suitable players found and fallback enabled",S=setTimeout(function(){f(m,r)},10),n.log(m),new s.download(g,y,p)):(m="No suitable players found and fallback disabled",f(m,o),n.log(m),g.parentNode.replaceChild(A,g))}}function d(e){m(E+e.message)}function h(e){m("Could not load plugins: "+e.message)}function p(e){m(e&&e.message?"Error loading playlist: "+e.message:E+"No playable sources found")}function f(e,t){S&&(clearTimeout(S),S=null),S=setTimeout(function(){S=null,l.dispatchEvent(i.JWPLAYER_SETUP_ERROR,{message:e,fallback:t})},0)}function m(e){C||(y.fallback?(C=r,t(g,e,y),f(e,r)):f(e,o))}var g,v,A,y=new s.config(l.config),b=y.width,w=y.height,E="Error loading player: ",_=e.plugins.loadPlugins(l.id,y.plugins),k=o,C=o,S=null;return y.fallbackDiv&&(A=y.fallbackDiv,delete y.fallbackDiv),y.id=l.id,v=a.getElementById(l.id),y.aspectratio?l.config.aspectratio=y.aspectratio:delete l.config.aspectratio,g=a.createElement("div"),g.id=v.id,g.style.width=0<b.toString().indexOf("%")?b:b+"px",g.style.height=0<w.toString().indexOf("%")?w:w+"px",v.parentNode.replaceChild(g,v),this.embed=function(){C||(_.addEventListener(i.COMPLETE,c),_.addEventListener(i.ERROR,h),_.load())},this.errorScreen=m,this};e.embed.errorScreen=t}(jwplayer),function(e){function t(e){if(e.playlist)for(var t=0;t<e.playlist.length;t++)e.playlist[t]=new r(e.playlist[t]);else{var o={};i.foreach(r.defaults,function(t){n(e,o,t)}),o.sources||(e.levels?(o.sources=e.levels,delete e.levels):(t={},n(e,t,"file"),n(e,t,"type"),o.sources=t.file?[t]:[])),e.playlist=[new r(o)]}}function n(e,t,n){i.exists(e[n])&&(t[n]=e[n],delete e[n])}var i=e.utils,r=e.playlist.item;(e.embed.config=function(n){var r={fallback:!0,height:270,primary:"html5",width:480,base:n.base?n.base:i.getScriptPath("jwplayer.js"),aspectratio:""};n=i.extend(r,e.defaults,n);var r={type:"html5",src:n.base+"//ass2.fetlife.com/assets/vendor_classic/jwplayer/jwplayer.html5-6.8.4616-c68d7d50328e2401ab51bebe9d2b7e4d96f4eca3356a3e3f1d1b9d7c6e729c81.js"},o={type:"flash",src:n.base+"//ass0.fetlife.com/assets/vendor_classic/jwplayer/jwplayer.flash-3922bc77a1a942cce57901187d7e239ee48f4570ce48248907309d93ebde23b3.swf"};if(n.modes="flash"==n.primary?[o,r]:[r,o],n.listbar&&(n.playlistsize=n.listbar.size,n.playlistposition=n.listbar.position,n.playlistlayout=n.listbar.layout),n.flashplayer&&(o.src=n.flashplayer),n.html5player&&(r.src=n.html5player),t(n),o=n.aspectratio,"string"==typeof o&&i.exists(o)){var a=o.indexOf(":");-1==a?r=0:(r=parseFloat(o.substr(0,a)),o=parseFloat(o.substr(a+1)),r=0>=r||0>=o?0:100*(o/r)+"%")}else r=0;return-1==n.width.toString().indexOf("%")?delete n.aspectratio:r?n.aspectratio=r:delete n.aspectratio,n}).addConfig=function(e,n){return t(n),i.extend(e,n)}}(jwplayer),function(e){var t=e.utils,n=document;e.embed.download=function(e,i,r){function o(e,i){for(var r=n.querySelectorAll(e),o=0;o<r.length;o++)t.foreach(i,function(e,t){r[o].style[e]=t})}function a(e,t,i){return e=n.createElement(e),t&&(e.className="jwdownload"+t),i&&i.appendChild(e),e}var s,l=t.extend({},i),u=l.width?l.width:480,c=l.height?l.height:320;i=i.logo?i.logo:{prefix:t.repo(),file:"logo.png",margin:10};var d,h,p,f,l=l.playlist,m=["mp4","aac","mp3"];if(l&&l.length){for(f=l[0],s=f.sources,l=0;l<s.length;l++){var g=s[l],v=g.type?g.type:t.extensionmap.extType(t.extension(g.file));g.file&&t.foreach(m,function(e){v==m[e]?(d=g.file,h=f.image):t.isYouTube(g.file)&&(p=g.file)})}d?(s=d,r=h,e&&(l=a("a","display",e),a("div","icon",l),a("div","logo",l),s&&l.setAttribute("href",t.getAbsolutePath(s))),l="#"+e.id+" .jwdownload",e.style.width="",e.style.height="",o(l+"display",{width:t.styleDimension(Math.max(320,u)),height:t.styleDimension(Math.max(180,c)),background:"black center no-repeat "+(r?"url("+r+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),o(l+"display div",{position:"absolute",width:"100%",height:"100%"}),o(l+"logo",{top:i.margin+"px",right:i.margin+"px",background:"top right no-repeat url("+i.prefix+i.file+")"}),o(l+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):p?(i=p,e=a("iframe","",e),e.src="http://www.youtube.com/embed/"+t.youTubeID(i),e.width=u,e.height=c,e.style.border="none"):r()}}}(jwplayer),function(e){var t=e.utils,n=e.events,i={};(e.embed.flash=function(o,a,s,l,u){function c(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function d(e,t,n){return function(){try{n&&document.getElementById(u.id+"_wrapper").appendChild(t);var i=document.getElementById(u.id).getPluginConfig("display");"function"==typeof e.resize&&e.resize(i.width,i.height),t.style.left=i.x,t.style.top=i.h}catch(r){}}}function h(e){if(!e)return{};var n={},i=[];return t.foreach(e,function(e,r){var o=t.getPluginName(e);i.push(e),t.foreach(r,function(e,t){n[o+"."+e]=t})}),n.plugins=i.join(","),n}var p=new e.events.eventdispatcher,f=t.flashVersion();t.extend(this,p),this.embed=function(){if(s.id=u.id,10>f)return p.sendEvent(n.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;
var e,r,m=u.config.listbar,g=t.extend({},s);if(o.id+"_wrapper"==o.parentNode.id)e=document.getElementById(o.id+"_wrapper");else{if(e=document.createElement("div"),r=document.createElement("div"),r.style.display="none",r.id=o.id+"_aspect",e.id=o.id+"_wrapper",e.style.position="relative",e.style.display="block",e.style.width=t.styleDimension(g.width),e.style.height=t.styleDimension(g.height),u.config.aspectratio){var v=parseFloat(u.config.aspectratio);r.style.display="block",r.style.marginTop=u.config.aspectratio,e.style.height="auto",e.style.display="inline-block",m&&("bottom"==m.position?r.style.paddingBottom=m.size+"px":"right"==m.position&&(r.style.marginBottom=-1*m.size*(v/100)+"px"))}o.parentNode.replaceChild(e,o),e.appendChild(o),e.appendChild(r)}for(e=l.setupPlugins(u,g,d),0<e.length?t.extend(g,h(e.plugins)):delete g.plugins,"undefined"!=typeof g["dock.position"]&&"false"==g["dock.position"].toString().toLowerCase()&&(g.dock=g["dock.position"],delete g["dock.position"]),e=g.wmode?g.wmode:g.height&&40>=g.height?"transparent":"opaque",r="height width modes events primary base fallback volume".split(" "),m=0;m<r.length;m++)delete g[r[m]];r=t.getCookies(),t.foreach(r,function(e,t){"undefined"==typeof g[e]&&(g[e]=t)}),r=window.location.href.split("/"),r.splice(r.length-1,1),r=r.join("/"),g.base=r+"/",i[o.id]=g,t.isIE()?(r='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" " width="100%" height="100%"id="'+o.id+'" name="'+o.id+'" tabindex=0"">',r+='<param name="movie" value="'+a.src+'">',r+='<param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always">',r+='<param name="seamlesstabbing" value="true">',r+='<param name="wmode" value="'+e+'">',r+='<param name="bgcolor" value="#000000">',r+="</object>",o.outerHTML=r,e=document.getElementById(o.id)):(r=document.createElement("object"),r.setAttribute("type","application/x-shockwave-flash"),r.setAttribute("data",a.src),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("bgcolor","#000000"),r.setAttribute("id",o.id),r.setAttribute("name",o.id),r.setAttribute("tabindex",0),c(r,"allowfullscreen","true"),c(r,"allowscriptaccess","always"),c(r,"seamlesstabbing","true"),c(r,"wmode",e),o.parentNode.replaceChild(r,o),e=r),u.config.aspectratio&&(e.style.position="absolute"),u.container=e,u.setPlayer(e,"flash")},this.supportsConfig=function(){if(f){if(!s)return!0;if("string"==t.typeOf(s.playlist))return!0;try{var e=s.playlist[0].sources;if("undefined"==typeof e)return!0;for(var n=0;n<e.length;n++)if(e[n].file&&r(e[n].file,e[n].type))return!0}catch(i){}}return!1}}).getVars=function(e){return i[e]};var r=e.embed.flashCanPlay=function(e,n){if(t.isYouTube(e)||t.isRtmp(e,n)||"hls"==n)return!0;var i=t.extensionmap[n?n:t.extension(e)];return i?!!i.flash:!1}}(jwplayer),function(e){var t=e.utils,n=t.extensionmap,i=e.events;e.embed.html5=function(r,o,a,s,l){function u(e,t,n){return function(){try{var i=document.querySelector("#"+r.id+" .jwmain");n&&i.appendChild(t),"function"==typeof e.resize&&(e.resize(i.clientWidth,i.clientHeight),setTimeout(function(){e.resize(i.clientWidth,i.clientHeight)},400)),t.left=i.style.left,t.top=i.style.top}catch(o){}}}function c(e){d.sendEvent(e.type,{message:"HTML5 player not found"})}var d=this,h=new i.eventdispatcher;t.extend(d,h),d.embed=function(){if(e.html5){s.setupPlugins(l,a,u),r.innerHTML="";var n=e.utils.extend({},a);delete n.volume,n=new e.html5.player(n),l.container=document.getElementById(l.id),l.setPlayer(n,"html5")}else n=new t.scriptloader(o.src),n.addEventListener(i.ERROR,c),n.addEventListener(i.COMPLETE,d.embed),n.load()},d.supportsConfig=function(){if(e.vid.canPlayType)try{if("string"==t.typeOf(a.playlist))return!0;for(var i=a.playlist[0].sources,r=0;r<i.length;r++){var o,s=i[r].file,l=i[r].type;if(null!==navigator.userAgent.match(/BlackBerry/i)||t.isAndroid()&&("m3u"==t.extension(s)||"m3u8"==t.extension(s))||t.isRtmp(s,l))o=!1;else{var u,c=n[l?l:t.extension(s)];if(!c||c.flash&&!c.html5)u=!1;else{var d=c.html5,h=e.vid;if(d)try{u=h.canPlayType(d)?!0:!1}catch(p){u=!1}else u=!0}o=u}if(o)return!0}}catch(f){}return!1}}}(jwplayer),function(e){var t=e.embed,n=e.utils,i=/\.(js|swf)$/;e.embed=n.extend(function(r){function o(){a="Adobe SiteCatalyst Error: Could not find Media Module"}var a,s=n.repo(),l=n.extend({},e.defaults),u=n.extend({},l,r.config),c=r.config,d=u.plugins,h=u.analytics,p=s+"jwpsrv.js",f=s+"sharing.js",m=s+"related.js",g=s+"gapro.js",l=e.key?e.key:l.key,v=new e.utils.key(l).edition(),d=d?d:{};switch("ads"==v&&u.advertising&&(i.test(u.advertising.client)?d[u.advertising.client]=u.advertising:d[s+u.advertising.client+".js"]=u.advertising),delete c.advertising,c.key=l,u.analytics&&i.test(u.analytics.client)&&(p=u.analytics.client),delete c.analytics,h&&"ads"!==v&&delete h.enabled,"free"!=v&&h&&!1===h.enabled||(d[p]=h?h:{}),delete d.sharing,delete d.related,v){case"ads":if(c.sitecatalyst)try{window.s&&window.s.hasOwnProperty("Media")?new e.embed.sitecatalyst(r):o()}catch(A){o()}case"premium":u.related&&(i.test(u.related.client)&&(m=u.related.client),d[m]=u.related),u.ga&&(i.test(u.ga.client)&&(g=u.ga.client),d[g]=u.ga);case"pro":u.sharing&&(i.test(u.sharing.client)&&(f=u.sharing.client),d[f]=u.sharing),u.skin&&(c.skin=u.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,n.repo()+"skins/$1.xml"))}return c.plugins=d,r.config=c,r=new t(r),a&&r.errorScreen(a),r},e.embed)}(jwplayer),function(e){var t=jwplayer.utils;e.sitecatalyst=function(e){function n(e){h.debug&&t.log(e)}function i(e){return e=e.split("/"),e=e[e.length-1],e=e.split("?"),e[0]}function r(){if(!f){f=!0;var e=d.getPosition();n("stop: "+a+" : "+e),s.Media.stop(a,e)}}function o(){m||(r(),m=!0,n("close: "+a),s.Media.close(a),c=!0,u=0)}var a,l,u,c,d=e,h=t.extend({},d.config.sitecatalyst),p={onPlay:function(){if(!c){var e=d.getPosition();f=!1,n("play: "+a+" : "+e),s.Media.play(a,e)}},onPause:r,onBuffer:r,onIdle:o,onPlaylistItem:function(e){try{c=!0,o(),u=0;var n;if(h.mediaName)n=h.mediaName;else{var r=d.getPlaylistItem(e.index);n=r.title?r.title:r.file?i(r.file):r.sources&&r.sources.length?i(r.sources[0].file):""}a=n,l=h.playerName?h.playerName:d.id}catch(s){t.log(s)}},onTime:function(){if(c){var e=d.getDuration();if(-1==e)return;m=f=c=!1,n("open: "+a+" : "+e+" : "+l),s.Media.open(a,e,l),n("play: "+a+" : 0"),s.Media.play(a,0)}if(e=d.getPosition(),3<=Math.abs(e-u)){var t=u;n("seek: "+t+" to "+e),n("stop: "+a+" : "+t),s.Media.stop(a,t),n("play: "+a+" : "+e),s.Media.play(a,e)}u=e},onComplete:o},f=!0,m=!0;t.foreach(p,function(e){d[e](p[e])})}}(jwplayer.embed),function(e,t){var n=[],i=e.utils,r=e.events,o=r.state,a=document,s=e.api=function(n){function l(e,t){return function(n){return t(e,n)}}function u(e,t){return v[e]||(v[e]=[],d(r.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate;if(t=t.oldstate,n==e){var i=v[n];if(i)for(var r=0;r<i.length;r++){var o=i[r];"function"==typeof o&&o.call(this,{oldstate:t,newstate:n})}}})),v[e].push(t),m}function c(e,t){try{e.jwAddEventListener(t,'function(dat) { jwplayer("'+m.id+'").dispatchEvent("'+t+'", dat); }')}catch(n){i.log("Could not add internal listener")}}function d(e,t){return g[e]||(g[e]=[],p&&A&&c(p,e)),g[e].push(t),m}function h(){if(A){if(p){var e=Array.prototype.slice.call(arguments,0),t=e.shift();if("function"==typeof p[t]){switch(e.length){case 6:return p[t](e[0],e[1],e[2],e[3],e[4],e[5]);case 5:return p[t](e[0],e[1],e[2],e[3],e[4]);case 4:return p[t](e[0],e[1],e[2],e[3]);case 3:return p[t](e[0],e[1],e[2]);case 2:return p[t](e[0],e[1]);case 1:return p[t](e[0])}return p[t]()}}return null}y.push(arguments)}var p,f,m=this,g={},v={},A=!1,y=[],b={},w={};m.container=n,m.id=n.id,m.getBuffer=function(){return h("jwGetBuffer")},m.getContainer=function(){return m.container},m.addButton=function(e,t,n,r){try{w[r]=n,h("jwDockAddButton",e,t,"jwplayer('"+m.id+"').callback('"+r+"')",r)}catch(o){i.log("Could not add dock button"+o.message)}},m.removeButton=function(e){h("jwDockRemoveButton",e)},m.callback=function(e){w[e]&&w[e]()},m.forceState=function(e){return h("jwForceState",e),m},m.releaseState=function(){return h("jwReleaseState")},m.getDuration=function(){return h("jwGetDuration")},m.getFullscreen=function(){return h("jwGetFullscreen")},m.getHeight=function(){return h("jwGetHeight")},m.getLockState=function(){return h("jwGetLockState")},m.getMeta=function(){return m.getItemMeta()},m.getMute=function(){return h("jwGetMute")},m.getPlaylist=function(){var e=h("jwGetPlaylist");return"flash"==m.renderingMode&&i.deepReplaceKeyName(e,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),e},m.getPlaylistItem=function(e){return i.exists(e)||(e=m.getPlaylistIndex()),m.getPlaylist()[e]},m.getPlaylistIndex=function(){return h("jwGetPlaylistIndex")},m.getPosition=function(){return h("jwGetPosition")},m.getRenderingMode=function(){return m.renderingMode},m.getState=function(){return h("jwGetState")},m.getVolume=function(){return h("jwGetVolume")},m.getWidth=function(){return h("jwGetWidth")},m.setFullscreen=function(e){return i.exists(e)?h("jwSetFullscreen",e):h("jwSetFullscreen",!h("jwGetFullscreen")),m},m.setMute=function(e){return i.exists(e)?h("jwSetMute",e):h("jwSetMute",!h("jwGetMute")),m},m.lock=function(){return m},m.unlock=function(){return m},m.load=function(e){return h("jwLoad",e),m},m.playlistItem=function(e){return h("jwPlaylistItem",parseInt(e,10)),m},m.playlistPrev=function(){return h("jwPlaylistPrev"),m},m.playlistNext=function(){return h("jwPlaylistNext"),m},m.resize=function(e,t){if("flash"!==m.renderingMode)h("jwResize",e,t);else{var n=a.getElementById(m.id+"_wrapper"),r=a.getElementById(m.id+"_aspect");r&&(r.style.display="none"),n&&(n.style.display="block",n.style.width=i.styleDimension(e),n.style.height=i.styleDimension(t))}return m},m.play=function(e){return e===t?(e=m.getState(),h(e==o.PLAYING||e==o.BUFFERING?"jwPause":"jwPlay")):h("jwPlay",e),m},m.pause=function(e){return e===t?(e=m.getState(),h(e==o.PLAYING||e==o.BUFFERING?"jwPause":"jwPlay")):h("jwPause",e),m},m.stop=function(){return h("jwStop"),m},m.seek=function(e){return h("jwSeek",e),m},m.setVolume=function(e){return h("jwSetVolume",e),m},m.createInstream=function(){return new s.instream(this,p)},m.setInstream=function(e){return f=e},m.loadInstream=function(e,t){return f=m.setInstream(m.createInstream()).init(t),f.loadItem(e),f},m.getQualityLevels=function(){return h("jwGetQualityLevels")},m.getCurrentQuality=function(){return h("jwGetCurrentQuality")},m.setCurrentQuality=function(e){h("jwSetCurrentQuality",e)},m.getCaptionsList=function(){return h("jwGetCaptionsList")},m.getCurrentCaptions=function(){return h("jwGetCurrentCaptions")},m.setCurrentCaptions=function(e){h("jwSetCurrentCaptions",e)},m.getControls=function(){return h("jwGetControls")},m.getSafeRegion=function(){return h("jwGetSafeRegion")},m.setControls=function(e){h("jwSetControls",e)},m.destroyPlayer=function(){h("jwPlayerDestroy")},m.playAd=function(t){var n=e(m.id).plugins;n.vast&&n.vast.jwPlayAd(t)},m.pauseAd=function(){var t=e(m.id).plugins;t.vast?t.vast.jwPauseAd():h("jwPauseAd")};var E={onBufferChange:r.JWPLAYER_MEDIA_BUFFER,onBufferFull:r.JWPLAYER_MEDIA_BUFFER_FULL,onError:r.JWPLAYER_ERROR,onSetupError:r.JWPLAYER_SETUP_ERROR,onFullscreen:r.JWPLAYER_FULLSCREEN,onMeta:r.JWPLAYER_MEDIA_META,onMute:r.JWPLAYER_MEDIA_MUTE,onPlaylist:r.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:r.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:r.JWPLAYER_PLAYLIST_COMPLETE,onReady:r.API_READY,onResize:r.JWPLAYER_RESIZE,onComplete:r.JWPLAYER_MEDIA_COMPLETE,onSeek:r.JWPLAYER_MEDIA_SEEK,onTime:r.JWPLAYER_MEDIA_TIME,onVolume:r.JWPLAYER_MEDIA_VOLUME,onBeforePlay:r.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:r.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:r.JWPLAYER_DISPLAY_CLICK,onControls:r.JWPLAYER_CONTROLS,onQualityLevels:r.JWPLAYER_MEDIA_LEVELS,onQualityChange:r.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:r.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:r.JWPLAYER_CAPTIONS_CHANGED,onAdError:r.JWPLAYER_AD_ERROR,onAdClick:r.JWPLAYER_AD_CLICK,onAdImpression:r.JWPLAYER_AD_IMPRESSION,onAdTime:r.JWPLAYER_AD_TIME,onAdComplete:r.JWPLAYER_AD_COMPLETE,onAdCompanions:r.JWPLAYER_AD_COMPANIONS,onAdSkipped:r.JWPLAYER_AD_SKIPPED};i.foreach(E,function(e){m[e]=l(E[e],d)});var _={onBuffer:o.BUFFERING,onPause:o.PAUSED,onPlay:o.PLAYING,onIdle:o.IDLE};return i.foreach(_,function(e){m[e]=l(_[e],u)}),m.remove=function(){if(!A)throw"Cannot call remove() before player is ready";y=[],s.destroyPlayer(this.id)},m.setup=function(t){if(e.embed){var n=a.getElementById(m.id);return n&&(t.fallbackDiv=n),n=m,y=[],s.destroyPlayer(n.id),n=e(m.id),n.config=t,new e.embed(n).embed(),n}return m},m.registerPlugin=function(t,n,i,r){e.plugins.registerPlugin(t,n,i,r)},m.setPlayer=function(e,t){p=e,m.renderingMode=t},m.detachMedia=function(){return"html5"==m.renderingMode?h("jwDetachMedia"):void 0},m.attachMedia=function(e){return"html5"==m.renderingMode?h("jwAttachMedia",e):void 0},m.removeEventListener=function(e,t){var n=g[e];if(n)for(var i=n.length;i--;)n[i]===t&&n.splice(i,1)},m.dispatchEvent=function(e,t){var n=g[e];if(n)for(var n=n.slice(0),o=i.translateEventResponse(e,t),a=0;a<n.length;a++){var s=n[a];if("function"==typeof s)try{e===r.JWPLAYER_PLAYLIST_LOADED&&i.deepReplaceKeyName(o.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),s.call(this,o)}catch(l){i.log("There was an error calling back an event handler")}}},m.dispatchInstreamEvent=function(e){f&&f.dispatchEvent(e,arguments)},m.callInternal=h,m.playerReady=function(e){for(A=!0,p||m.setPlayer(a.getElementById(e.id)),m.container=a.getElementById(m.id),i.foreach(g,function(e){c(p,e)}),d(r.JWPLAYER_PLAYLIST_ITEM,function(){b={}}),d(r.JWPLAYER_MEDIA_META,function(e){i.extend(b,e.metadata)}),m.dispatchEvent(r.API_READY);0<y.length;)h.apply(this,y.shift())},m.getItemMeta=function(){return b},m.isBeforePlay=function(){return h("jwIsBeforePlay")},m.isBeforeComplete=function(){return h("jwIsBeforeComplete")},m};s.selectPlayer=function(e){var t;return i.exists(e)||(e=0),e.nodeType?t=e:"string"==typeof e&&(t=a.getElementById(e)),t?(e=s.playerById(t.id))?e:s.addPlayer(new s(t)):"number"==typeof e?n[e]:null},s.playerById=function(e){for(var t=0;t<n.length;t++)if(n[t].id==e)return n[t];return null},s.addPlayer=function(e){for(var t=0;t<n.length;t++)if(n[t]==e)return e;return n.push(e),e},s.destroyPlayer=function(e){for(var t,r=-1,o=0;o<n.length;o++)n[o].id==e&&(r=o,t=n[o]);return r>=0&&(e=t.id,o=a.getElementById(e+("flash"==t.renderingMode?"_wrapper":"")),i.clearCss&&i.clearCss("#"+e),o&&("html5"==t.renderingMode&&t.destroyPlayer(),t=a.createElement("div"),t.id=e,o.parentNode.replaceChild(t,o)),n.splice(r,1)),null},e.playerReady=function(t){var n=e.api.playerById(t.id);n?n.playerReady(t):e.api.selectPlayer(t.id).playerReady(t)}}(window.jwplayer),function(e){var t=e.events,n=e.utils,i=t.state;e.api.instream=function(e,r){function o(t,n){return u[t]||(u[t]=[],r.jwInstreamAddEventListener(t,'function(dat) { jwplayer("'+e.id+'").dispatchInstreamEvent("'+t+'", dat); }')),u[t].push(n),this}function a(e,n){return c[e]||(c[e]=[],o(t.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate,i=t.oldstate;if(n==e){var r=c[n];if(r)for(var o=0;o<r.length;o++){var a=r[o];"function"==typeof a&&a.call(this,{oldstate:i,newstate:n,type:t.type})}}})),c[e].push(n),this}var s,l,u={},c={},d=this;d.type="instream",d.init=function(){return e.callInternal("jwInitInstream"),d},d.loadItem=function(t,i){s=t,l=i||{},"array"==n.typeOf(t)?e.callInternal("jwLoadArrayInstream",s,l):e.callInternal("jwLoadItemInstream",s,l)},d.removeEvents=function(){u=c={}},d.removeEventListener=function(e,t){var n=u[e];if(n)for(var i=n.length;i--;)n[i]===t&&n.splice(i,1)},d.dispatchEvent=function(e,t){var i=u[e];if(i)for(var i=i.slice(0),r=n.translateEventResponse(e,t[1]),o=0;o<i.length;o++){var a=i[o];"function"==typeof a&&a.call(this,r)}},d.onError=function(e){return o(t.JWPLAYER_ERROR,e)},d.onMediaError=function(e){return o(t.JWPLAYER_MEDIA_ERROR,e)},d.onFullscreen=function(e){return o(t.JWPLAYER_FULLSCREEN,e)},d.onMeta=function(e){return o(t.JWPLAYER_MEDIA_META,e)},d.onMute=function(e){return o(t.JWPLAYER_MEDIA_MUTE,e)},d.onComplete=function(e){return o(t.JWPLAYER_MEDIA_COMPLETE,e)},d.onPlaylistComplete=function(e){return o(t.JWPLAYER_PLAYLIST_COMPLETE,e)},d.onPlaylistItem=function(e){return o(t.JWPLAYER_PLAYLIST_ITEM,e)},d.onTime=function(e){return o(t.JWPLAYER_MEDIA_TIME,e)},d.onBuffer=function(e){return a(i.BUFFERING,e)},d.onPause=function(e){return a(i.PAUSED,e)},d.onPlay=function(e){return a(i.PLAYING,e)},d.onIdle=function(e){return a(i.IDLE,e)},d.onClick=function(e){return o(t.JWPLAYER_INSTREAM_CLICK,e)},d.onInstreamDestroyed=function(e){return o(t.JWPLAYER_INSTREAM_DESTROYED,e)},d.onAdSkipped=function(e){return o(t.JWPLAYER_AD_SKIPPED,e)},d.play=function(e){r.jwInstreamPlay(e)},d.pause=function(e){r.jwInstreamPause(e)},d.hide=function(){e.callInternal("jwInstreamHide")},d.destroy=function(){d.removeEvents(),e.callInternal("jwInstreamDestroy")},d.setText=function(e){r.jwInstreamSetText(e?e:"")},d.getState=function(){return r.jwInstreamState()},d.setClick=function(e){r.jwInstreamClick&&r.jwInstreamClick(e)}}}(window.jwplayer),function(e){var t=e.api,n=t.selectPlayer;t.selectPlayer=function(t){return(t=n(t))?t:{registerPlugin:function(t,n,i){e.plugins.registerPlugin(t,n,i)}}}}(jwplayer)),/*Copyright (c) 2014, TT Labs, Inc.
All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

   Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.

   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

   Neither the name of the TT Labs, Inc. nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.*/
function(){var e=function(e){function t(e){var t=g.length;return g.push(new o(a({progress:function(){},complete:function(){},cancelled:function(){},info:function(){},warn:function(){},error:function(){}},e,{id:t,status:s,priority:0,onStatusChange:n,loadedBytes:0,sizeBytes:e.file.size}))),t}function n(){A.d("onFileUploadStatusChange"),r()}function i(){setTimeout(r,1)}function r(){A.d("processQueue   length: "+g.length);var e=-1,t=-1,n=!0;g.forEach(function(i,r){i.priority>t&&i.status==s&&(e=r,t=i.priority),i.status==l&&(n=!1)}),n&&e>=0&&g[e].start()}function o(e){function t(e){(e==u||e==d||e==c)&&(clearInterval(S),clearInterval(x)),j.status=e,j.onStatusChange()}function n(){A.d("cancelAllRequests()"),R.forEach(function(e){e.abort()})}function i(){var e={method:"POST",path:C()+"?uploads",step:"initiate",x_amz_headers:j.xAmzHeadersAtInitiate,not_signed_headers:j.notSignedHeadersAtInitiate};j.contentType&&(e.contentType=j.contentType),e.onErr=function(){A.d("onInitiateError for FileUpload "+j.id),t(d)},e.on200=function(t){var n=t.response.match(/<UploadId\>(.+)<\/UploadId\>/);n&&n[1]?(j.uploadId=n[1],A.d("requester success. got uploadId "+j.uploadId),g(),y()):e.onErr()},E(e),_(e)}function r(e){var n,i,r,o;o=T[e],o.status=l,L++,o.loadedBytesPrevious=null,n=0===o.attempts++?0:1e3*Math.min(v.maxRetryBackoffSecs,Math.pow(v.retryBackoffPower,o.attempts-2)),A.d("uploadPart #"+e+"     will wait "+n+"ms to try"),r={method:"PUT",path:C()+"?partNumber="+e+"&uploadId="+j.uploadId,step:"upload #"+e,x_amz_headers:j.xAmzHeadersAtUpload,attempts:o.attempts},r.onErr=function(n,r){var a="problem uploading part #"+e+",   http status: "+n.status+",   hasErrored: "+!!i+",   part status: "+o.status+",   readyState: "+n.readyState+(r?",   isOnError":"");if(A.w(a),j.warn(a),!i){if(i=!0,404==n.status){var s="404 error resulted in abortion of both this part and the entire file.";A.w(s+" Server response: "+n.response),j.error(s),o.status=h,t(h)}else o.status=d,o.loadedBytes=0,y();n.abort()}},r.on200=function(t){var n,i=t.getResponseHeader("ETag");A.d("uploadPart 200 response for part #"+e+"     ETag: "+i),o.isEmpty||i!=f?(o.eTag=i,o.status=u):(o.status=d,o.loadedBytes=0,n="eTag matches MD5 of 0 length blob for part #"+e+"   Retrying part.",A.w(n),j.warn(n)),y()},r.onProgress=function(e){o.loadedBytes=e.loaded};var a=j.file.slice?"slice":j.file.mozSlice?"mozSlice":"webkitSlice";r.toSend=function(){var t=j.file[a](o.start,o.end);return A.d("sending part # "+e+" (bytes "+o.start+" -> "+o.end+")  reported length: "+t.size),o.isEmpty||0!==t.size||A.w("  *** WARN: blob reporting size of 0 bytes. Will try upload anyway.."),t},r.onFailedAuth=function(){var t="onFailedAuth for uploadPart #"+e+".   Will set status to ERROR";A.w(t),j.warn(t),o.status=d,o.loadedBytes=0,y()},E(r),setTimeout(function(){_(r),A.d("upload #",e,r)},n),o.uploader=r}function o(e){var t=T[e];t.uploader.awsXhr&&t.uploader.awsXhr.abort(),t.uploader.authXhr&&t.uploader.authXhr.abort()}function m(){A.d("completeUpload"),j.info("will attempt to complete upload");var e="<CompleteMultipartUpload>";T.forEach(function(t,n){t&&(e+="<Part><PartNumber>"+n+"</PartNumber><ETag>"+t.eTag+"</ETag></Part>")}),e+="</CompleteMultipartUpload>";var n={method:"POST",contentType:"application/xml; charset=UTF-8",path:C()+"?uploadId="+j.uploadId,x_amz_headers:j.xAmzHeadersAtComplete,step:"complete"};n.onErr=function(){var e="Error completing upload.";A.w(e),j.error(e),t(d)},n.on200=function(e){j.complete(e),t(u)},n.toSend=function(){return e},E(n),_(n)}function g(){for(var e=Math.ceil(j.file.size/v.partSize)||1,t=1;e>=t;t++)T[t]={status:s,start:(t-1)*v.partSize,end:t*v.partSize,attempts:0,loadedBytes:0,loadedBytesPrevious:null,isEmpty:0===j.file.size}}function y(){var e,t=0,n=!0,i=!1,o=[],a=[];return j.status!=l?void j.info("will not process parts list, as not currently evaporating"):(T.forEach(function(e,u){var c=!1;if(o.push(e.status),e){switch(e.status){case l:n=!1,t++,a.push(e.loadedBytes);break;case d:i=!0,c=!0;break;case s:c=!0}c&&(n=!1,t<v.maxConcurrentParts&&(r(u),t++))}}),e=o.toString()+" // bytesLoaded: "+a.toString(),A.d("processPartsList()  anyPartHasErrored: "+i,e),(L>=T.length-1||i)&&j.info("part stati: "+e),void(n&&m()))}function b(){S=setInterval(function(){var e=0;T.forEach(function(t){e+=t.loadedBytes}),j.progress(e/j.sizeBytes)},v.progressIntervalMS)}function w(){x=setInterval(function(){A.d("monitorPartsProgress() "+Date()),T.forEach(function(e,t){var n;return e.status!=l?void A.d(t,"not evaporating "):null===e.loadedBytesPrevious?(A.d(t,"no previous "),void(e.loadedBytesPrevious=e.loadedBytes)):(n=e.loadedBytesPrevious<e.loadedBytes,v.simulateStalling&&4==t&&Math.random()<.25&&(n=!1),A.d(t,n?"moving. ":"stalled.",e.loadedBytesPrevious,e.loadedBytes),n||setTimeout(function(){j.info("part #"+t+" stalled. will abort. "+e.loadedBytesPrevious+" "+e.loadedBytes),o(t)},0),void(e.loadedBytesPrevious=e.loadedBytes))})},12e4)}function E(e){if(A.d("setupRequest()",e),v.timeUrl){var t=new XMLHttpRequest;t.open("GET",v.timeUrl+"?requestTime="+(new Date).getTime(),!1),t.send(),e.dateString=t.responseText}else e.dateString=(new Date).toUTCString();e.x_amz_headers=a(e.x_amz_headers,{"x-amz-date":e.dateString}),e.onGotAuth=function(){var t=new XMLHttpRequest;R.push(t),e.awsXhr=t;var n=e.toSend?e.toSend():null,i=p+e.path,r={};a(r,e.not_signed_headers),a(r,e.x_amz_headers),v.simulateErrors&&1==e.attempts&&"upload #3"==e.step&&(A.d("simulating error by POST part #3 to invalid url"),i="https:///foo"),t.open(e.method,i),t.setRequestHeader("Authorization","AWS "+v.aws_key+":"+e.auth);for(var o in r)r.hasOwnProperty(o)&&t.setRequestHeader(o,r[o]);e.contentType&&t.setRequestHeader("Content-Type",e.contentType),t.onreadystatechange=function(){4==t.readyState&&(n&&A.d("  ### "+n.size),200==t.status?e.on200(t):e.onErr(t))},t.onerror=function(){e.onErr(t,!0)},"function"==typeof e.onProgress&&(t.upload.onprogress=function(t){e.onProgress(t)}),t.send(n)},e.onFailedAuth=e.onFailedAuth||function(t){j.error("Error onFailedAuth for step: "+e.step),e.onErr(t)}}function _(e){A.d("authorizedSend() "+e.step);var t=new XMLHttpRequest;R.push(t),e.authXhr=t;var n,i=v.signerUrl+"?to_sign="+k(e);for(var r in j.signParams)j.signParams.hasOwnProperty(r)&&(i+=j.signParams[r]instanceof Function?"&"+encodeURIComponent(r)+"="+encodeURIComponent(j.signParams[r]()):"&"+encodeURIComponent(r)+"="+encodeURIComponent(j.signParams[r]));t.onreadystatechange=function(){4==t.readyState&&(200==t.status&&28==t.response.length?(A.d("authorizedSend got signature for step: '"+e.step+"'    sig: "+t.response),e.auth=t.response,e.onGotAuth()):(n="failed to get authorization (readyState=4) for "+e.step+".  xhr.status: "+t.status+".  xhr.response: "+t.response,A.w(n),j.warn(n),e.onFailedAuth(t)))},t.onerror=function(){n="failed to get authorization (onerror) for "+e.step+".  xhr.status: "+t.status+".  xhr.response: "+t.response,A.w(n),j.warn(n),e.onFailedAuth(t)},t.open("GET",i);for(var o in j.signHeaders)j.signHeaders.hasOwnProperty(o)&&(j.signHeaders[o]instanceof Function?t.setRequestHeader(o,j.signHeaders[o]()):t.setRequestHeader(o,j.signHeaders[o]));j.beforeSigner instanceof Function&&j.beforeSigner(t),t.send()}function k(e){var t,n="",i=[];for(var r in e.x_amz_headers)e.x_amz_headers.hasOwnProperty(r)&&i.push(r);return i.sort(),i.forEach(function(t){n+=t+":"+e.x_amz_headers[t]+"\n"}),t=e.method+"\n\n"+(e.contentType||"")+"\n\n"+n+(v.cloudfront?"/"+v.bucket:"")+e.path,encodeURIComponent(t)}function C(){var e="/"+v.bucket+"/"+j.name;return(v.cloudfront||p.indexOf("cloudfront")>-1)&&(e="/"+j.name),e}var S,x,j=this,T=[],L=0,R=[];a(j,e),j.start=function(){A.d("starting FileUpload "+j.id),t(l),i(),b(),w()},j.stop=function(){A.d("stopping FileUpload ",j.id),j.cancelled(),j.info("upload canceled"),t(c),n()}}function a(e,t,n){if("undefined"==typeof e&&(e={}),"object"==typeof n)for(var i in n)t[i]=n[i];for(var r in t)e[r]=t[r];return e}if(this.supported=!("undefined"==typeof File||"undefined"==typeof Blob||!(Blob.prototype.webkitSlice||Blob.prototype.mozSlice||Blob.prototype.slice)||e.testUnsupported),this.supported){var s=0,l=2,u=3,c=5,d=10,h=20,p=e.aws_url||"https://s3.amazonaws.com",f='"d41d8cd98f00b204e9800998ecf8427e"',m=this,g=[],v=a({logging:!0,maxConcurrentParts:5,partSize:6291456,retryBackoffPower:2,maxRetryBackoffSecs:300,progressIntervalMS:500,cloudfront:!1,encodeFilename:!0},e);m.add=function(e){A.d("add");var n;if("undefined"==typeof e)return"Missing file";if("undefined"==typeof e.name?n="Missing attribute: name  ":v.encodeFilename&&(e.name=encodeURIComponent(e.name)),n)return n;var r=t(e);return i(),r},m.cancel=function(e){return A.d("cancel ",e),g[e]?(g[e].stop(),!0):!1},m.pause=function(){},m.resume=function(){},m.forceRetry=function(){};var A={d:function(){},w:function(){},e:function(){}};v.logging&&console&&console.log&&(A=console,A.d=A.log,A.w=console.warn?A.warn:A.log,A.e=console.error?A.error:A.log)}};"undefined"!=typeof module&&module.exports?module.exports=e:"undefined"!=typeof window&&(window.Evaporate=e)}(),function(e,t){function n(t,n){var r,o,a,s=t.nodeName.toLowerCase();return"area"===s?(r=t.parentNode,o=r.name,t.href&&o&&"map"===r.nodeName.toLowerCase()?(a=e("img[usemap=#"+o+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(o,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?s["inner"+i].call(this):this.each(function(){e(this).css(a,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){e(this).css(a,r(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,i,r,o,a){return e.ui.isOverAxis(t,i,o)&&e.ui.isOverAxis(n,r,a)}}))}(jQuery),/*!
 * jQuery UI Widget 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(t,n,i){var r,o,a,s,l=t.split(".")[0];t=t.split(".")[1],r=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,r){e.isFunction(r)&&(i[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=o,t}}())}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix:t},i,{constructor:a,namespace:l,widgetName:t,widgetBaseClass:r,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(n){for(var r,o,a=i.call(arguments,1),s=0,l=a.length;l>s;s++)for(r in a[s])o=a[s][r],a[s].hasOwnProperty(r)&&o!==t&&(n[r]=e.isPlainObject(o)?e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(a){var s="string"==typeof a,l=i.call(arguments,1),u=this;return a=!s&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,this.each(s?function(){var i,r=e.data(this,o);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,l),i!==r&&i!==t?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}:function(){var t=e.data(this,o);t?t.option(a||{})._init():e.data(this,o,new r(a,this))}),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetName,this),e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,a,s=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(s={},r=n.split("."),n=r.shift(),r.length){for(o=s[n]=e.widget.extend({},this.options[n]),a=0;a<r.length-1;a++)o[r[a]]=o[r[a]]||{},o=o[r[a]];if(n=r.pop(),i===t)return o[n]===t?null:o[n];o[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?r.delegate(c,u,s):n.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&(e.effects.effect[s]||e.uiBackCompat!==!1&&e.effects[s])?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),/*!
 * jQuery UI Position 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
function(e,t){function n(e,t,n){return[parseInt(e[0],10)*(h.test(e[0])?t/100:1),parseInt(e[1],10)*(h.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var r,o=Math.max,a=Math.abs,s=Math.round,l=/left|center|right/,u=/top|center|bottom/,c=/[\+\-]\d+%?/,d=/^\w+/,h=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(r!==t)return r;var n,i,o=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=o.children()[0];return e("body").append(o),n=a.offsetWidth,o.css("overflow","scroll"),i=a.offsetWidth,n===i&&(i=o[0].clientWidth),o.remove(),r=n-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,o="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var r,h,f,m,g,v=e(t.of),A=e.position.getWithinInfo(t.within),y=e.position.getScrollInfo(A),b=v[0],w=(t.collision||"flip").split(" "),E={};return 9===b.nodeType?(h=v.width(),f=v.height(),m={top:0,left:0}):e.isWindow(b)?(h=v.width(),f=v.height(),m={top:v.scrollTop(),left:v.scrollLeft()}):b.preventDefault?(t.at="left top",h=f=0,m={top:b.pageY,left:b.pageX}):(h=v.outerWidth(),f=v.outerHeight(),m=v.offset()),g=e.extend({},m),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=c.exec(i[0]),n=c.exec(i[1]),E[this]=[e?e[0]:0,n?n[0]:0],t[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?g.left+=h:"center"===t.at[0]&&(g.left+=h/2),"bottom"===t.at[1]?g.top+=f:"center"===t.at[1]&&(g.top+=f/2),r=n(E.at,h,f),g.left+=r[0],g.top+=r[1],this.each(function(){var l,u,c=e(this),d=c.outerWidth(),p=c.outerHeight(),b=i(this,"marginLeft"),_=i(this,"marginTop"),k=d+b+i(this,"marginRight")+y.width,C=p+_+i(this,"marginBottom")+y.height,S=e.extend({},g),x=n(E.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?S.left-=d:"center"===t.my[0]&&(S.left-=d/2),"bottom"===t.my[1]?S.top-=p:"center"===t.my[1]&&(S.top-=p/2),S.left+=x[0],S.top+=x[1],e.support.offsetFractions||(S.left=s(S.left),S.top=s(S.top)),l={marginLeft:b,marginTop:_},e.each(["left","top"],function(n,i){e.ui.position[w[n]]&&e.ui.position[w[n]][i](S,{targetWidth:h,targetHeight:f,elemWidth:d,elemHeight:p,collisionPosition:l,collisionWidth:k,collisionHeight:C,offset:[r[0]+x[0],r[1]+x[1]],my:t.my,at:t.at,within:A,elem:c})}),e.fn.bgiframe&&c.bgiframe(),t.using&&(u=function(e){var n=m.left-S.left,i=n+h-d,r=m.top-S.top,s=r+f-p,l={target:{element:v,left:m.left,top:m.top,width:h,height:f},element:{element:c,left:S.left,top:S.top,width:d,height:p},horizontal:0>i?"left":n>0?"right":"center",vertical:0>s?"top":r>0?"bottom":"middle"};d>h&&a(n+i)<h&&(l.horizontal="center"),p>f&&a(r+s)<f&&(l.vertical="middle"),l.important=o(a(n),a(i))>o(a(r),a(s))?"horizontal":"vertical",t.using.call(this,e,l)}),c.offset(e.extend(S,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,s=e.left-t.collisionPosition.marginLeft,l=r-s,u=s+t.collisionWidth-a-r;t.collisionWidth>a?l>0&&0>=u?(n=e.left+l+t.collisionWidth-a-r,e.left+=l-n):e.left=u>0&&0>=l?r:l>u?r+a-t.collisionWidth:r:l>0?e.left+=l:u>0?e.left-=u:e.left=o(e.left-s,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,l=r-s,u=s+t.collisionHeight-a-r;t.collisionHeight>a?l>0&&0>=u?(n=e.top+l+t.collisionHeight-a-r,e.top+=l-n):e.top=u>0&&0>=l?r:l>u?r+a-t.collisionHeight:r:l>0?e.top+=l:u>0?e.top-=u:e.top=o(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,d=u+t.collisionWidth-s-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>c?(n=e.left+h+p+f+t.collisionWidth-s-o,(0>n||n<a(c))&&(e.left+=h+p+f)):d>0&&(i=e.left-t.collisionPosition.marginLeft+h+p+f-l,(i>0||a(i)<d)&&(e.left+=h+p+f))},top:function(e,t){var n,i,r=t.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,d=u+t.collisionHeight-s-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>c?(i=e.top+p+f+m+t.collisionHeight-s-o,e.top+p+f+m>c&&(0>i||i<a(c))&&(e.top+=p+f+m)):d>0&&(n=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>d&&(n>0||a(n)<d)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,r,o,a=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)t.style[o]=i[o];t.appendChild(s),n=a||document.documentElement,n.insertBefore(t,n.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",r=e(s).offset().left,e.support.offsetFractions=r>10&&11>r,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&!function(e){var n=e.fn.position;e.fn.position=function(i){if(!i||!i.offset)return n.call(this,i);var r=i.offset.split(" "),o=i.at.split(" ");return 1===r.length&&(r[1]=r[0]),/^\d/.test(r[0])&&(r[0]="+"+r[0]),/^\d/.test(r[1])&&(r[1]="+"+r[1]),1===o.length&&(/left|center|right/.test(o[0])?o[1]="center":(o[1]=o[0],o[0]="center")),n.call(this,e.extend(i,{at:o[0]+r[0]+" "+o[1]+r[1],offset:t}))}}(jQuery)}(jQuery),/*!
 * jQuery UI Dialog 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 *  jquery.ui.button.js
 *  jquery.ui.draggable.js
 *  jquery.ui.mouse.js
 *  jquery.ui.position.js
 *  jquery.ui.resizable.js
 */
function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t,i,r,o,a,s=this,l=this.options,u=l.title||"&#160;";t=(this.uiDialog=e("<div>")).addClass(n+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(t){l.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE&&(s.close(t),t.preventDefault())}).mousedown(function(e){s.moveToTop(!1,e)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(t),i=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){t.focus()}).prependTo(t),r=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),s.close(e)}).appendTo(i),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(r),o=e("<span>").uniqueId().addClass("ui-dialog-title").html(u).prependTo(i),a=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(a),t.attr({role:"dialog","aria-labelledby":o.attr("id")}),i.find("*").add(i).disableSelection(),this._hoverable(r),this._focusable(r),l.draggable&&e.fn.draggable&&this._makeDraggable(),l.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,e.fn.bgiframe&&t.bgiframe(),this._on(t,{keydown:function(n){if(l.modal&&n.keyCode===e.ui.keyCode.TAB){var i=e(":tabbable",t),r=i.filter(":first"),o=i.filter(":last");return n.target!==o[0]||n.shiftKey?n.target===r[0]&&n.shiftKey?(o.focus(1),!1):void 0:(r.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var n,i,r=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(n=0,e(".ui-dialog").each(function(){this!==r.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(n=Math.max(n,i)))}),e.ui.dialog.maxZ=n),this},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var i,r=this.options;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",n):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),i={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(i),this._trigger("focus",n),this)},open:function(){if(!this._isOpen){var t,n=this.options,i=this.uiDialog;return this._size(),this._position(n.position),i.show(n.show),this.overlay=n.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=i)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(t){var n=this,i=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(i=!0)}),i?(e.each(t,function(t,i){var r,o;i=e.isFunction(i)?{click:i,text:t}:i,i=e.extend({type:"button"},i),o=i.click,i.click=function(){o.apply(n.element[0],arguments)},r=e("<button></button>",i).appendTo(n.uiButtonSet),e.fn.button&&r.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){e(this).addClass("ui-dialog-dragging"),n._trigger("dragStart",i,t(r))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(r,o){i.position=[o.position.left-n.document.scrollLeft(),o.position.top-n.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),n._trigger("dragStop",r,t(o)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function i(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,o=this.options,a=this.uiDialog.css("position"),s="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:this._minHeight(),handles:s,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,i(n))},resize:function(e,t){r._trigger("resize",e,i(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),o.height=e(this).height(),o.width=e(this).width(),r._trigger("resizeStop",t,i(n)),e.ui.dialog.overlay.resize()}}).css("position",a).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n,i=[],r=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(i=t.split?t.split(" "):[t[0],t[1]],1===i.length&&(i[1]=i[0]),e.each(["left","top"],function(e,t){+i[e]===i[e]&&(r[e]=i[e],i[e]=t)}),t={my:i[0]+(r[0]<0?r[0]:"+"+r[0])+" "+i[1]+(r[1]<0?r[1]:"+"+r[1]),at:i.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,n=this.uiDialog.is(":visible"),n||this.uiDialog.show(),this.uiDialog.position(t),n||this.uiDialog.hide()},_setOptions:function(t){var n=this,o={},a=!1;e.each(t,function(e,t){n._setOption(e,t),e in i&&(a=!0),e in r&&(o[e]=t)}),a&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,i){var r,o,a=this.uiDialog;switch(t){case"buttons":this._createButtons(i);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+i);break;case"dialogClass":a.removeClass(this.options.dialogClass).addClass(n+i);break;case"disabled":i?a.addClass("ui-dialog-disabled"):a.removeClass("ui-dialog-disabled");break;case"draggable":r=a.is(":data(draggable)"),r&&!i&&a.draggable("destroy"),!r&&i&&this._makeDraggable();break;case"position":this._position(i);break;case"resizable":o=a.is(":data(resizable)"),o&&!i&&a.resizable("destroy"),o&&"string"==typeof i&&a.resizable("option","handles",i),o||i===!1||this._makeResizable(i);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(i||"&#160;"))}this._super(t,i)},_size:function(){var t,n,i,r=this.options,o=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),r.minWidth>r.width&&(r.width=r.minWidth),t=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),n=Math.max(0,r.minHeight-t),"auto"===r.height?e.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),i=this.element.css("height","auto").height(),o||this.uiDialog.hide(),this.element.height(Math.max(i,n))):this.element.height(Math.max(r.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){return e(t.target).zIndex()<e.ui.dialog.overlay.maxZ?!1:void 0})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(i){var r=e.ui.dialog.overlay.instances;0!==r.length&&r[r.length-1]===n&&t.options.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}),n.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances),i=0;-1!==n&&this.oldInstances.push(this.instances.splice(n,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){i=Math.max(i,this.css("z-index"))}),this.maxZ=i},height:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),n>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),n>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),window.Modernizr=function(e,t,n){function i(e){f.cssText=e}function r(e,t){return typeof e===t}var o,a,s,l="2.8.3",u={},c=!0,d=t.documentElement,h="modernizr",p=t.createElement(h),f=p.style,m=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),g={},v=[],A=v.slice,y=function(e,n,i,r){var o,a,s,l,u=t.createElement("div"),c=t.body,p=c||t.createElement("body");if(parseInt(i,10))for(;i--;)s=t.createElement("div"),s.id=r?r[i]:h+(i+1),u.appendChild(s);return o=["&#173;",'<style id="s',h,'">',e,"</style>"].join(""),u.id=h,(c?u:p).innerHTML+=o,p.appendChild(u),c||(p.style.background="",p.style.overflow="hidden",l=d.style.overflow,d.style.overflow="hidden",d.appendChild(p)),a=n(u,e),c?u.parentNode.removeChild(u):(p.parentNode.removeChild(p),d.style.overflow=l),!!a},b={}.hasOwnProperty;s=r(b,"undefined")||r(b.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(e,t){return b.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=A.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=t.prototype;var o=new r,a=t.apply(o,n.concat(A.call(arguments)));return Object(a)===a?a:o}return t.apply(e,n.concat(A.call(arguments)))};return i}),g.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:y(["@media (",m.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},g.fontface=function(){var e;return y('@font-face {font-family:"font";src:url("https://")}',function(n,i){var r=t.getElementById("smodernizr"),o=r.sheet||r.styleSheet,a=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";e=/src/i.test(a)&&0===a.indexOf(i.split(" ")[0])}),e};for(var w in g)s(g,w)&&(a=w.toLowerCase(),u[a]=g[w](),v.push((u[a]?"":"no-")+a));return u.addTest=function(e,t){if("object"==typeof e)for(var i in e)s(e,i)&&u.addTest(i,e[i]);else{if(e=e.toLowerCase(),u[e]!==n)return u;t="function"==typeof t?t():t,"undefined"!=typeof c&&c&&(d.className+=" "+(t?"":"no-")+e),u[e]=t}return u},i(""),p=o=null,u._version=l,u._prefixes=m,u.testStyles=y,d.className=d.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(c?" js "+v.join(" "):""),u}(this,this.document),function(){function e(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}function t(e,t,n){if(t!==t)return i(e,n);for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}function n(e){return null==e?"":e+""}function i(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var o=e[r];if(o!==o)return r}return-1}function r(e){return!!e&&"object"==typeof e}function o(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;)e[n]===t&&(e[n]=Dn,o[++r]=n);return o}function a(e){if(r(e)&&!fr(e)&&!(e instanceof u)){if(e instanceof l)return e;if(Li.call(e,"__chain__")&&Li.call(e,"__wrapped__"))return Lt(e)}return new l(e)}function s(){}function l(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function u(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Gi,this.__views__=[]}function c(){var e=new u(this.__wrapped__);return e.__actions__=f(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=f(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=f(this.__views__),e}function d(){if(this.__filtered__){var e=new u(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function h(){var e=this.__wrapped__.value(),t=this.__dir__,n=fr(e),i=0>t,r=n?e.length:0,o=ft(0,r,this.__views__),a=o.start,s=o.end,l=s-a,u=i?s:a-1,c=this.__iteratees__,d=c.length,h=0,p=Wi(l,this.__takeCount__);if(!n||In>r||r==l&&p==l)return z(i&&n?e.reverse():e,this.__actions__);var f=[];e:for(;l--&&p>h;){u+=t;for(var m=-1,g=e[u];++m<d;){var v=c[m],A=v.iteratee,y=v.type,b=A(g);if(y==Mn)g=b;else if(!b){if(y==Pn)continue e;break e}}f[h++]=g}return f}function p(e,t){for(var n=-1,i=e.length,r=-1,o=t.length,a=Array(i+o);++n<i;)a[n]=e[n];for(;++r<o;)a[n++]=t[r];return a}function f(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function m(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}function g(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[++r]=a)}return o}function v(e,t){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function A(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function y(e,t,n,i){var r=-1,o=e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function b(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function w(e,t){return null==t?e:E(t,mr(t),e)}function E(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}function _(e,t,n){var i=typeof e;return"function"==i?t===yn?e:J(e,t,n):null==e?fn:"object"==i?O(e):t===yn?An(e):D(e,t)}function k(e,t,n,i,r,o,a){var s;if(n&&(s=r?n(e,i,r):n(e)),s!==yn)return s;if(!on(e))return e;var l=fr(e);if(l){if(s=mt(e),!t)return f(e,s)}else{var u=Ri.call(e),c=u==Wn;if(u!=Vn&&u!=Nn&&(!c||r))return mi[u]?vt(e,u,t):r?e:{};if(ki(e))return r?e:{};if(s=gt(c?{}:e),!t)return w(s,e)}o||(o=[]),a||(a=[]);for(var d=o.length;d--;)if(o[d]==e)return a[d];return o.push(e),a.push(s),(l?m:j)(e,function(i,r){s[r]=k(i,t,n,r,e,o,a)}),s}function C(e,t){var n=[];return tr(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function S(e,t,n,i){var r;return n(e,function(e,n,o){return t(e,n,o)?(r=i?n:e,!1):void 0}),r}function x(e,t,n,i){i||(i=[]);for(var o=-1,a=e.length;++o<a;){var s=e[o];r(s)&&At(s)&&(n||fr(s)||tn(s))?t?x(s,t,n,i):A(i,s):n||(i[i.length]=s)}return i}function j(e,t){return nr(e,t,mr)}function T(e,t){for(var n=-1,i=t.length,r=-1,o=[];++n<i;){var a=t[n];rn(e[a])&&(o[++r]=a)}return o}function L(e,t,n){if(null!=e){e=jt(e),n!==yn&&n in e&&(t=[n]);for(var i=0,r=t.length;null!=e&&r>i;)e=jt(e)[t[i++]];return i&&i==r?e:yn}}function R(e,t,n,i,o,a){return e===t?!0:null==e||null==t||!on(e)&&!r(t)?e!==e&&t!==t:I(e,t,R,n,i,o,a)}function I(e,t,n,i,r,o,a){var s=fr(e),l=fr(t),u=Fn,c=Fn;s||(u=Ri.call(e),u==Nn?u=Vn:u!=Vn&&(s=ln(e))),l||(c=Ri.call(t),c==Nn?c=Vn:c!=Vn&&(l=ln(t)));var d=u==Vn&&!ki(e),h=c==Vn&&!ki(t),p=u==c;if(p&&!s&&!d)return st(e,t,u);if(!r){var f=d&&Li.call(e,"__wrapped__"),m=h&&Li.call(t,"__wrapped__");if(f||m)return n(f?e.value():e,m?t.value():t,i,r,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var g=o.length;g--;)if(o[g]==e)return a[g]==t;o.push(e),a.push(t);var v=(s?at:lt)(e,t,n,i,r,o,a);return o.pop(),a.pop(),v}function P(e,t,n){var i=t.length,r=i,o=!n;if(null==e)return!r;for(e=jt(e);i--;){var a=t[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<r;){a=t[i];var s=a[0],l=e[s],u=a[1];if(o&&a[2]){if(l===yn&&!(s in e))return!1}else{var c=n?n(l,u,s):yn;if(!(c===yn?R(u,l,n,!0):c))return!1}}return!0}function M(e,t){var n=-1,i=At(e)?Array(e.length):[];return tr(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function O(e){var t=ht(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null==e?!1:(e=jt(e),e[n]===i&&(i!==yn||n in e))}}return function(e){return P(e,t)}}function D(e,t){var n=fr(e),i=wt(e)&&kt(t),r=e+"";return e=Tt(e),function(o){if(null==o)return!1;var a=r;if(o=jt(o),!(!n&&i||a in o)){if(o=1==e.length?o:L(o,U(e,0,-1)),null==o)return!1;a=Ot(e),o=jt(o)}return o[a]===t?t!==yn||a in o:R(t,o[a],yn,!0)}}function N(e){return function(t){return null==t?yn:jt(t)[e]}}function F(e){var t=e+"";return e=Tt(e),function(n){return L(n,e,t)}}function B(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function U(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n=n===yn||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}function Y(e,t){var n;return tr(e,function(e,i,r){return n=t(e,i,r),!n}),!!n}function W(e,t){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e[t[n]];return r}function z(e,t){var n=e;n instanceof u&&(n=n.value());for(var i=-1,r=t.length;++i<r;){var o=t[i];n=o.func.apply(o.thisArg,A([n],o.args))}return n}function G(e,t,n){var i=0,r=e?e.length:i;if("number"==typeof t&&t===t&&$i>=r){for(;r>i;){var o=i+r>>>1,a=e[o];(n?t>=a:t>a)&&null!==a?i=o+1:r=o}return r}return V(e,t,fn,n)}function V(e,t,n,i){t=n(t);for(var r=0,o=e?e.length:0,a=t!==t,s=null===t,l=t===yn;o>r;){var u=Fi((r+o)/2),c=n(e[u]),d=c!==yn,h=c===c;if(a)var p=h||i;else p=s?h&&d&&(i||null!=c):l?h&&(i||d):null==c?!1:i?t>=c:t>c;p?r=u+1:o=u}return Wi(o,Ji)}function J(e,t,n){if("function"!=typeof e)return fn;if(t===yn)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,a){return e.call(t,n,i,r,o,a)}}return function(){return e.apply(t,arguments)}}function $(e){var t=new Pi(e.byteLength),n=new Di(t);return n.set(new Di(e)),t}function Q(e,t,n){for(var i=n.length,r=-1,o=Yi(e.length-i,0),a=-1,s=t.length,l=Array(s+o);++a<s;)l[a]=t[a];for(;++r<i;)l[n[r]]=e[r];for(;o--;)l[a++]=e[r++];return l}function H(e,t,n){for(var i=-1,r=n.length,o=-1,a=Yi(e.length-r,0),s=-1,l=t.length,u=Array(a+l);++o<a;)u[o]=e[o];for(var c=o;++s<l;)u[c+s]=t[s];for(;++i<r;)u[c+n[i]]=e[o++];return u}function q(e,t){return function(n,i){var r=n?or(n):0;if(!_t(r))return e(n,i);for(var o=t?r:-1,a=jt(n);(t?o--:++o<r)&&i(a[o],o,a)!==!1;);return n}}function K(e){return function(t,n,i){for(var r=jt(t),o=i(t),a=o.length,s=e?a:-1;e?s--:++s<a;){var l=o[s];if(n(r[l],l,r)===!1)break}return t}}function X(e,t){function n(){var r=this&&this!==_i&&this instanceof n?i:e;return r.apply(t,arguments)}var i=Z(e);return n}function Z(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=er(e.prototype),i=e.apply(n,t);return on(i)?i:n}}function et(t,n){return function(i,r,o){if(r=ut(r,o,3),fr(i)){var a=e(i,r,n);return a>-1?i[a]:yn}return S(i,r,t)}}function tt(e,t){return function(n,i,r){return"function"==typeof i&&r===yn&&fr(n)?e(n,i):t(n,J(i,r,3))}}function nt(e,t){return function(n,i,r,o){var a=arguments.length<3;return"function"==typeof i&&o===yn&&fr(n)?e(n,i,r,a):B(n,ut(i,o,4),r,a,t)}}function it(e,t,n,i,r,a,s,l,u,c){function d(){for(var b=arguments.length,w=b,E=Array(b);w--;)E[w]=arguments[w];if(i&&(E=Q(E,i,r)),a&&(E=H(E,a,s)),g||A){var _=d.placeholder,k=o(E,_);if(b-=k.length,c>b){var C=l?f(l):yn,S=Yi(c-b,0),x=g?k:yn,j=g?yn:k,T=g?E:yn,L=g?yn:E;t|=g?Sn:xn,t&=~(g?xn:Sn),v||(t&=~(wn|En));var R=[e,t,n,T,x,L,j,C,u,S],I=it.apply(yn,R);return Et(e)&&ar(I,R),I.placeholder=_,I}}var P=p?n:this,M=m?P[e]:e;return l&&(E=St(E,l)),h&&u<E.length&&(E.length=u),this&&this!==_i&&this instanceof d&&(M=y||Z(e)),M.apply(P,E)}var h=t&jn,p=t&wn,m=t&En,g=t&kn,v=t&_n,A=t&Cn,y=m?yn:Z(e);return d}function rt(e,t,n,i){function r(){for(var t=-1,s=arguments.length,l=-1,u=i.length,c=Array(u+s);++l<u;)c[l]=i[l];for(;s--;)c[l++]=arguments[++t];var d=this&&this!==_i&&this instanceof r?a:e;return d.apply(o?n:this,c)}var o=t&wn,a=Z(e);return r}function ot(e,t,n,i,r,o,a,s){var l=t&En;if(!l&&"function"!=typeof e)throw new TypeError(On);var u=i?i.length:0;if(u||(t&=~(Sn|xn),i=r=yn),u-=r?r.length:0,t&xn){var c=i,d=r;i=r=yn}var h=l?yn:rr(e),p=[e,t,n,i,r,c,d,o,a,s];if(h&&(Ct(p,h),t=p[1],s=p[9]),p[9]=null==s?l?0:e.length:Yi(s-u,0)||0,t==wn)var f=X(p[0],p[2]);else f=t!=Sn&&t!=(wn|Sn)||p[4].length?it.apply(yn,p):rt.apply(yn,p);var m=h?ir:ar;return m(f,p)}function at(e,t,n,i,r,o,a){var s=-1,l=e.length,u=t.length;if(l!=u&&!(r&&u>l))return!1;for(;++s<l;){var c=e[s],d=t[s],h=i?i(r?d:c,r?c:d,s):yn;if(h!==yn){if(h)continue;return!1}if(r){if(!b(t,function(e){return c===e||n(c,e,i,r,o,a)}))return!1}else if(c!==d&&!n(c,d,i,r,o,a))return!1}return!0}function st(e,t,n){switch(n){case Bn:case Un:return+e==+t;case Yn:return e.name==t.name&&e.message==t.message;case Gn:return e!=+e?t!=+t:e==+t;case Jn:case Qn:return e==t+""}return!1}function lt(e,t,n,i,r,o,a){var s=mr(e),l=s.length,u=mr(t),c=u.length;if(l!=c&&!r)return!1;for(var d=l;d--;){var h=s[d];if(!(r?h in t:Li.call(t,h)))return!1}for(var p=r;++d<l;){h=s[d];var f=e[h],m=t[h],g=i?i(r?m:f,r?f:m,h):yn;if(!(g===yn?n(f,m,i,r,o,a):g))return!1;p||(p="constructor"==h)}if(!p){var v=e.constructor,A=t.constructor;if(v!=A&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof A&&A instanceof A))return!1}return!0}function ut(e,t,n){var i=a.callback||pn;return i=i===pn?_:i,n?i(e,t,n):i}function ct(e){for(var t=e.name,n=qi[t],i=n?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function dt(e,n,i){var r=a.indexOf||Mt;return r=r===Mt?t:r,e?r(e,n,i):r}function ht(e){for(var t=dn(e),n=t.length;n--;)t[n][2]=kt(t[n][1]);return t}function pt(e,t){var n=null==e?yn:e[t];return an(n)?n:yn}function ft(e,t,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Wi(t,e+a);break;case"takeRight":e=Yi(e,t-a)}}return{start:e,end:t}}function mt(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Li.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function gt(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}function vt(e,t,n){var i=e.constructor;switch(t){case qn:return $(e);case Bn:case Un:return new i(+e);case Kn:case Xn:case Zn:case ei:case ti:case ni:case ii:case ri:case oi:i instanceof i&&(i=Ki[t]);var r=e.buffer;return new i(n?$(r):r,e.byteOffset,e.length);case Gn:case Qn:return new i(e);case Jn:var o=new i(e.source,ci.exec(e));o.lastIndex=e.lastIndex}return o}function At(e){return null!=e&&_t(or(e))}function yt(e,t){return e="number"==typeof e||hi.test(e)?+e:-1,t=null==t?Qi:t,e>-1&&e%1==0&&t>e}function bt(e,t,n){if(!on(n))return!1;var i=typeof t;if("number"==i?At(n)&&yt(t,n.length):"string"==i&&t in n){var r=n[t];return e===e?e===r:r!==r}return!1}function wt(e,t){var n=typeof e;if("string"==n&&si.test(e)||"number"==n)return!0;if(fr(e))return!1;var i=!ai.test(e);return i||null!=t&&e in jt(t)}function Et(e){var t=ct(e);if(!(t in u.prototype))return!1;var n=a[t];if(e===n)return!0;var i=rr(n);return!!i&&e===i[0]}function _t(e){return"number"==typeof e&&e>-1&&e%1==0&&Qi>=e}function kt(e){return e===e&&!on(e)}function Ct(e,t){var n=e[1],i=t[1],r=n|i,a=jn>r,s=i==jn&&n==kn||i==jn&&n==Tn&&e[7].length<=t[8]||i==(jn|Tn)&&n==kn;if(!a&&!s)return e;i&wn&&(e[2]=t[2],r|=n&wn?0:_n);var l=t[3];if(l){var u=e[3];e[3]=u?Q(u,l,t[4]):f(l),e[4]=u?o(e[3],Dn):f(t[4])}return l=t[5],l&&(u=e[5],e[5]=u?H(u,l,t[6]):f(l),e[6]=u?o(e[5],Dn):f(t[6])),l=t[7],l&&(e[7]=f(l)),i&jn&&(e[8]=null==e[8]?t[8]:Wi(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function St(e,t){for(var n=e.length,i=Wi(t.length,n),r=f(e);i--;){var o=t[i];e[i]=yt(o,n)?r[o]:yn}return e}function xt(e){for(var t=cn(e),n=t.length,i=n&&e.length,r=!!i&&_t(i)&&(fr(e)||tn(e)||sn(e)),o=-1,a=[];++o<n;){var s=t[o];(r&&yt(s,i)||Li.call(e,s))&&a.push(s)}return a}function jt(e){if(a.support.unindexedChars&&sn(e)){for(var t=-1,n=e.length,i=Object(e);++t<n;)i[t]=e.charAt(t);return i}return on(e)?e:Object(e)}function Tt(e){if(fr(e))return e;var t=[];return n(e).replace(li,function(e,n,i,r){t.push(i?r.replace(ui,"$1"):n||e)}),t}function Lt(e){return e instanceof u?e.clone():new l(e.__wrapped__,e.__chain__,f(e.__actions__))}function Rt(e,t,n){var i=e?e.length:0;return i?((n?bt(e,t,n):null==t)&&(t=1),U(e,0>t?0:t)):[]}function It(e){return e?e[0]:yn}function Pt(e,t,n){var i=e?e.length:0;return n&&bt(e,t,n)&&(t=!1),i?x(e,t):[]}function Mt(e,n,i){var r=e?e.length:0;if(!r)return-1;if("number"==typeof i)i=0>i?Yi(r+i,0):i;else if(i){var o=G(e,n);return r>o&&(n===n?n===e[o]:e[o]!==e[o])?o:-1}return t(e,n,i||0)}function Ot(e){var t=e?e.length:0;return t?e[t-1]:yn}function Dt(e){return Rt(e,1)}function Nt(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&bt(e,t,n)&&(t=0,n=i),U(e,t,n)):[]}function Ft(e){if(!e||!e.length)return[];var t=-1,n=0;e=g(e,function(e){return At(e)?(n=Yi(e.length,n),!0):void 0});for(var i=Array(n);++t<n;)i[t]=v(e,N(t));return i}function Bt(e){var t=a(e);return t.__chain__=!0,t}function Ut(e,t,n){return t.call(n,e),e}function Yt(e,t,n){return t.call(n,e)}function Wt(){return Bt(this)}function zt(){return new l(this.value(),this.__chain__)}function Gt(e){for(var t,n=this;n instanceof s;){var i=Lt(n);t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t}function Vt(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof u){var n=e;return this.__actions__.length&&(n=new u(this)),n=n.reverse(),n.__actions__.push({func:Yt,args:[t],thisArg:yn}),new l(n,this.__chain__)}return this.thru(t)}function Jt(){return this.value()+""}function $t(){return z(this.__wrapped__,this.__actions__)}function Qt(e,t,n){var i=fr(e)?g:C;return t=ut(t,n,3),i(e,t)}function Ht(e,t,n,i){var r=e?or(e):0;return _t(r)||(e=hn(e),r=e.length),n="number"!=typeof n||i&&bt(t,n,i)?0:0>n?Yi(r+n,0):n||0,"string"==typeof e||!fr(e)&&sn(e)?r>=n&&e.indexOf(t,n)>-1:!!r&&dt(e,t,n)>-1}function qt(e,t,n){var i=fr(e)?v:M;return t=ut(t,n,3),i(e,t)}function Kt(e,t,n){var i=fr(e)?g:C;return t=ut(t,n,3),i(e,function(e,n,i){return!t(e,n,i)})}function Xt(e,t,n){var i=fr(e)?b:Y;return n&&bt(e,t,n)&&(t=yn),("function"!=typeof t||n!==yn)&&(t=ut(t,n,3)),i(e,t)}function Zt(e,t,n){function i(){p&&clearTimeout(p),u&&clearTimeout(u),m=0,u=p=f=yn}function r(t,n){n&&clearTimeout(n),u=p=f=yn,t&&(m=hr(),c=e.apply(h,l),p||u||(l=h=yn))}function o(){var e=t-(hr()-d);0>=e||e>t?r(f,u):p=setTimeout(o,e)}function a(){r(v,p)}function s(){if(l=arguments,d=hr(),h=this,f=v&&(p||!A),g===!1)var n=A&&!p;else{u||A||(m=d);var i=g-(d-m),r=0>=i||i>g;r?(u&&(u=clearTimeout(u)),m=d,c=e.apply(h,l)):u||(u=setTimeout(a,i))}return r&&p?p=clearTimeout(p):p||t===g||(p=setTimeout(o,t)),n&&(r=!0,c=e.apply(h,l)),!r||p||u||(l=h=yn),c}var l,u,c,d,h,p,f,m=0,g=!1,v=!0;if("function"!=typeof e)throw new TypeError(On);if(t=0>t?0:+t||0,n===!0){var A=!0;v=!1}else on(n)&&(A=!!n.leading,g="maxWait"in n&&Yi(+n.maxWait||0,t),v="trailing"in n?!!n.trailing:v);return s.cancel=i,s}function en(e,t){if("function"!=typeof e)throw new TypeError(On);return t=Yi(t===yn?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,r=Yi(n.length-t,0),o=Array(r);++i<r;)o[i]=n[t+i];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=Array(t+1);for(i=-1;++i<t;)a[i]=n[i];return a[t]=o,e.apply(this,a)}}function tn(e){return r(e)&&At(e)&&Li.call(e,"callee")&&!Mi.call(e,"callee")}function nn(e){return null==e?!0:At(e)&&(fr(e)||sn(e)||tn(e)||r(e)&&rn(e.splice))?!e.length:!mr(e).length}function rn(e){return on(e)&&Ri.call(e)==Wn}function on(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function an(e){return null==e?!1:rn(e)?Ii.test(Ti.call(e)):r(e)&&(ki(e)?Ii:di).test(e)}function sn(e){return"string"==typeof e||r(e)&&Ri.call(e)==Qn}function ln(e){return r(e)&&_t(e.length)&&!!fi[Ri.call(e)]}function un(e){return e===yn}function cn(e){if(null==e)return[];on(e)||(e=Object(e));var t=e.length,n=a.support;t=t&&_t(t)&&(fr(e)||tn(e)||sn(e))&&t||0;for(var i=e.constructor,r=-1,o=rn(i)&&i.prototype||xi,s=o===e,l=Array(t),u=t>0,c=n.enumErrorProps&&(e===Si||e instanceof Error),d=n.enumPrototypes&&rn(e);++r<t;)l[r]=r+"";for(var h in e)d&&"prototype"==h||c&&("message"==h||"name"==h)||u&&yt(h,t)||"constructor"==h&&(s||!Li.call(e,h))||l.push(h);if(n.nonEnumShadows&&e!==xi){var p=e===ji?Qn:e===Si?Yn:Ri.call(e),f=Xi[p]||Xi[Vn];for(p==Vn&&(o=xi),t=pi.length;t--;){h=pi[t];var m=f[h];s&&m||(m?!Li.call(e,h):e[h]===o[h])||l.push(h)}}return l}function dn(e){e=jt(e);for(var t=-1,n=mr(e),i=n.length,r=Array(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r}function hn(e){return W(e,mr(e))}function pn(e,t,n){return n&&bt(e,t,n)&&(t=yn),r(e)?mn(e):_(e,t)}function fn(e){return e}function mn(e){return O(k(e,!0))}function gn(e,t,n){if(null==n){var i=on(t),r=i?mr(t):yn,o=r&&r.length?T(t,r):yn;(o?o.length:i)||(o=!1,n=t,t=e,e=this)}o||(o=T(t,mr(t)));var a=!0,s=-1,l=rn(e),u=o.length;n===!1?a=!1:on(n)&&"chain"in n&&(a=n.chain);for(;++s<u;){var c=o[s],d=t[c];e[c]=d,l&&(e.prototype[c]=function(t){return function(){var n=this.__chain__;if(a||n){var i=e(this.__wrapped__),r=i.__actions__=f(this.__actions__);return r.push({func:t,args:arguments,thisArg:e}),i.__chain__=n,i}return t.apply(e,A([this.value()],arguments))}}(d))}return e}function vn(){}function An(e){return wt(e)?N(e):F(e)}var yn,bn="3.10.0",wn=1,En=2,_n=4,kn=8,Cn=16,Sn=32,xn=64,jn=128,Tn=256,Ln=150,Rn=16,In=200,Pn=1,Mn=2,On="Expected a function",Dn="__lodash_placeholder__",Nn="[object Arguments]",Fn="[object Array]",Bn="[object Boolean]",Un="[object Date]",Yn="[object Error]",Wn="[object Function]",zn="[object Map]",Gn="[object Number]",Vn="[object Object]",Jn="[object RegExp]",$n="[object Set]",Qn="[object String]",Hn="[object WeakMap]",qn="[object ArrayBuffer]",Kn="[object Float32Array]",Xn="[object Float64Array]",Zn="[object Int8Array]",ei="[object Int16Array]",ti="[object Int32Array]",ni="[object Uint8Array]",ii="[object Uint8ClampedArray]",ri="[object Uint16Array]",oi="[object Uint32Array]",ai=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,si=/^\w*$/,li=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,ui=/\\(\\)?/g,ci=/\w*$/,di=/^\[object .+?Constructor\]$/,hi=/^\d+$/,pi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],fi={};
fi[Kn]=fi[Xn]=fi[Zn]=fi[ei]=fi[ti]=fi[ni]=fi[ii]=fi[ri]=fi[oi]=!0,fi[Nn]=fi[Fn]=fi[qn]=fi[Bn]=fi[Un]=fi[Yn]=fi[Wn]=fi[zn]=fi[Gn]=fi[Vn]=fi[Jn]=fi[$n]=fi[Qn]=fi[Hn]=!1;var mi={};mi[Nn]=mi[Fn]=mi[qn]=mi[Bn]=mi[Un]=mi[Kn]=mi[Xn]=mi[Zn]=mi[ei]=mi[ti]=mi[Gn]=mi[Vn]=mi[Jn]=mi[Qn]=mi[ni]=mi[ii]=mi[ri]=mi[oi]=!0,mi[Yn]=mi[Wn]=mi[zn]=mi[$n]=mi[Hn]=!1;var gi={"function":!0,object:!0},vi=gi[typeof exports]&&exports&&!exports.nodeType&&exports,Ai=gi[typeof module]&&module&&!module.nodeType&&module,yi=vi&&Ai&&"object"==typeof global&&global&&global.Object&&global,bi=gi[typeof self]&&self&&self.Object&&self,wi=gi[typeof window]&&window&&window.Object&&window,Ei=Ai&&Ai.exports===vi&&vi,_i=yi||wi!==(this&&this.window)&&wi||bi||this,ki=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}(),Ci=Array.prototype,Si=Error.prototype,xi=Object.prototype,ji=String.prototype,Ti=Function.prototype.toString,Li=xi.hasOwnProperty,Ri=xi.toString,Ii=RegExp("^"+Ti.call(Li).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pi=_i.ArrayBuffer,Mi=xi.propertyIsEnumerable,Oi=Ci.splice,Di=_i.Uint8Array,Ni=pt(_i,"WeakMap"),Fi=Math.floor,Bi=pt(Array,"isArray"),Ui=pt(Object,"keys"),Yi=Math.max,Wi=Math.min,zi=pt(Date,"now"),Gi=Number.POSITIVE_INFINITY,Vi=4294967295,Ji=Vi-1,$i=Vi>>>1,Qi=9007199254740991,Hi=Ni&&new Ni,qi={},Ki={};Ki[Kn]=_i.Float32Array,Ki[Xn]=_i.Float64Array,Ki[Zn]=_i.Int8Array,Ki[ei]=_i.Int16Array,Ki[ti]=_i.Int32Array,Ki[ni]=Di,Ki[ii]=_i.Uint8ClampedArray,Ki[ri]=_i.Uint16Array,Ki[oi]=_i.Uint32Array;var Xi={};Xi[Fn]=Xi[Un]=Xi[Gn]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Xi[Bn]=Xi[Qn]={constructor:!0,toString:!0,valueOf:!0},Xi[Yn]=Xi[Wn]=Xi[Jn]={constructor:!0,toString:!0},Xi[Vn]={constructor:!0},m(pi,function(e){for(var t in Xi)if(Li.call(Xi,t)){var n=Xi[t];n[e]=Li.call(n,e)}});var Zi=a.support={};!function(e){var t=function(){this.x=e},n={0:e,length:e},i=[];t.prototype={valueOf:e,y:e};for(var r in new t)i.push(r);Zi.enumErrorProps=Mi.call(Si,"message")||Mi.call(Si,"name"),Zi.enumPrototypes=Mi.call(t,"prototype"),Zi.nonEnumShadows=!/valueOf/.test(i),Zi.spliceObjects=(Oi.call(n,0,1),!n[0]),Zi.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0);var er=function(){function e(){}return function(t){if(on(t)){e.prototype=t;var n=new e;e.prototype=yn}return n||{}}}(),tr=q(j),nr=K(),ir=Hi?function(e,t){return Hi.set(e,t),e}:fn,rr=Hi?function(e){return Hi.get(e)}:vn,or=N("length"),ar=function(){var e=0,t=0;return function(n,i){var r=hr(),o=Rn-(r-t);if(t=r,o>0){if(++e>=Ln)return n}else e=0;return ir(n,i)}}(),sr=en(Ft),lr=en(function(e){return e=x(e),this.thru(function(t){return p(fr(t)?t:[jt(t)],e)})}),ur=et(tr),cr=tt(m,tr),dr=nt(y,tr),hr=zi||function(){return(new Date).getTime()},pr=en(function(e,t,n){var i=wn;if(n.length){var r=o(n,pr.placeholder);i|=Sn}return ot(e,i,t,n,r)}),fr=Bi||function(e){return r(e)&&_t(e.length)&&Ri.call(e)==Fn},mr=Ui?function(e){var t=null==e?yn:e.constructor;return"function"==typeof t&&t.prototype===e||("function"==typeof e?a.support.enumPrototypes:At(e))?xt(e):on(e)?Ui(e):[]}:xt;a.prototype=s.prototype,l.prototype=er(s.prototype),l.prototype.constructor=l,u.prototype=er(s.prototype),u.prototype.constructor=u,a.bind=pr,a.callback=pn,a.chain=Bt,a.debounce=Zt,a.drop=Rt,a.filter=Qt,a.flatten=Pt,a.forEach=cr,a.keys=mr,a.keysIn=cn,a.map=qt,a.matches=mn,a.mixin=gn,a.pairs=dn,a.property=An,a.reject=Kt,a.rest=Dt,a.restParam=en,a.slice=Nt,a.tap=Ut,a.thru=Yt,a.unzip=Ft,a.values=hn,a.zip=sr,a.collect=qt,a.each=cr,a.iteratee=pn,a.select=Qt,a.tail=Dt,gn(a,a),a.find=ur,a.first=It,a.identity=fn,a.includes=Ht,a.indexOf=Mt,a.isArguments=tn,a.isArray=fr,a.isEmpty=nn,a.isFunction=rn,a.isNative=an,a.isObject=on,a.isString=sn,a.isTypedArray=ln,a.isUndefined=un,a.last=Ot,a.noop=vn,a.now=hr,a.reduce=dr,a.some=Xt,a.any=Xt,a.contains=Ht,a.detect=ur,a.foldl=dr,a.head=It,a.include=Ht,a.inject=dr,gn(a,function(){var e={};return j(a,function(t,n){a.prototype[n]||(e[n]=t)}),e}(),!1),a.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return sample(t,e)}):sample(this.value())},a.VERSION=bn,pr.placeholder=a,m(["drop","take"],function(e,t){u.prototype[e]=function(n){var i=this.__filtered__;if(i&&!t)return new u(this);n=null==n?1:Yi(Fi(n)||0,0);var r=this.clone();return i?r.__takeCount__=Wi(r.__takeCount__,n):r.__views__.push({size:n,type:e+(r.__dir__<0?"Right":"")}),r},u.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),m(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n!=Mn;u.prototype[e]=function(e,t){var r=this.clone();return r.__iteratees__.push({iteratee:ut(e,t,1),type:n}),r.__filtered__=r.__filtered__||i,r}}),m(["first","last"],function(e,t){var n="take"+(t?"Right":"");u.prototype[e]=function(){return this[n](1).value()[0]}}),m(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");u.prototype[e]=function(){return this.__filtered__?new u(this):this[n](1)}}),m(["pluck","where"],function(e,t){var n=t?"filter":"map",i=t?O:An;u.prototype[e]=function(e){return this[n](i(e))}}),u.prototype.compact=function(){return this.filter(fn)},u.prototype.reject=function(e,t){return e=ut(e,t,1),this.filter(function(t){return!e(t)})},u.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||0>t)?new u(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==yn&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n)},u.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},u.prototype.toArray=function(){return this.take(Gi)},j(u.prototype,function(e,t){var n=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t),r=a[i?"take"+("last"==t?"Right":""):t];r&&(a.prototype[t]=function(){var t=i?[1]:arguments,o=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,c=a instanceof u,d=t[0],h=c||fr(a);h&&n&&"function"==typeof d&&1!=d.length&&(c=h=!1);var p=function(e){return i&&o?r(e,1)[0]:r.apply(yn,A([e],t))},f={func:Yt,args:[p],thisArg:yn},m=c&&!s;if(i&&!o)return m?(a=a.clone(),a.__actions__.push(f),e.call(a)):r.call(yn,this.value())[0];if(!i&&h){a=m?a:new u(this);var g=e.apply(a,t);return g.__actions__.push(f),new l(g,o)}return this.thru(p)})}),m(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?ji:Ci)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=!Zi.spliceObjects&&/^(?:pop|shift|splice)$/.test(e),r=/^(?:join|pop|replace|shift)$/.test(e),o=i?function(){var e=t.apply(this,arguments);return 0===this.length&&delete this[0],e}:t;a.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?o.apply(this.value(),e):this[n](function(t){return o.apply(t,e)})}}),j(u.prototype,function(e,t){var n=a[t];if(n){var i=n.name,r=qi[i]||(qi[i]=[]);r.push({name:t,func:n})}}),qi[it(yn,En).name]=[{name:"wrapper",func:yn}],u.prototype.clone=c,u.prototype.reverse=d,u.prototype.value=h,a.prototype.chain=Wt,a.prototype.commit=zt,a.prototype.concat=lr,a.prototype.plant=Gt,a.prototype.reverse=Vt,a.prototype.toString=Jt,a.prototype.run=a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=$t,a.prototype.collect=a.prototype.map,a.prototype.head=a.prototype.first,a.prototype.select=a.prototype.filter,a.prototype.tail=a.prototype.rest,"function"==typeof define&&"object"==typeof define.amd&&define.amd?(_i._=a,define(function(){return a})):vi&&Ai?Ei?(Ai.exports=a)._=a:vi._=a:_i._=a}.call(this),function(e,t){function n(e,t){var n=null===e||typeof e in r;return n?e===t:!1}var i=e.ko={};i.exportSymbol=function(t,n){for(var i=t.split("."),r=e,o=0;o<i.length-1;o++)r=r[i[o]];r[i[i.length-1]]=n},i.exportProperty=function(e,t,n){e[t]=n},i.utils=new function(){function n(e,t){if("INPUT"!=e.tagName||!e.type)return!1;if("click"!=t.toLowerCase())return!1;var n=e.type.toLowerCase();return"checkbox"==n||"radio"==n}var r=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,o=/MSIE 6/i.test(navigator.userAgent),a=/MSIE 7/i.test(navigator.userAgent),s={},l={},u=/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents";s[u]=["keyup","keydown","keypress"],s.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];for(var c in s){var d=s[c];if(d.length)for(var h=0,p=d.length;p>h;h++)l[d[h]]=c}return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n])},arrayIndexOf:function(e,t){if("function"==typeof e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var i=0,r=e.length;r>i;i++)if(t.call(n,e[i]))return e[i];return null},arrayRemoveItem:function(e,t){var n=i.utils.arrayIndexOf(e,t);n>=0&&e.splice(n,1)},arrayGetDistinctValues:function(e){e=e||[];for(var t=[],n=0,r=e.length;r>n;n++)i.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){e=e||[];for(var n=[],i=0,r=e.length;r>i;i++)n.push(t(e[i]));return n},arrayFilter:function(e,t){e=e||[];for(var n=[],i=0,r=e.length;r>i;i++)t(e[i])&&n.push(e[i]);return n},arrayPushAll:function(e,t){for(var n=0,i=t.length;i>n;n++)e.push(t[n])},emptyDomNode:function(e){for(;e.firstChild;)i.removeNode(e.firstChild)},setDomNodeChildren:function(e,t){i.utils.emptyDomNode(e),t&&i.utils.arrayForEach(t,function(t){e.appendChild(t)})},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){for(var r=n[0],o=r.parentNode,a=0,s=t.length;s>a;a++)o.insertBefore(t[a],r);for(var a=0,s=n.length;s>a;a++)i.removeNode(n[a])}},setOptionNodeSelectionState:function(e,t){navigator.userAgent.indexOf("MSIE 6")>=0?e.setAttribute("selected",t):e.selected=t},getElementsHavingAttribute:function(e,t){if(!e||1!=e.nodeType)return[];var n=[];null!==e.getAttribute(t)&&n.push(e);for(var i=e.getElementsByTagName("*"),r=0,o=i.length;o>r;r++)null!==i[r].getAttribute(t)&&n.push(i[r]);return n},stringTrim:function(e){return(e||"").replace(r,"")},stringTokenize:function(e,t){for(var n=[],r=(e||"").split(t),o=0,a=r.length;a>o;o++){var s=i.utils.stringTrim(r[o]);""!==s&&n.push(s)}return n},stringStartsWith:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},evalWithinScope:function(e,n){return n===t?new Function("return "+e)():new Function("sc","with(sc) { return ("+e+") }")(n)},domNodeIsContainedBy:function(e,t){if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;null!=e;){if(e==t)return!0;e=e.parentNode}return!1},domNodeIsAttachedToDocument:function(e){return i.utils.domNodeIsContainedBy(e,document)},registerEventHandler:function(e,t,i){if("undefined"!=typeof jQuery){if(n(e,t)){var r=i;i=function(e,t){var n=this.checked;t&&(this.checked=t.checkedStateBeforeEvent!==!0),r.call(this,e),this.checked=n}}jQuery(e).bind(t,i)}else if("function"==typeof e.addEventListener)e.addEventListener(t,i,!1);else{if("undefined"==typeof e.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");e.attachEvent("on"+t,function(t){i.call(e,t)})}},triggerEvent:function(t,i){if(!t||!t.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof jQuery){var r=[];n(t,i)&&r.push({checkedStateBeforeEvent:t.checked}),jQuery(t).trigger(i,r)}else if("function"==typeof document.createEvent){if("function"!=typeof t.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var o=l[i]||"HTMLEvents",a=document.createEvent(o);a.initEvent(i,!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(a)}else{if("undefined"==typeof t.fireEvent)throw new Error("Browser doesn't support triggering events");"click"==i&&("INPUT"!=t.tagName||"checkbox"!=t.type.toLowerCase()&&"radio"!=t.type.toLowerCase()||(t.checked=t.checked!==!0)),t.fireEvent("on"+i)}},unwrapObservable:function(e){return i.isObservable(e)?e():e},domNodeHasCssClass:function(e,t){var n=(e.className||"").split(/\s+/);return i.utils.arrayIndexOf(n,t)>=0},toggleDomNodeCssClass:function(e,t,n){var r=i.utils.domNodeHasCssClass(e,t);if(n&&!r)e.className=(e.className||"")+" "+t;else if(r&&!n){for(var o=(e.className||"").split(/\s+/),a="",s=0;s<o.length;s++)o[s]!=t&&(a+=o[s]+" ");e.className=i.utils.stringTrim(a)}},range:function(e,t){e=i.utils.unwrapObservable(e),t=i.utils.unwrapObservable(t);for(var n=[],r=e;t>=r;r++)n.push(r);return n},makeArray:function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(e[n]);return t},isIe6:o,isIe7:a,getFormFields:function(e,t){for(var n=i.utils.makeArray(e.getElementsByTagName("INPUT")).concat(i.utils.makeArray(e.getElementsByTagName("TEXTAREA"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},o=[],a=n.length-1;a>=0;a--)r(n[a])&&o.push(n[a]);return o},parseJson:function(t){return"string"==typeof t&&(t=i.utils.stringTrim(t))?e.JSON&&e.JSON.parse?e.JSON.parse(t):new Function("return "+t)():null},stringifyJson:function(e){if("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(i.utils.unwrapObservable(e))},postJson:function(e,t,n){n=n||{};var r=n.params||{},o=n.includeFields||this.fieldsIncludedWithJsonPost,a=e;if("object"==typeof e&&"FORM"==e.tagName){var s=e;a=s.action;for(var l=o.length-1;l>=0;l--)for(var u=i.utils.getFormFields(s,o[l]),c=u.length-1;c>=0;c--)r[u[c].name]=u[c].value}t=i.utils.unwrapObservable(t);var d=document.createElement("FORM");d.style.display="none",d.action=a,d.method="post";for(var h in t){var p=document.createElement("INPUT");p.name=h,p.value=i.utils.stringifyJson(i.utils.unwrapObservable(t[h])),d.appendChild(p)}for(var h in r){var p=document.createElement("INPUT");p.name=h,p.value=r[h],d.appendChild(p)}document.body.appendChild(d),n.submitter?n.submitter(d):d.submit(),setTimeout(function(){d.parentNode.removeChild(d)},0)}}},i.exportSymbol("ko.utils",i.utils),i.exportSymbol("ko.utils.arrayForEach",i.utils.arrayForEach),i.exportSymbol("ko.utils.arrayFirst",i.utils.arrayFirst),i.exportSymbol("ko.utils.arrayFilter",i.utils.arrayFilter),i.exportSymbol("ko.utils.arrayGetDistinctValues",i.utils.arrayGetDistinctValues),i.exportSymbol("ko.utils.arrayIndexOf",i.utils.arrayIndexOf),i.exportSymbol("ko.utils.arrayMap",i.utils.arrayMap),i.exportSymbol("ko.utils.arrayPushAll",i.utils.arrayPushAll),i.exportSymbol("ko.utils.arrayRemoveItem",i.utils.arrayRemoveItem),i.exportSymbol("ko.utils.fieldsIncludedWithJsonPost",i.utils.fieldsIncludedWithJsonPost),i.exportSymbol("ko.utils.getElementsHavingAttribute",i.utils.getElementsHavingAttribute),i.exportSymbol("ko.utils.getFormFields",i.utils.getFormFields),i.exportSymbol("ko.utils.postJson",i.utils.postJson),i.exportSymbol("ko.utils.parseJson",i.utils.parseJson),i.exportSymbol("ko.utils.registerEventHandler",i.utils.registerEventHandler),i.exportSymbol("ko.utils.stringifyJson",i.utils.stringifyJson),i.exportSymbol("ko.utils.range",i.utils.range),i.exportSymbol("ko.utils.toggleDomNodeCssClass",i.utils.toggleDomNodeCssClass),i.exportSymbol("ko.utils.triggerEvent",i.utils.triggerEvent),i.exportSymbol("ko.utils.unwrapObservable",i.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments),e=n.shift();return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),i.utils.domData=new function(){var e=0,n="__ko__"+(new Date).getTime(),r={};return{get:function(e,n){var r=i.utils.domData.getAll(e,!1);return r===t?t:r[n]},set:function(e,n,r){if(r!==t||i.utils.domData.getAll(e,!1)!==t){var o=i.utils.domData.getAll(e,!0);o[n]=r}},getAll:function(i,o){var a=i[n];if(!a){if(!o)return t;a=i[n]="ko"+e++,r[a]={}}return r[a]},clear:function(e){var t=e[n];t&&(delete r[t],e[n]=null)}}},i.utils.domNodeDisposal=new function(){function e(e,n){var r=i.utils.domData.get(e,o);return r===t&&n&&(r=[],i.utils.domData.set(e,o,r)),r}function n(e){i.utils.domData.set(e,o,t)}function r(t){var n=e(t,!1);if(n){n=n.slice(0);for(var r=0;r<n.length;r++)n[r](t)}i.utils.domData.clear(t),"function"==typeof jQuery&&"function"==typeof jQuery.cleanData&&jQuery.cleanData([t])}var o="__ko_domNodeDisposal__"+(new Date).getTime();return{addDisposeCallback:function(t,n){if("function"!=typeof n)throw new Error("Callback must be a function");e(t,!0).push(n)},removeDisposeCallback:function(t,r){var o=e(t,!1);o&&(i.utils.arrayRemoveItem(o,r),0==o.length&&n(t))},cleanNode:function(e){if(1==e.nodeType||9==e.nodeType){r(e);var t=[];i.utils.arrayPushAll(t,e.getElementsByTagName("*"));for(var n=0,o=t.length;o>n;n++)r(t[n])}},removeNode:function(e){i.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)}}},i.cleanNode=i.utils.domNodeDisposal.cleanNode,i.removeNode=i.utils.domNodeDisposal.removeNode,i.exportSymbol("ko.cleanNode",i.cleanNode),i.exportSymbol("ko.removeNode",i.removeNode),i.exportSymbol("ko.utils.domNodeDisposal",i.utils.domNodeDisposal),i.exportSymbol("ko.utils.domNodeDisposal.addDisposeCallback",i.utils.domNodeDisposal.addDisposeCallback),i.exportSymbol("ko.utils.domNodeDisposal.removeDisposeCallback",i.utils.domNodeDisposal.removeDisposeCallback),function(){function e(e){var t=i.utils.stringTrim(e).toLowerCase(),n=document.createElement("div"),r=t.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!t.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!t.indexOf("<td")||!t.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];for(n.innerHTML=r[1]+e+r[2];r[0]--;)n=n.lastChild;return i.utils.makeArray(n.childNodes)}i.utils.parseHtmlFragment=function(t){return"undefined"!=typeof jQuery?jQuery.clean([t]):e(t)},i.utils.setHtml=function(e,n){if(i.utils.emptyDomNode(e),null!==n&&n!==t)if("string"!=typeof n&&(n=n.toString()),"undefined"!=typeof jQuery)jQuery(e).html(n);else for(var r=i.utils.parseHtmlFragment(n),o=0;o<r.length;o++)e.appendChild(r[o])}}(),i.memoization=function(){function e(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function n(){return e()+e()}function r(e,t){if(e)if(8==e.nodeType){var n=i.memoization.parseMemoText(e.nodeValue);null!=n&&t.push({domNode:e,memoId:n})}else if(1==e.nodeType)for(var o=0,a=e.childNodes,s=a.length;s>o;o++)r(a[o],t)}var o={};return{memoize:function(e){if("function"!=typeof e)throw new Error("You can only pass a function to ko.memoization.memoize()");var t=n();return o[t]=e,"<!--[ko_memo:"+t+"]-->"},unmemoize:function(e,n){var i=o[e];if(i===t)throw new Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return i.apply(null,n||[]),!0}finally{delete o[e]}},unmemoizeDomNodeAndDescendants:function(e,t){var n=[];r(e,n);for(var o=0,a=n.length;a>o;o++){var s=n[o].domNode,l=[s];t&&i.utils.arrayPushAll(l,t),i.memoization.unmemoize(n[o].memoId,l),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),i.exportSymbol("ko.memoization",i.memoization),i.exportSymbol("ko.memoization.memoize",i.memoization.memoize),i.exportSymbol("ko.memoization.unmemoize",i.memoization.unmemoize),i.exportSymbol("ko.memoization.parseMemoText",i.memoization.parseMemoText),i.exportSymbol("ko.memoization.unmemoizeDomNodeAndDescendants",i.memoization.unmemoizeDomNodeAndDescendants),i.subscription=function(e,t){this.callback=e,this.dispose=function(){this.isDisposed=!0,t()}.bind(this),i.exportProperty(this,"dispose",this.dispose)},i.subscribable=function(){var e=[];this.subscribe=function(t,n){var r=n?t.bind(n):t,o=new i.subscription(r,function(){i.utils.arrayRemoveItem(e,o)});return e.push(o),o},this.notifySubscribers=function(t){i.utils.arrayForEach(e.slice(0),function(e){e&&e.isDisposed!==!0&&e.callback(t)})},this.getSubscriptionsCount=function(){return e.length},i.exportProperty(this,"subscribe",this.subscribe),i.exportProperty(this,"notifySubscribers",this.notifySubscribers),i.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)},i.isSubscribable=function(e){return"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},i.exportSymbol("ko.subscribable",i.subscribable),i.exportSymbol("ko.isSubscribable",i.isSubscribable),i.dependencyDetection=function(){var e=[];return{begin:function(){e.push([])},end:function(){return e.pop()},registerDependency:function(t){if(!i.isSubscribable(t))throw"Only subscribable things can act as dependencies";e.length>0&&e[e.length-1].push(t)}}}();var r={undefined:!0,"boolean":!0,number:!0,string:!0};i.observable=function(e){function t(){return arguments.length>0?(t.equalityComparer&&t.equalityComparer(r,arguments[0])||(r=arguments[0],t.notifySubscribers(r)),this):(i.dependencyDetection.registerDependency(t),r)}var r=e;return t.__ko_proto__=i.observable,t.valueHasMutated=function(){t.notifySubscribers(r)},t.equalityComparer=n,i.subscribable.call(t),i.exportProperty(t,"valueHasMutated",t.valueHasMutated),t},i.isObservable=function(e){return null===e||e===t||e.__ko_proto__===t?!1:e.__ko_proto__===i.observable?!0:i.isObservable(e.__ko_proto__)},i.isWriteableObservable=function(e){return"function"==typeof e&&e.__ko_proto__===i.observable?!0:"function"==typeof e&&e.__ko_proto__===i.dependentObservable&&e.hasWriteFunction?!0:!1},i.exportSymbol("ko.observable",i.observable),i.exportSymbol("ko.isObservable",i.isObservable),i.exportSymbol("ko.isWriteableObservable",i.isWriteableObservable),i.observableArray=function(e){if(0==arguments.length&&(e=[]),null!==e&&e!==t&&!("length"in e))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var n=new i.observable(e);return i.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){n[e]=function(){var t=n(),i=t[e].apply(t,arguments);return n.valueHasMutated(),i}}),i.utils.arrayForEach(["slice"],function(e){n[e]=function(){var t=n();return t[e].apply(t,arguments)}}),n.remove=function(e){for(var t=n(),i=[],r=[],o="function"==typeof e?e:function(t){return t===e},a=0,s=t.length;s>a;a++){var l=t[a];o(l)?r.push(l):i.push(l)}return n(i),r},n.removeAll=function(e){if(e===t){var r=n();return n([]),r}return e?n.remove(function(t){return i.utils.arrayIndexOf(e,t)>=0}):[]},n.destroy=function(e){for(var t=n(),i="function"==typeof e?e:function(t){return t===e},r=t.length-1;r>=0;r--){var o=t[r];i(o)&&(t[r]._destroy=!0)}n.valueHasMutated()},n.destroyAll=function(e){return e===t?n.destroy(function(){return!0}):e?n.destroy(function(t){return i.utils.arrayIndexOf(e,t)>=0}):[]},n.indexOf=function(e){var t=n();return i.utils.arrayIndexOf(t,e)},n.replace=function(e,t){var i=n.indexOf(e);i>=0&&(n()[i]=t,n.valueHasMutated())},i.exportProperty(n,"remove",n.remove),i.exportProperty(n,"removeAll",n.removeAll),i.exportProperty(n,"destroy",n.destroy),i.exportProperty(n,"destroyAll",n.destroyAll),i.exportProperty(n,"indexOf",n.indexOf),n},i.exportSymbol("ko.observableArray",i.observableArray),i.dependentObservable=function(e,t,n){function r(){i.utils.arrayForEach(p,function(e){e.dispose()}),p=[]}function o(e){r(),i.utils.arrayForEach(e,function(e){p.push(e.subscribe(a))})}function a(){if(u&&"function"==typeof n.disposeWhen&&n.disposeWhen())return void s.dispose();try{i.dependencyDetection.begin(),l=n.owner?n.read.call(n.owner):n.read()}finally{var e=i.utils.arrayGetDistinctValues(i.dependencyDetection.end());o(e)}s.notifySubscribers(l),u=!0}function s(){if(!(arguments.length>0))return u||a(),i.dependencyDetection.registerDependency(s),l;if("function"!=typeof n.write)throw"Cannot write a value to a dependentObservable unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.";var e=arguments[0];n.owner?n.write.call(n.owner,e):n.write(e)}var l,u=!1;if(e&&"object"==typeof e?n=e:(n=n||{},n.read=e||n.read,n.owner=t||n.owner),"function"!=typeof n.read)throw"Pass a function that returns the value of the dependentObservable";var c="object"==typeof n.disposeWhenNodeIsRemoved?n.disposeWhenNodeIsRemoved:null,d=null;if(c){d=function(){s.dispose()},i.utils.domNodeDisposal.addDisposeCallback(c,d);var h=n.disposeWhen;n.disposeWhen=function(){return!i.utils.domNodeIsAttachedToDocument(c)||"function"==typeof h&&h()}}var p=[];return s.__ko_proto__=i.dependentObservable,s.getDependenciesCount=function(){return p.length},s.hasWriteFunction="function"==typeof n.write,s.dispose=function(){c&&i.utils.domNodeDisposal.removeDisposeCallback(c,d),r()},i.subscribable.call(s),n.deferEvaluation!==!0&&a(),i.exportProperty(s,"dispose",s.dispose),i.exportProperty(s,"evaluate",a),i.exportProperty(s,"getDependenciesCount",s.getDependenciesCount),s},i.dependentObservable.__ko_proto__=i.observable,i.exportSymbol("ko.dependentObservable",i.dependentObservable),function(){function e(i,o,a){a=a||new r,i=o(i);var s="object"==typeof i&&null!==i&&i!==t;if(!s)return i;var l=i instanceof Array?[]:{};return a.save(i,l),n(i,function(n){var r=o(i[n]);switch(typeof r){case"boolean":case"number":case"string":case"function":l[n]=r;break;case"object":case"undefined":var s=a.get(r);l[n]=s!==t?s:e(r,o,a)}}),l}function n(e,t){if(e instanceof Array)for(var n=0;n<e.length;n++)t(n);else for(var i in e)t(i)}function r(){var e=[],n=[];this.save=function(t,r){var o=i.utils.arrayIndexOf(e,t);o>=0?n[o]=r:(e.push(t),n.push(r))},this.get=function(r){var o=i.utils.arrayIndexOf(e,r);return o>=0?n[o]:t}}var o=10;i.toJS=function(t){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;i.isObservable(e)&&o>t;t++)e=e();return e})},i.toJSON=function(e){var t=i.toJS(e);return i.utils.stringifyJson(t)}}(),i.exportSymbol("ko.toJS",i.toJS),i.exportSymbol("ko.toJSON",i.toJSON),function(){i.selectExtensions={readValue:function(e){return"OPTION"==e.tagName?e.__ko__hasDomDataOptionValue__===!0?i.utils.domData.get(e,i.bindingHandlers.options.optionValueDomDataKey):e.getAttribute("value"):"SELECT"==e.tagName?e.selectedIndex>=0?i.selectExtensions.readValue(e.options[e.selectedIndex]):t:e.value},writeValue:function(e,n){if("OPTION"==e.tagName)switch(typeof n){case"string":case"number":i.utils.domData.set(e,i.bindingHandlers.options.optionValueDomDataKey,t),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=n;break;default:i.utils.domData.set(e,i.bindingHandlers.options.optionValueDomDataKey,n),e.__ko__hasDomDataOptionValue__=!0,e.value=""}else if("SELECT"==e.tagName){for(var r=e.options.length-1;r>=0;r--)if(i.selectExtensions.readValue(e.options[r])==n){e.selectedIndex=r;break}}else(null===n||n===t)&&(n=""),e.value=n}}}(),i.exportSymbol("ko.selectExtensions",i.selectExtensions),i.exportSymbol("ko.selectExtensions.readValue",i.selectExtensions.readValue),i.exportSymbol("ko.selectExtensions.writeValue",i.selectExtensions.writeValue),i.jsonExpressionRewriting=function(){function e(e,t){return e.replace(n,function(e,n){return t[n]})}function t(e){return i.utils.arrayIndexOf(o,i.utils.stringTrim(e).toLowerCase())>=0?!1:null!==e.match(r)}var n=/\[ko_token_(\d+)\]/g,r=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,o=["true","false"];return{parseJson:function(t){if(t=i.utils.stringTrim(t),t.length<3)return{};for(var n,r=[],o=null,a="{"==t.charAt(0)?1:0;a<t.length;a++){var s=t.charAt(a);if(null===o)switch(s){case'"':case"'":case"/":o=a,n=s;break;case"{":o=a,n="}";break;case"[":o=a,n="]"}else if(s==n){var l=t.substring(o,a+1);r.push(l);var u="[ko_token_"+(r.length-1)+"]";t=t.substring(0,o)+u+t.substring(a+1),a-=l.length-u.length,o=null}}for(var c={},d=t.split(","),h=0,p=d.length;p>h;h++){var f=d[h],m=f.indexOf(":");if(m>0&&m<f.length-1){var g=i.utils.stringTrim(f.substring(0,m)),v=i.utils.stringTrim(f.substring(m+1));"{"==g.charAt(0)&&(g=g.substring(1)),"}"==v.charAt(v.length-1)&&(v=v.substring(0,v.length-1)),g=i.utils.stringTrim(e(g,r)),v=i.utils.stringTrim(e(v,r)),c[g]=v}}return c},insertPropertyAccessorsIntoJson:function(e){var n=i.jsonExpressionRewriting.parseJson(e),r=[];for(var o in n){var a=n[o];t(a)&&(r.length>0&&r.push(", "),r.push(o+" : function(__ko_value) { "+a+" = __ko_value; }"))}if(r.length>0){var s=r.join("");e=e+", '_ko_property_writers' : { "+s+" } "}return e}}}(),i.exportSymbol("ko.jsonExpressionRewriting",i.jsonExpressionRewriting),i.exportSymbol("ko.jsonExpressionRewriting.parseJson",i.jsonExpressionRewriting.parseJson),i.exportSymbol("ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson",i.jsonExpressionRewriting.insertPropertyAccessorsIntoJson),function(){function n(t,n){try{var r=" { "+i.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(t)+" } ";return i.utils.evalWithinScope(r,null===n?e:n)}catch(o){throw new Error("Unable to parse binding attribute.\nMessage: "+o+";\nAttribute value: "+t)}}function r(e,t,n,i,r){e(t,n,i,r)}var o="data-bind";i.bindingHandlers={},i.applyBindingsToNode=function(e,t,a,s){function l(e){return function(){return d[e]}}function u(){return d}var c=!0;s=s||o;var d;new i.dependentObservable(function(){var o="function"==typeof t?t():t;if(d=o||n(e.getAttribute(s),a),c)for(var h in d)i.bindingHandlers[h]&&"function"==typeof i.bindingHandlers[h].init&&r(i.bindingHandlers[h].init,e,l(h),u,a);for(var h in d)i.bindingHandlers[h]&&"function"==typeof i.bindingHandlers[h].update&&r(i.bindingHandlers[h].update,e,l(h),u,a)},null,{disposeWhenNodeIsRemoved:e}),c=!1},i.applyBindings=function(n,r){if(r&&r.nodeType==t)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node (note: this is a breaking change since KO version 1.05)");r=r||e.document.body;var a=i.utils.getElementsHavingAttribute(r,o);i.utils.arrayForEach(a,function(e){$(e).hasClass("knockout-bound")||(i.applyBindingsToNode(e,null,n),$(e).addClass("knockout-bound"))})},i.exportSymbol("ko.bindingHandlers",i.bindingHandlers),i.exportSymbol("ko.applyBindings",i.applyBindings),i.exportSymbol("ko.applyBindingsToNode",i.applyBindingsToNode)}();var o=["click"];i.utils.arrayForEach(o,function(e){i.bindingHandlers[e]={init:function(t,n,r,o){var a=function(){var t={};return t[e]=n(),t};return i.bindingHandlers.event.init.call(this,t,a,r,o)}}}),i.bindingHandlers.event={init:function(e,t,n,r){var o=t()||{};for(var a in o)!function(){var o=a;"string"==typeof o&&i.utils.registerEventHandler(e,o,function(e){var i,a=t()[o];if(a){var s=n();try{i=a.apply(r,arguments)}finally{i!==!0&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}var l=s[o+"Bubble"]!==!1;l||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})}()}},i.bindingHandlers.submit={init:function(e,t,n,r){if("function"!=typeof t())throw new Error("The value for a submit binding must be a function to invoke on submit");i.utils.registerEventHandler(e,"submit",function(n){var i,o=t();try{i=o.call(r,e)}finally{i!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},i.bindingHandlers.visible={update:function(e,t){var n=i.utils.unwrapObservable(t()),r=!("none"==e.style.display);n&&!r?($(e).removeClass("load-hidden"),e.style.display=""):!n&&r&&(e.style.display="none")}},i.bindingHandlers.enable={update:function(e,t){var n=i.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},i.bindingHandlers.disable={update:function(e,t){i.bindingHandlers.enable.update(e,function(){return!i.utils.unwrapObservable(t())})}},i.bindingHandlers.value={init:function(e,t,n){var r=["change"],o=n().valueUpdate;o&&("string"==typeof o&&(o=[o]),i.utils.arrayPushAll(r,o),r=i.utils.arrayGetDistinctValues(r)),i.utils.arrayForEach(r,function(r){var o=!1;i.utils.stringStartsWith(r,"after")&&(o=!0,r=r.substring("after".length));var a=o?function(e){setTimeout(e,0)}:function(e){e()};i.utils.registerEventHandler(e,r,function(){a(function(){var r=t(),o=i.selectExtensions.readValue(e);if(i.isWriteableObservable(r))r(o);else{var a=n();a._ko_property_writers&&a._ko_property_writers.value&&a._ko_property_writers.value(o)}})})})},update:function(e,t){var n=i.utils.unwrapObservable(t()),r=i.selectExtensions.readValue(e),o=n!=r;if(0===n&&0!==r&&"0"!==r&&(o=!0),o){var a=function(){i.selectExtensions.writeValue(e,n)};a();var s="SELECT"==e.tagName;s&&setTimeout(a,0)}"SELECT"==e.tagName&&(r=i.selectExtensions.readValue(e),r!==n&&i.utils.triggerEvent(e,"change"))}},i.bindingHandlers.options={update:function(e,n,r){if("SELECT"!=e.tagName)throw new Error("options binding applies only to SELECT elements");{var o=i.utils.arrayMap(i.utils.arrayFilter(e.childNodes,function(e){return e.tagName&&"OPTION"==e.tagName&&e.selected
}),function(e){return i.selectExtensions.readValue(e)||e.innerText||e.textContent}),a=e.scrollTop,s=i.utils.unwrapObservable(n());e.value}if(i.utils.emptyDomNode(e),s){var l=r();if("number"!=typeof s.length&&(s=[s]),l.optionsCaption){var u=document.createElement("OPTION");u.innerHTML=l.optionsCaption,i.selectExtensions.writeValue(u,t),e.appendChild(u)}for(var c=0,d=s.length;d>c;c++){var u=document.createElement("OPTION"),h="string"==typeof l.optionsValue?s[c][l.optionsValue]:s[c];h=i.utils.unwrapObservable(h),i.selectExtensions.writeValue(u,h);var p=l.optionsText;optionText="function"==typeof p?p(s[c]):"string"==typeof p?s[c][p]:h,(null===optionText||optionText===t)&&(optionText=""),optionText=i.utils.unwrapObservable(optionText).toString(),"string"==typeof u.innerText?u.innerText=optionText:u.textContent=optionText,e.appendChild(u)}for(var f=e.getElementsByTagName("OPTION"),m=0,c=0,d=f.length;d>c;c++)i.utils.arrayIndexOf(o,i.selectExtensions.readValue(f[c]))>=0&&(i.utils.setOptionNodeSelectionState(f[c],!0),m++);a&&(e.scrollTop=a)}}},i.bindingHandlers.options.optionValueDomDataKey="__ko.bindingHandlers.options.optionValueDomData__",i.bindingHandlers.selectedOptions={getSelectedValuesFromSelectNode:function(e){for(var t=[],n=e.childNodes,r=0,o=n.length;o>r;r++){var a=n[r];"OPTION"==a.tagName&&a.selected&&t.push(i.selectExtensions.readValue(a))}return t},init:function(e,t,n){i.utils.registerEventHandler(e,"change",function(){var e=t();if(i.isWriteableObservable(e))e(i.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(this));else{var r=n();r._ko_property_writers&&r._ko_property_writers.value&&r._ko_property_writers.value(i.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(this))}})},update:function(e,t){if("SELECT"!=e.tagName)throw new Error("values binding applies only to SELECT elements");var n=i.utils.unwrapObservable(t());if(n&&"number"==typeof n.length)for(var r=e.childNodes,o=0,a=r.length;a>o;o++){var s=r[o];"OPTION"==s.tagName&&i.utils.setOptionNodeSelectionState(s,i.utils.arrayIndexOf(n,i.selectExtensions.readValue(s))>=0)}}},i.bindingHandlers.text={update:function(e,n){var r=i.utils.unwrapObservable(n());(null===r||r===t)&&(r=""),"string"==typeof e.innerText?e.innerText=r:e.textContent=r}},i.bindingHandlers.html={update:function(e,t){var n=i.utils.unwrapObservable(t());i.utils.setHtml(e,n)}},i.bindingHandlers.css={update:function(e,t){var n=i.utils.unwrapObservable(t()||{});for(var r in n)if("string"==typeof r){var o=i.utils.unwrapObservable(n[r]);i.utils.toggleDomNodeCssClass(e,r,o)}}},i.bindingHandlers.style={update:function(e,t){var n=i.utils.unwrapObservable(t()||{});for(var r in n)if("string"==typeof r){var o=i.utils.unwrapObservable(n[r]);e.style[r]=o||""}}},i.bindingHandlers.uniqueName={init:function(e,t){t()&&(e.name="ko_unique_"+ ++i.bindingHandlers.uniqueName.currentIndex,i.utils.isIe6&&e.mergeAttributes(document.createElement("<input name='"+e.name+"'/>"),!1))}},i.bindingHandlers.uniqueName.currentIndex=0,i.bindingHandlers.checked={init:function(e,t,n){var r=function(){var r;if("checkbox"==e.type)r=e.checked;else{if("radio"!=e.type||!e.checked)return;r=e.value}var o=t();if("checkbox"==e.type&&i.utils.unwrapObservable(o)instanceof Array){var a=i.utils.arrayIndexOf(i.utils.unwrapObservable(o),e.value);e.checked&&0>a?o.push(e.value):!e.checked&&a>=0&&o.splice(a,1)}else if(i.isWriteableObservable(o))o()!==r&&o(r);else{var s=n();s._ko_property_writers&&s._ko_property_writers.checked&&s._ko_property_writers.checked(r)}};i.utils.registerEventHandler(e,"click",r),"radio"!=e.type||e.name||i.bindingHandlers.uniqueName.init(e,function(){return!0})},update:function(e,t){var n=i.utils.unwrapObservable(t());"checkbox"==e.type?(e.checked=n instanceof Array?i.utils.arrayIndexOf(n,e.value)>=0:n,n&&i.utils.isIe6&&e.mergeAttributes(document.createElement("<input type='checkbox' checked='checked' />"),!1)):"radio"==e.type&&(e.checked=e.value==n,e.value==n&&(i.utils.isIe6||i.utils.isIe7)&&e.mergeAttributes(document.createElement("<input type='radio' checked='checked' />"),!1))}},i.bindingHandlers.attr={update:function(e,n){var r=i.utils.unwrapObservable(n())||{};for(var o in r)if("string"==typeof o){var a=i.utils.unwrapObservable(r[o]);a===!1||null===a||a===t?e.removeAttribute(o):e.setAttribute(o,a.toString())}}},i.templateEngine=function(){this.renderTemplate=function(){throw"Override renderTemplate in your ko.templateEngine subclass"},this.isTemplateRewritten=function(){throw"Override isTemplateRewritten in your ko.templateEngine subclass"},this.rewriteTemplate=function(){throw"Override rewriteTemplate in your ko.templateEngine subclass"},this.createJavaScriptEvaluatorBlock=function(){throw"Override createJavaScriptEvaluatorBlock in your ko.templateEngine subclass"}},i.exportSymbol("ko.templateEngine",i.templateEngine),i.templateRewriting=function(){var e=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi;return{ensureTemplateIsRewritten:function(e,t){t.isTemplateRewritten(e)||t.rewriteTemplate(e,function(e){return i.templateRewriting.memoizeBindingAttributeSyntax(e,t)})},memoizeBindingAttributeSyntax:function(t,n){return t.replace(e,function(){var e=arguments[1],t=arguments[6];t=i.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(t);var r="ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {                     return (function() { return { "+t+" } })()                 })";return n.createJavaScriptEvaluatorBlock(r)+e})},applyMemoizedBindingsToNextSibling:function(e){return i.memoization.memoize(function(t,n){t.nextSibling&&i.applyBindingsToNode(t.nextSibling,e,n)})}}}(),i.exportSymbol("ko.templateRewriting",i.templateRewriting),i.exportSymbol("ko.templateRewriting.applyMemoizedBindingsToNextSibling",i.templateRewriting.applyMemoizedBindingsToNextSibling),function(){function e(e){return e.nodeType?e:e.length>0?e[0]:null}function n(e,t,n,r,a){var s=i.utils.unwrapObservable(r);a=a||{};var l=a.templateEngine||o;i.templateRewriting.ensureTemplateIsRewritten(n,l);var u=l.renderTemplate(n,s,a);if("number"!=typeof u.length||u.length>0&&"number"!=typeof u[0].nodeType)throw"Template engine must return an array of DOM nodes";switch(u&&i.utils.arrayForEach(u,function(e){i.memoization.unmemoizeDomNodeAndDescendants(e,[r])}),t){case"replaceChildren":i.utils.setDomNodeChildren(e,u);break;case"replaceNode":i.utils.replaceDomNodes(e,u);break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+t)}return a.afterRender&&a.afterRender(u,r),u}function r(e,t){var n=i.utils.domData.get(e,a);n&&"function"==typeof n.dispose&&n.dispose(),i.utils.domData.set(e,a,t)}var o;i.setTemplateEngine=function(e){if(e!=t&&!(e instanceof i.templateEngine))throw"templateEngine must inherit from ko.templateEngine";o=e},i.renderTemplate=function(r,a,s,l,u){if(s=s||{},(s.templateEngine||o)==t)throw"Set a template engine before calling renderTemplate";if(u=u||"replaceChildren",l){var c=e(l),d=function(){return!c||!i.utils.domNodeIsAttachedToDocument(c)},h=c&&"replaceNode"==u?c.parentNode:c;return new i.dependentObservable(function(){var t="function"==typeof r?r(a):r,i=n(l,u,t,a,s);"replaceNode"==u&&(l=i,c=e(l))},null,{disposeWhen:d,disposeWhenNodeIsRemoved:h})}return i.memoization.memoize(function(e){i.renderTemplate(r,a,s,e,"replaceNode")})},i.renderTemplateForEach=function(e,t,r,o){return new i.dependentObservable(function(){var a=i.utils.unwrapObservable(t)||[];"undefined"==typeof a.length&&(a=[a]);var s=i.utils.arrayFilter(a,function(e){return r.includeDestroyed||!e._destroy});i.utils.setDomNodeChildrenFromArrayMapping(o,s,function(t){var i="function"==typeof e?e(t):e;return n(null,"ignoreTargetNode",i,t,r)},r)},null,{disposeWhenNodeIsRemoved:o})};var a="__ko__templateSubscriptionDomDataKey__";i.bindingHandlers.template={update:function(e,t,n,o){var a,s=i.utils.unwrapObservable(t()),l="string"==typeof s?s:s.name;if("undefined"!=typeof s.foreach)a=i.renderTemplateForEach(l,s.foreach||[],{templateOptions:s.templateOptions,afterAdd:s.afterAdd,beforeRemove:s.beforeRemove,includeDestroyed:s.includeDestroyed,afterRender:s.afterRender},e);else{var u=s.data;a=i.renderTemplate(l,"undefined"==typeof u?o:u,{templateOptions:s.templateOptions,afterRender:s.afterRender},e)}r(e,a)}}}(),i.exportSymbol("ko.setTemplateEngine",i.setTemplateEngine),i.exportSymbol("ko.renderTemplate",i.renderTemplate),function(){function e(e,n,i){for(var r=[],o=0;o<=n.length;o++)r[o]=[];for(var o=0,a=Math.min(e.length,i);a>=o;o++)r[0][o]=o;for(var o=1,a=Math.min(n.length,i);a>=o;o++)r[o][0]=o;var s,l,u=e.length,c=n.length;for(s=1;u>=s;s++){var d=Math.max(1,s-i),h=Math.min(c,s+i);for(l=d;h>=l;l++)if(e[s-1]===n[l-1])r[l][s]=r[l-1][s-1];else{var p=r[l-1][s]===t?Number.MAX_VALUE:r[l-1][s]+1,f=r[l][s-1]===t?Number.MAX_VALUE:r[l][s-1]+1;r[l][s]=Math.min(p,f)}}return r}function n(e,n,i){var r=n.length,o=i.length,a=[],s=e[o][r];if(s===t)return null;for(;r>0||o>0;){var l=e[o][r],u=o>0?e[o-1][r]:s+1,c=r>0?e[o][r-1]:s+1,d=o>0&&r>0?e[o-1][r-1]:s+1;(u===t||l-1>u)&&(u=s+1),(c===t||l-1>c)&&(c=s+1),l-1>d&&(d=s+1),c>=u&&d>u?(a.push({status:"added",value:i[o-1]}),o--):u>c&&d>c?(a.push({status:"deleted",value:n[r-1]}),r--):(a.push({status:"retained",value:n[r-1]}),o--,r--)}return a.reverse()}i.utils.compareArrays=function(r,o,a){if(a===t)return i.utils.compareArrays(r,o,1)||i.utils.compareArrays(r,o,10)||i.utils.compareArrays(r,o,Number.MAX_VALUE);r=r||[],o=o||[];var s=e(r,o,a);return n(s,r,o)}}(),i.exportSymbol("ko.utils.compareArrays",i.utils.compareArrays),function(){function e(e,t,n){var r=[],o=i.dependentObservable(function(){var e=t(n)||[];r.length>0&&i.utils.replaceDomNodes(r,e),r.splice(0,r.length),i.utils.arrayPushAll(r,e)},null,{disposeWhenNodeIsRemoved:e,disposeWhen:function(){return 0==r.length||!i.utils.domNodeIsAttachedToDocument(r[0])}});return{mappedNodes:r,dependentObservable:o}}i.utils.setDomNodeChildrenFromArrayMapping=function(n,r,o,a){r=r||[],a=a||{};for(var s=i.utils.domData.get(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===t,l=i.utils.domData.get(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],u=i.utils.arrayMap(l,function(e){return e.arrayEntry}),c=i.utils.compareArrays(u,r),d=[],h=0,p=[],f=[],m=null,g=0,v=c.length;v>g;g++)switch(c[g].status){case"retained":var A=l[h];d.push(A),A.domNodes.length>0&&(m=A.domNodes[A.domNodes.length-1]),h++;break;case"deleted":l[h].dependentObservable.dispose(),i.utils.arrayForEach(l[h].domNodes,function(e){p.push({element:e,index:g,value:c[g].value}),m=e}),h++;break;case"added":var y=e(n,o,c[g].value),b=y.mappedNodes;d.push({arrayEntry:c[g].value,domNodes:b,dependentObservable:y.dependentObservable});for(var w=0,E=b.length;E>w;w++){var _=b[w];f.push({element:_,index:g,value:c[g].value}),null==m?n.firstChild?n.insertBefore(_,n.firstChild):n.appendChild(_):m.nextSibling?n.insertBefore(_,m.nextSibling):n.appendChild(_),m=_}}i.utils.arrayForEach(p,function(e){i.cleanNode(e.element)});var k=!1;if(!s){if(a.afterAdd)for(var g=0;g<f.length;g++)a.afterAdd(f[g].element,f[g].index,f[g].value);if(a.beforeRemove){for(var g=0;g<p.length;g++)a.beforeRemove(p[g].element,p[g].index,p[g].value);k=!0}}k||i.utils.arrayForEach(p,function(e){e.element.parentNode&&e.element.parentNode.removeChild(e.element)}),i.utils.domData.set(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult",d)}}(),i.exportSymbol("ko.utils.setDomNodeChildrenFromArrayMapping",i.utils.setDomNodeChildrenFromArrayMapping),i.jqueryTmplTemplateEngine=function(){this.jQueryTmplVersion=function(){return"undefined"!=typeof jQuery&&jQuery.tmpl?jQuery.tmpl.tag?jQuery.tmpl.tag.tmpl&&jQuery.tmpl.tag.tmpl.open&&jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")>=0?3:2:1:0}(),this.getTemplateNode=function(e){var t=document.getElementById(e);if(null==t)throw new Error("Cannot find template with ID="+e);return t};var e="__ko_apos__",t=new RegExp(e,"g");this.renderTemplate=function(e,n,i){if(i=i||{},0==this.jQueryTmplVersion)throw new Error("jquery.tmpl not detected.\nTo use KO's default template engine, reference jQuery and jquery.tmpl. See Knockout installation documentation for more details.");if(1==this.jQueryTmplVersion){var r='<script type="text/html">'+this.getTemplateNode(e).text+"</script>",o=jQuery.tmpl(r,n),a=o[0].text.replace(t,"'");return jQuery.clean([a],document)}if(!(e in jQuery.template)){var s=this.getTemplateNode(e).text;jQuery.template(e,s)}n=[n];var l=jQuery.tmpl(e,n,i.templateOptions);return l.appendTo(document.createElement("div")),jQuery.fragments={},l},this.isTemplateRewritten=function(e){return e in jQuery.template?!0:this.getTemplateNode(e).isRewritten===!0},this.rewriteTemplate=function(t,n){var r=this.getTemplateNode(t),o=n(r.text);1==this.jQueryTmplVersion&&(o=i.utils.stringTrim(o),o=o.replace(/([\s\S]*?)(\${[\s\S]*?}|{{[\=a-z][\s\S]*?}}|$)/g,function(){var t=arguments[1],n=arguments[2];return t.replace(/\'/g,e)+n})),r.text=o,r.isRewritten=!0},this.createJavaScriptEvaluatorBlock=function(e){return 1==this.jQueryTmplVersion?"{{= "+e+"}}":"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){document.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},i.exportProperty(this,"addTemplate",this.addTemplate),this.jQueryTmplVersion>1&&(jQuery.tmpl.tag.ko_code={open:(this.jQueryTmplVersion<3?"_":"__")+".push($1 || '');"})},i.jqueryTmplTemplateEngine.prototype=new i.templateEngine,i.setTemplateEngine(new i.jqueryTmplTemplateEngine),i.exportSymbol("ko.jqueryTmplTemplateEngine",i.jqueryTmplTemplateEngine)}(window),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.autosize=n.exports}}(this,function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),c="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),i()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,d=t,u&&(e.style.overflowY=t),i()}function i(){var t=e.style.height,i=window.pageYOffset,r=document.body.scrollTop,a=e.style.height,s=o.lineCount;o.lineCount=e.value.split(/\r|\r\n|\n/).length,o.lineCount<s&&(e.style.height="auto");var l=e.scrollHeight+c;if(0===e.scrollHeight)return void(e.style.height=a);if(e.style.height=l+"px",window.navigator){var u=/IEMobile\/(\d+\.?(\d+)?)/.exec(window.navigator.userAgent);u||(document.documentElement.scrollTop=i,document.body.scrollTop=r)}var h=window.getComputedStyle(e,null);if(h.height!==e.style.height){if("visible"!==d)return void n("visible")}else if("hidden"!==d)return void n("hidden");if(t!==e.style.height){var p=document.createEvent("Event");p.initEvent("autosize:resized",!0,!1),e.dispatchEvent(p)}}var r=void 0===arguments[1]?{}:arguments[1],a=r.setOverflowX,s=void 0===a?!0:a,l=r.setOverflowY,u=void 0===l?!0:l;if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!e.hasAttribute("data-autosize-on")){var c=null,d="hidden",h=function(t){e.removeEventListener("input",i),e.removeEventListener("keyup",i),e.removeAttribute("data-autosize-on"),e.removeEventListener("autosize:destroy",h),Object.keys(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",h),e.addEventListener("input",i),e.addEventListener("autosize:update",i),e.setAttribute("data-autosize-on",!0),u&&(e.style.overflowY="hidden"),s&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),t()}}function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:destroy",!0,!1),e.dispatchEvent(t)}}function r(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:update",!0,!1),e.dispatchEvent(t)}}var o=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(o=function(e){return e},o.destroy=function(e){return e},o.update=function(e){return e}):(o=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},o.lineCount=0,o.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},o.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e}),t.exports=o}),function(e){"use strict";e.Elevator=function(e){function t(e,t,n,i){return e/=i/2,1>e?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)}function n(e,t){for(var n in t){var i=void 0===e[n]&&"function"!=typeof n;i&&(e[n]=t[n])}return e}function i(e){g||(g=e);var n=e-g,r=t(n,v,-v,f);window.scrollTo(0,r),f>n?p=requestAnimationFrame(i):a()}function r(){return window.requestAnimationFrame&&window.Audio&&window.addEventListener}function o(){g=null,v=null,A=!1}function a(){o(),c&&(c.pause(),c.currentTime=0),d&&d.play()}function s(){A&&(cancelAnimationFrame(p),o(),c&&(c.pause(),c.currentTime=0),window.scrollTo(0,0))}function l(e){e.addEventListener?e.addEventListener("click",y.elevate,!1):e.attachEvent("onclick",function(){document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scroll(0,0)})}function u(e){h=document.body;var t={duration:void 0,mainAudio:!1,endAudio:!1,preloadAudio:!0,loopAudio:!0};e=n(e,t),e.element&&l(e.element),r()&&(e.duration&&(m=!0,f=e.duration),window.addEventListener("blur",s,!1),e.mainAudio&&(c=new Audio(e.mainAudio),c.setAttribute("preload",e.preloadAudio),c.setAttribute("loop",e.loopAudio)),e.endAudio&&(d=new Audio(e.endAudio),d.setAttribute("preload","true")))}var c,d,h=null,p=null,f=null,m=!1,g=null,v=null,A=!1,y=this;this.elevate=function(){A||(A=!0,v=document.documentElement.scrollTop||h.scrollTop,m||(f=1.5*v),requestAnimationFrame(i),c&&c.play())},u(e)}}(window),function(e,t,n){n.config={isMobile:function(){return e.detectMobileBrowser()},isMobileView:function(){return document.querySelector("[data-mobile-view]")}}}(window,window.document,window.FL=window.FL||{}),function(e){"use strict";e.detectMobileBrowser=function(){var t=e.navigator.userAgent||e.navigator.vendor||e.opera,n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,i=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return n.test(t)||i.test(t.substr(0,4))}}(window),function(e){e.thousandsSeparator=function(e,t){return e=e||0,e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t||",")}}(window),function(e){e.preventScroll=function(e,t){var n=e.wheelDelta||-e.detail;if(n){var i=n>0,r=0===t.scrollTop,o=t.scrollTop===t.scrollHeight-t.offsetHeight;return i&&r||!i&&o}}}(window);var helpers={pluralize:function(e,t){return[e,helpers.pluralizedWord(e,t)].join(" ")},pluralizeFormatted:function(e,t){var n=window.thousandsSeparator(e);return[n,helpers.pluralizedWord(e,t)].join(" ")},pluralizedWord:function(e,t){var n=0==e||e>1?t+"s":t;return n},truncate:function(e,t){return e.length>t?e.slice(0,t-2)+"&hellip;":e},numberWithDelimiter:function(e,t){e+="",t=t||",";var n=e.split(".");return n[0]=n[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t),n.join(".")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},withSpacePrefix:function(e){return" "+e},delay:function(){var e=0;return function(t,n){clearTimeout(e),e=setTimeout(n,t)}}(),htmlEscape:function(e){return $("<div/>").text(e).html()},setCursorPosition:function(e,t){if(e=$(e)[0],e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}},ScrollWatcher=function(e,t){this.scrollObserver=function(){this._reachedScrollThreshold()&&t()},this._handler=_.bind(this.scrollObserver,this),this._distanceToPageBottom=function(){return $(document).height()-$(window).scrollTop()-(window.innerHeight||$(window).height())},this._reachedScrollThreshold=function(){return this._distanceToPageBottom()<=e},this.enable=function(){$(window).bind("scroll resize",this._handler)},this.disable=function(){$(window).unbind("scroll resize",this._handler)},this.fireIfReached=function(){this.scrollObserver()},this.enable()};!function(e){e.jQuery.extend(jQuery.tmpl.tag,{pluralize:{open:"if($notnull_1){_.push($.encode(helpers.pluralize($1)));}"},truncate:{open:"if($notnull_1){_.push($.encode(helpers.truncate($1)));}"},html:{open:"if($notnull_1){_.push($1);}"},linkified_html:{open:"if($notnull_1){_.push(linkify(helpers.htmlEscape($1a)));}"}})}(window);var Gorilla={main:function(e){$(e)}};Gorilla.KVO=new JS.Module({get:function(e){return this[e]},set:function(e,t){var n=this.get(e);n!=t&&(this[e]=t,this.fire(this._changedEventName(e),[t,n]))},incr:function(e){var t=this.get(e)+1;return this.set(e,t),t},fire:function(e,t){$(this).trigger(e,t),$(this).trigger("*",e,t)},observe:function(e,t){this._withNecessarySubscriptions(e,function(e,n){$(e).bind(n,t)})},stopObserving:function(e,t){this._withNecessarySubscriptions(e,function(e,n){$(e).unbind(n,t)})},_withNecessarySubscriptions:function(e,t){var n=this;$.each(this._necessarySubscriptionsFor(e),function(e,i){var r=n,o=i.split(".");$.each(o,function(e,t){e!=o.length-1&&(r=r.get(t))}),t(r,o[o.length-1])}.bind($(this)))},_necessarySubscriptionsFor:function(e){var t=[];return JS.isFn(this[e])?$.each(this[e].dependentKeys,function(e,n){t.push(this._changedEventName(n))}.bind(this)):t.push(this._changedEventName(e)),t},_changedEventName:function(e){return e},_bindObservers:function(){for(var e in this)JS.isFn(this[e])&&null!=this[e].observedProperties&&$.each(this[e].observedProperties,function(t,n){this.observe(n,this.method(e))}.bind(this))}}),Function.prototype.property=function(){return this.dependentKeys=arguments,this},Function.prototype.observes=function(){var e=arguments[0]instanceof Array?arguments[0]:[arguments[0]];return this.observedProperties=e,this},Function.prototype.bind=function(e){return JS.bind(this,e)},Array.prototype.toCollection=function(){return new JS.Enumerable.Collection(this)},Gorilla.Model=new JS.Class({extend:{include:Gorilla.KVO,refresh:function(){this.get("dataSource").refresh(this)},records:[],addSavedRecord:function(e){this.records.push(e)},allRecords:function(){return this.get("records").toCollection()}},include:Gorilla.KVO,properties:[],dirty:!1,resourceName:"",initialize:function(){this._setAttributes(arguments[0]),this._dirtynessObserver=function(){this.set("dirty",!0)}.observes(this.properties),this._bindObservers()},save:function(){this.get("dirty")&&$.post("/"+this.resourceName,this._saveProperties())},_serialize:function(){var e={};return $.each(this.properties,function(t,n){e[n]=this.get(n)}.bind(this)),Object.toJSONString(e)},_saveProperties:function(){var e={};return e[this.resourceName]=this._serialize(),e},_setAttributes:function(e){if(e instanceof Object)for(var t in e)this.set(t,e[t])}}),Gorilla.Model.Paginator=new JS.Class({include:Gorilla.KVO,loading:!1,model:null,url:null,totalPages:0,currentPage:-1,pages:[],initialize:function(e){this.set("originalCurrentPage",this.get("currentPage"));for(var t in e)this.set(t,e[t]);this._bindObservers()},loadNextPage:function(){if(!this.get("loading")){this.set("loading",!0);var e=this.get("currentPage")+1,t=$.ajax({url:this.get("url"),dataType:"json",data:{page:e},success:function(t){var n=this._initializeModelObjects(t);this.set("currentPage",e),this.get("pages").push(n),this.fire("pageLoaded",[n])}.bind(this),error:function(e){this.fire("pageLoadFailed",e)}.bind(this),complete:function(){this.set("loading",!1)}.bind(this)});this.set("xhr",t)}},reset:function(){this.get("xhr")&&this.get("xhr").abort(),this.set("xhr",null),this.set("loading",!1),this.set("currentPage",this.get("originalCurrentPage")),this.set("pages",[])},maybeLoadNextPage:function(){this.reachedLastPage()||this.loadNextPage()},reachedLastPage:function(){return this.get("currentPage")==this.get("totalPages")-1},setReachedLastPage:function(){this.set("totalPages",this.get("currentPage")+1)},_initializeModelObjects:function(e){var t=this.get("model");return e.toCollection().map(function(e){return new t(e)}.bind(this))}}),Gorilla.Controller=new JS.Class({include:Gorilla.KVO,initialize:function(){this._bindObservers()}}),Gorilla.ContentController=new JS.Class(Gorilla.Controller,{content:null,_contentObserver:function(e,t,n,i){this.fire(t,n,i)},_contentChangeObserver:function(e,t,n){n&&JS.isFn(n.stopObserving)&&n.stopObserving("*",this.method("_contentObserver")),t.observe("*",this.method("_contentObserver"))}.observes("content")}),Gorilla.CollectionController=new JS.Class(Gorilla.ContentController,{}),Gorilla.View=new JS.Class({extend:{outletFor:function(e){var t=new JS.Class(this,{outletFor:e});return t}},include:Gorilla.KVO,element:null,outletFor:null,owner:"body",emptyElement:"<div></div>",outlets:[],initialize:function(){this.set("element",$(this.emptyElement)),null!=this.get("outletFor")&&this._setupOutlet(arguments[0]),this._initializeOutlets(),this._bindObservers()},_setupOutlet:function(){$(this.get("owner")).find(this.get("outletFor")).replaceWith(this.get("element"))},_initializeOutlets:function(){$.each(this.get("outlets"),function(e,t){var n=new JS.Class(this.get(t),{owner:this.get("element")});this.set(t,new n)}.bind(this))}}),Gorilla.BaseView=new JS.Class(Gorilla.View,{initialize:function(e){this.callSuper(),this.set("controller",e.controller),this.set("element",e.element),this.set("enable",e.enable||this.enable),this.set("disable",e.disable||this.disable);for(var t in e.events)e.element.bind(t,function(){return e.controller[e.events[t]]()})},_isEnabledObserver:function(e,t){t?this.get("enable").call(this,this.get("element")):this.get("disable").call(this,this.get("element"))}.observes("isEnabled"),enable:function(){},disable:function(){},chain:function(e,t){return t.controller=this.get("controller"),t.element=this.get("element"),new e(t)}}),Gorilla.BooleanView=new JS.Class(Gorilla.BaseView,{initialize:function(e){this.callSuper(e),this.set("property",e.property),this.set("isEnabled",this.deriveBoolean(e.controller.get(e.property))),e.controller.observe(e.property,this.method("_controllerPropertyObserver"))},_controllerPropertyObserver:function(e,t){this.set("isEnabled",this.deriveBoolean(t))},deriveBoolean:function(e){return e}}),Gorilla.ToggleView=new JS.Class(Gorilla.BooleanView,{initialize:function(e){this.callSuper(e),this.set("isEnabled",e.initiallyEnabled)},deriveBoolean:function(){return!this.get("isEnabled")}}),Gorilla.Visibility=new JS.Module({enable:function(e){e.show()},disable:function(e){e.hide()}}),Gorilla.InverseBooleanView=new JS.Class(Gorilla.BooleanView,{deriveBoolean:function(e){return!e}}),Gorilla.InverseVisibilityView=new JS.Class(Gorilla.InverseBooleanView,{include:Gorilla.Visibility}),Gorilla.BooleanVisibilityView=new JS.Class(Gorilla.BooleanView,{include:Gorilla.Visibility}),Gorilla.VisibilityToggleView=new JS.Class(Gorilla.ToggleView,{include:Gorilla.Visibility,initialize:function(e){e.property=e.element.attr("data-visibility-toggle"),e.initiallyEnabled="none"!=e.element.css("display"),this.callSuper(e)}}),Gorilla.CheckBoxView=new JS.Class(Gorilla.BooleanView,{enable:function(e){e.prop("checked",!0)},disable:function(e){e.prop("checked",!1)}}),Gorilla.Dialog={},Gorilla.Dialog.setup=function(e){var t=$("#"+e),n=$("form",t),i=$(".ui-dialog-title .step_indicator",t),r=$(".proceed_button",n),o=$(".step[data-step=1]",n),a=$("input:radio",o),s=$("input",n),l=$(".footer .cancel",n),u=$(".footer .back",n);t.dialog({title:$(".dialog_title",t).html(),modal:!0,autoOpen:!1,width:475,height:o.attr("data-dialog-height"),dialogClass:"flag",draggable:!1,resizable:!1});{var c=new(Gorilla[t.attr("data-controller")])({form:n,dialog:t,closeDialogButton:l});$("[data-visibility-toggle]").map(function(e,t){return new Gorilla.VisibilityToggleView({controller:c,element:$(t)})}),new Gorilla.Dialog.ProceedButtonClasses({controller:c,property:"valid",element:r,events:{click:"proceedButtonClicked"}}).chain(Gorilla.Dialog.ProceedButtonHtml,{property:"onLastStep",normalHtml:"Next &raquo;",lastHtml:"Report"}),new Gorilla.Dialog.DialogView({controller:c,element:t,events:{dialogclose:"dialogClosed"}}),new Gorilla.Dialog.FormView({controller:c,property:"active",element:n}),new Gorilla.Dialog.InputView({controller:c,property:"active",element:s})}a.click(function(){return c.pathButtonClicked($(this))});$(".step",t).map(function(e,t){return new Gorilla.Dialog.StepView({controller:c,element:$(t)})}),new Gorilla.BooleanVisibilityView({controller:c,property:"canGoBack",element:u,events:{click:"backButtonClicked"}}),new Gorilla.Dialog.StepIndicatorView({controller:c,element:i});return c},Gorilla.Dialog.DialogView=new JS.Class(Gorilla.BaseView,{initialize:function(e){this.callSuper(e),e.controller.observe("active",this.method("_activeObserver")),e.controller.observe("currentStep",this.method("_currentStepObserver"))},_activeObserver:function(e,t){this.set("isEnabled",t)},_currentStepObserver:function(){this.updateHeight()},updateHeight:function(){var e=this.get("controller").getCurrentStepElement().attr("data-dialog-height");e!=this.get("element").dialog("option","height")&&(this.get("controller").set("resizing",!0),this.get("element").dialog("close"),this.get("element").dialog("option",{height:e}),this.get("isEnabled")&&this.get("element").dialog("open"),this.get("controller").set("resizing",!1))},enable:function(e){e.dialog("open")},disable:function(e){e.dialog("close")}}),Gorilla.Dialog.ProceedButtonClasses=new JS.Class(Gorilla.BooleanView,{enable:function(e){e.removeClass("inactive").addClass("overlay")},disable:function(e){e.addClass("inactive").removeClass("overlay")}}),Gorilla.Dialog.ProceedButtonHtml=new JS.Class(Gorilla.BooleanView,{initialize:function(e){this.set("normalHtml",e.normalHtml),this.set("lastHtml",e.lastHtml),this.callSuper(e)},enable:function(e){e.html(this.get("lastHtml"))},disable:function(e){e.html(this.get("normalHtml"))}}),Gorilla.Dialog.FormView=new JS.Class(Gorilla.BooleanView,{disable:function(e){e.resetForm()}}),Gorilla.Dialog.InputView=new JS.Class(Gorilla.BooleanView,{enable:function(e){e.blur()}}),Gorilla.Dialog.StepView=new JS.Class(Gorilla.BooleanView,{include:Gorilla.Visibility,initialize:function(e){e.property="currentStep",this.set("path",e.element.attr("data-path")),this.set("step",e.element.attr("data-step")),this.callSuper(e)},deriveBoolean:function(e){return(this.isMyPathActive()||this.isFirstStep())&&this.isMyStepActive(e)},isMyPathActive:function(){return this.get("controller").get("activePath")==this.get("path")},isMyStepActive:function(e){return e==this.get("step")},isFirstStep:function(){return 1==this.get("step")}}),Gorilla.Dialog.StepIndicatorView=new JS.Class(Gorilla.BaseView,{include:Gorilla.Visibility,initialize:function(e){this.callSuper(e),e.controller.observe("currentStep",this.method("_stepObserver")),e.controller.observe("totalSteps",this.method("_stepObserver"))
},_stepObserver:function(){this.set("element",$(this.get("element").selector)),this.updateSteps(),this.set("isEnabled",this.get("controller").get("totalSteps")>1)},updateSteps:function(){var e=this.get("controller").get("currentStep"),t=this.get("controller").get("totalSteps");$(".current_step",this.get("element")).text(e),$(".total_steps",this.get("element")).text(t)}}),Gorilla.Dialog.Controller=new JS.Class(Gorilla.Controller,{initialize:function(e){this.callSuper(),this.set("dialog",e.dialog),this.set("form",e.form),this.reset(),e.closeDialogButton.bind("click",this.method("_closeDialogButtonClickObserver")),e.form.ajaxForm({beforeSend:function(){this.set("isLoading",!0),this.set("loadingState","loading")}.bind(this),complete:function(e){200===e.status?this.set("loadingState","success"):this.set("loadingState","error"),this.set("isLoading",!1)}.bind(this)})},_loadingStateObserver:function(e,t){switch(t){case"success":this.close();break;case"error":alert("Oops - something went wrong. Sorry about that. Give it another try in a minute.")}}.observes("loadingState"),open:function(){this.set("active",!0)},_closeDialogButtonClickObserver:function(){return this.close(),!1},pathButtonClicked:function(e){this.set("totalSteps",e.attr("data-steps")),this.set("activePath",e.val())},backButtonClicked:function(){return this.set("currentStep",this.get("currentStep")-1),!1},proceedButtonClicked:function(){return this.get("valid")&&this.proceed(),!1},proceed:function(){this.get("currentStep")==this.get("totalSteps")?this.get("form").submit():this.set("currentStep",this.get("currentStep")+1)},validateCurrentStep:function(){this.set("valid",this.isCurrentStepValid())},isCurrentStepValid:function(){return!0},dialogClosed:function(){this.get("resizing")||this.close()},close:function(){this.set("active",!1),this.reset()},reset:function(){this.set("valid",!1),this.set("activePath",null),this.set("totalSteps",1),this.set("currentStep",1),this.set("onLastStep",!0),this.set("loadingState",null),this.set("canGoBack",!1)},getCurrentStepElement:function(){return 1==this.get("currentStep")?this.get("dialog").find(".step[data-step=1]"):this.get("dialog").find(".step[data-path="+this.get("activePath")+"]").filter("[data-step="+this.get("currentStep")+"]")},_currentStepValidator:function(){this.validateCurrentStep()}.observes(["activePath","currentStep"]),_canGoBackCalculator:function(){var e=this.get("currentStep")>1&&"loading"!=this.get("loadingState");this.set("canGoBack",e)}.observes(["currentStep","loadingState"]),_onLastStepCalculator:function(){var e=this.get("currentStep")==this.get("totalSteps");this.set("onLastStep",e)}.observes(["currentStep","totalSteps"])}),Gorilla.Dialog.Manager={},Gorilla.Dialog.Manager.dialogControllers={},Gorilla.Dialog.Manager.openDialog=function(e,t){var n=this.dialogControllers[e];n||(n=this.dialogControllers[e]=Gorilla.Dialog.setup(e)),n.open(t)},Gorilla.Dialog.Manager.addHooksFor=function(e){$("[data-opens-dialog]",e).each(function(){var e=$(this),t=e.attr("data-opens-dialog");e.click(function(){return Gorilla.Dialog.Manager.openDialog(t,e),!1})})},$(function(){Gorilla.Dialog.Manager.addHooksFor(document)}),ko.bindingHandlers.keydown={init:function(e,t,n,i){$(e).keydown(function(){t().apply(i,[$(this).val()])})}},ko.bindingHandlers.keyup={init:function(e,t,n,i){$(e).keyup(function(){t().apply(i,[$(this).val()])})}},ko.bindingHandlers.hotkey={init:function(e,t,n,i){var r=_.isArray(t())?t():[t()];_.each(r,function(t){$(e).bind("keydown",t.key,function(){return t.action.apply(i,[this,$(this).val()]),!1})})}},ko.bindingHandlers.disableRightClick={init:function(e){$(e).bind("contextmenu",function(){return!1})}},ko.bindingHandlers.fadeIn={init:function(e,t){t();$(e).hide()},update:function(e,t,n){var i=t(),r=n(),o=ko.utils.unwrapObservable(i),a=r.duration||400;o&&$(e).fadeIn(a)}},ko.bindingHandlers.slideFade={init:function(e,t){var n=ko.utils.unwrapObservable(t()),i=!("none"==e.style.display);!n&&i&&(e.style.display="none")},update:function(e,t,n){var i=ko.utils.unwrapObservable(t()),r=!("none"==e.style.display),o=n().duration||400;i&&!r?($(e).removeClass("load-hidden"),$(e).animate({opacity:"toggle",height:"toggle"},o)):!i&&r&&$(e).animate({opacity:"toggle",height:"toggle"},o)}},ko.bindingHandlers.timeAgo={update:function(e,t,n){var i=t(),r=(n(),ko.utils.unwrapObservable(i));r&&$(e).text(distanceOfTimeInWords(new Date(r),new Date)+" ago")}};var core_ext=function(){var e=function(e){return e.replace(/^\s+|\s+$/g,"")},t=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t},n=function(e,t){for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n};return{strip:e,to_a:t,map:n}}(),asuka={};!function(){var e=function(){var e=[],t=function(t){e.push(t)},n=function(){return 0===e.length},i=function(t){if(n())return[];t&&t(e);var i=e;return e=[],i};return{push:t,is_empty:n,flush:i}};asuka.accumulator=e}(),function(){var e=function(e,t,n){return["<"+e+">",t,"</"+e+">"].join(n?"\n":"")},t=function(t,n){return e(t,n,!0)},n=function(e,t){t=t||asuka.parser();var n=function(){return core_ext.map(i(),function(e){return e.to_html()}).join("\n")},i=function(){return r()},r=function(){return t.parse(e)};return{to_html:n}},i=function(t,n){var i=function(){return e(n,t.join("<br/>\n"))};return{to_html:i}},r=function(e){return i(e,"p")},o=function(e){return i(e,"blockquote")},a=function(e,n){var i=function(){return t(n,core_ext.map(e,function(e){return["<li>",e,"</li>"].join("")}).join("\n"))};return{to_html:i}},s=function(e){return a(e,"ul")},l=function(){var e=function(){return"<hr/>"};return{to_html:e}},u=function(t,n){var i="h"+n,r=function(){return e(i,t)};return{to_html:r}};asuka.document=n,asuka.block=i,asuka.paragraph=r,asuka.blockquote=o,asuka.list=a,asuka.unordered_list=s,asuka.rule=l,asuka.header=u}(),function(){var e=function(){var e=function(){return["bold","italic","named_link"]},t=function(e){return e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>")},n=function(e){return e.replace(/\*([^*]+)\*/g,"<em>$1</em>")},i=function(e,t,n){n=n||{},n.href=core_ext.strip(t),n.target="_blank",n.rel="noreferrer noopener";var i=core_ext.to_a(n);return i.sort(function(e,t){return e[0]<t[0]?-1:1}),i=core_ext.map(i,function(e){return[" ",e[0],'="',e[1],'"'].join("")}).join(""),["<a",i,">",core_ext.strip(e),"</a>"].join("")},r=function(e){return e.replace(/\[([^\]]+?)\]\[\s*(https?:\/\/[^\]\s]+)\s*\]/g,function(e,t,n){return i(t,n)}).replace(/\[\s*(https?:\/\/[^\]\s]+)\s*\]\[([^\]]+?)\]/g,function(e,t,n){return i(n,t)})},o=function(e){var t=e.match(/(.*?)([.,;!?)]*)$/);return t.slice(1)},a=function(e){return e.replace(/(.*?)(https?:\/\/[^\s]+)/g,function(e,t,n){var r=o(n),a=r[0],s=r[1];if(t.match(/href="$/))return e;if(a.length>50){var l=a.slice(0,50)+"&hellip;";return t+i(l,a,{title:a})+s}return t+i(a,a)+s})};return{default_steps:e,bold:t,italic:n,named_link:r,auto_link:a,make_link:i}},t=function(){var e=function(){return["strip","html_escape"]},t=function(e){return core_ext.strip(e)},n=function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/>/g,"&gt;").replace(/</g,"&lt;")};return{default_steps:e,strip:t,html_escape:n}};asuka.formatter=e,asuka.pre_formatter=t}(),function(){var e=function(e,t){e=e||{default_steps:function(){return[]}},t=t||e.default_steps();var n=function(n){for(var i=n,r=0;r<t.length;r++)i=e[t[r]](i);return i},i=function(e){return void 0!==e&&(t=e),t};return{format:n,steps:i}};asuka.line_formatter=e,asuka.DEFAULT_LINE_FORMATTER=e(asuka.formatter()),asuka.DEFAULT_PRE_LINE_FORMATTER=e(asuka.pre_formatter())}(),function(){var e=function(){},t=function(e){e=e||[];var t=function(t){return void 0!==t&&(e=t),e},n=function(t){for(var n=0;n<e.length;n++)if(e[n].match(t))return e[n];return null};return{rules:t,rule_for:n}},n=function(){var t=function(e){return""===e};return{match:t,transition:e,process:e}},i=function(e,t,n){var i=function(){return!0},r=function(){t.push(asuka.paragraph(e.flush()))},o=function(t){e.push(n.format(t))};return{match:i,transition:r,process:o}},r=function(e,t,n){var i=function(e){return e.match(/^&gt; /)},r=function(){t.push(asuka.blockquote(e.flush()))},o=function(t){e.push(n.format(t.slice(5)))};return{match:i,transition:r,process:o}},o=function(e,t,n){var i=function(e){return e.match(/^\* /)},r=function(){t.push(asuka.unordered_list(e.flush()))},o=function(t){e.push(n.format(t.slice(2)))};return{match:i,transition:r,process:o}},a=function(t,n){var i=function(e){return e.match(/^(-{3,}|_{3,})$/)},r=function(){n.push(asuka.rule())};return{match:i,transition:e,process:r}},s=function(t,n,i){var r=function(e){return e.match(/^\#{1,6} /)},o=function(e){var t=e.match(/^\#{1,6} /)[0].length-1;n.push(asuka.header(i.format(e.slice(t+1)),t))};return{match:r,transition:e,process:o}};asuka.rules={},asuka.rules.set=t,asuka.rules.initial=n,asuka.rules.paragraph=i,asuka.rules.blockquote=r,asuka.rules.unordered_list=o,asuka.rules.rule=a,asuka.rules.header=s}(),function(){var e=function(e,t){e=e||asuka.DEFAULT_LINE_FORMATTER,t=t||asuka.DEFAULT_PRE_LINE_FORMATTER;var n=function(e){return r(e.split?e.split("\n"):e)},i=function(){return[asuka.rules.initial,asuka.rules.unordered_list,asuka.rules.blockquote,asuka.rules.rule,asuka.rules.header,asuka.rules.paragraph]},r=function(n){for(var r,o,a=[],s=asuka.accumulator(),l=asuka.rules.set(core_ext.map(i(),function(t){return t(s,a,e)})),u=l.rules()[0],c=0;c<n.length;c++)o=t.format(n[c]),r=l.rule_for(o),r!=u&&u.transition(),r.process(o),u=r;return u.transition(),a};return{parse:n,rules:i}};asuka.parser=e}(),$(function(){var e=function(){var e=$(this).attr("data-other"),t=$(e).attr("data-alternate"),n=$(e).attr("src");$(e).attr("src",t).attr("data-alternate",n)};$(".swap-other").hover(e,e)}),$(function(){var e=function(){var e=$(this).attr("data-alternate"),t=$(this).attr("src");$(this).attr("src",e).attr("data-alternate",t)};$(".swap").hover(e,e)}),$(function(){autosize($(".expand")),$("input.first").focus()}),$(function(){function e(){$(".timestamp").each(function(e,t){initTimestamp(t)})}$("#activity_feed #feed").length>0?(e(),$("#activity_feed #feed").bind("updated",e)):$(".timestamp").livequery(function(){initTimestamp(this)}),setInterval(refreshAllTimestamps,6e4)}),$(function(){$(document).on("submit","form.spinner",function(){prevent_submit()})});var clear_preview=function(){$(".asuka_src").val(""),$(".asuka_src").keyup(),asuka_preview.close()},allow_submit=function(){$("#processing_form").hide(),$("#submit_button").show()},prevent_submit=function(){$("#processing_form").show(),$("#submit_button").hide()};$(function(){function e(){$("#view_more_link a").click(function(){return $("#view_more_link").remove(),$("#spinner").show(),$.ajax({url:$(this).attr("href"),dataType:"script",complete:e}),!1})}$("#tabnav.ajax .tab a").click(function(){$("#activity_feed div.updates").hide(),$("#feed").hide(),$("#spinner").show(),$(".switching_tabs_spinner").show(),$(".tab").removeClass("in_section"),$(this).parents(".tab").addClass("in_section");var t=$(this).parents(".tab").attr("id");return"everything"==t||"statuses"==t?$("#status_form").show():$("#status_form").hide(),$.post($(this).attr("href")).complete(function(t){$("#feed").html(t.responseText).show().trigger("updated"),$("#spinner").hide(),$(".switching_tabs_spinner").hide(),e()}),!1}),e()});var activateGroupFollowToggle=function(){$(".follow_toggle").click(function(){$("#follow_discussion_spinner").show();var e={};return $(this).is(".stop_following")&&(e._method="delete"),$.post($(this).attr("href"),e,function(e){$("#follow_discussion_spinner").hide(),$("#following_or_not").html(e),activateGroupFollowToggle()},"html"),!1})};$(function(){activateGroupFollowToggle()}),$(function(){$(document).on("click","li a.cancel",function(){return $(this).parents("li").remove(),!1})}),$(function(){$("a.submit").click(function(){$(this).parents("form").submit()}),$("a.slow_submit").click(function(){var e=this;setTimeout(function(){$(e).parents("form").submit()},1e3)})}),$(function(){$("a.give_gift, a.gift_cancel").click(function(){return $("#select_gift_recipient, #for_yourself, #gift_display").toggle(),!1})}),$(function(){$("a.tell_santa").click(function(){if(0==$("input[type=radio]:checked").length)return alert("You forgot to pick presents!"),!1;var e=$(this).parents("form");return e.attr("action",e.attr("action")+$(this).attr("href")),e.submit(),!1});var e=function(){$(this).children(".default,.hover").toggle()};$(".tell_santa").hover(e,e),$(".first_choice input[type=radio]").click(function(){$(".first_choice").css("background-color","#860E1A")}),$(".second_choice input[type=radio]").click(function(){$(".second_choice").css("background-color","#168340")}),$(".third_choice input[type=radio]").click(function(){$(".third_choice").css("background-color","#162e83")})}),$(function(){var e=function(){$("a.moderate_button").removeClass("selected"),$(".action_pop_up").hide(),$("#pop_up_background").hide()};$("#pop_up_background").click(function(){e()}),$("a.moderate_button").click(function(){return e(),$("#pop_up_background").show(),$(this).addClass("selected"),$(this).parents(".pop_up_region").find(".action_pop_up").removeClass("hide").show(),!1})}),$(function(){window.asukaize&&$("#formatting_playground textarea").keyup(function(e){var t=$(e.target).val(),n=asukaize(t);$("#formatting_playground .what_you_get").html(n)})}),$(function(){var e=function(e,t){void 0!=e&&window.asukaize&&t.html(asukaize(e))};$(".asuka_src").keyup(function(t){e($(t.target).val(),$(".asuka_dst"))}),e($(".asuka_src").val(),$(".asuka_dst"))});var asuka_preview={open:function(){$(".asuka_dst").show(),$(".asuka_dst_toggle").html("Close Preview")},close:function(){$(".asuka_dst").hide(),$(".asuka_dst_toggle").html("Preview")},toggle:function(){"block"==$(".asuka_dst").css("display")?this.close():this.open()}};$(function(){$(".asuka_dst_toggle").click(function(){return asuka_preview.toggle(),!1})}),jQuery.fn.sort=function(){return this.pushStack([].sort.apply(this,arguments),[])},$(initTimeTagTimestamps),$(function(){$(".load-from-remote").each(function(e,t){var n=$(t);$.ajax({url:n.attr("data-fetch-from"),dataType:"html",success:function(e){n.html(e).trigger("contentChanged")},error:function(){alert("We're sorry, but something went wrong.")}})})}),$(function(){$(".find_fetish input#q").focus()}),$(function(){var e=$(".long_description");if(e.height()>125){e.addClass("js-collapsed-content");var t='<a href="#" class="q s i mtm dib" data-read-more>Continue reading...</a>';e.after(t),e.parent().on("click","[data-read-more]",function(){return e.removeClass("js-collapsed-content"),$(this).remove(),!1})}}),$(function(){$("#support_tabs li").each(function(e,t){$(t).find("a").click(function(){return $("#support_tabs li").removeClass("in_section"),$(".support_tab_section").addClass("hidden"),$(t).addClass("in_section"),$($(t).attr("data-opens")).removeClass("hidden"),!1})})}),$(function(){$("[data-set-focus]").focus()}),$("#email_notifications").on("click","[data-group-email-notifications]",function(){$("#spinner").show(),$("#email_notifications").submit()});var setupVideoForm=function(){{var e=$("#title_description_credits"),t=$("#title_description_form");$("#video_title"),$("#video_description")}if(e.length){$("span.actions a",e).click(function(){return e.hide(),t.show(),!1}),$("a.cancel",t).click(function(){return t[0].reset(),t.hide(),e.show(),!1}),autosize($("#video_description"));var n=$("span.processing",t),i=$("span#actions",t);t.ajaxForm({url:t.attr("action"),beforeSend:function(){i.hide(),n.show()},success:function(){setupVideoForm()},error:function(){n.hide(),i.show(),alert("Oops, something went wrong on our end! We're looking into it, sorry!")}})}};$(function(){setupVideoForm()}),$(function(){function e(){o.addClass("out_of_focus").removeClass("in_focus"),autosize.destroy(n),n.val(t),i.removeClass("getting_close, over_limit").text(200),o.find(".save_spinner").hide().end().find(".submit_button").prop("disabled","disabled").show()}var t="What's on your kinky mind?",n=$(".update_status form textarea"),i=(n.height(),$(".update_status form .counter")),r=$(".update_status form input[type=submit]").prop("disabled","disabled"),o=$(".update_status form");$(".update_status form textarea").focus(function(){autosize(n),o.removeClass("out_of_focus").addClass("in_focus"),n.val()==t&&n.val("")}),$(".update_status form p.cancel a").click(function(){e()}),r.prop("disabled","disabled"),n.keyup(function(){var e=n.val().length,t=200-e;i.text(t),t>=0?(r.prop("disabled",""),200==t?(i.removeClass("over_limit").removeClass("getting_close"),r.prop("disabled","disabled")):20>=t?i.removeClass("over_limit").addClass("getting_close"):i.removeClass("over_limit").removeClass("getting_close")):(i.removeClass("getting_close").addClass("over_limit"),r.prop("disabled","disabled"))}),r.click(function(){$(this).hide().siblings(".save_spinner").show()}),o.ajaxForm({complete:function(t){$("#feed").prepend(t).trigger("updated"),e()}})}),$(function(){$(document).on("change","#ds_relationship_status",function(){$("#ds_status_spinner").show(),$("#ds_relationship_with").hide()}),$(document).on("click","#ds_save_button",function(){return $("#ds_save_spinner").show(),$("#ds_save_button").hide(),!0}),$(document).on("click",".ds_relationship_cancel",function(){return $(this).parents("li").remove(),!1})}),$(function(){$(document).on("change","#relationship_status",function(){$("#status_spinner").show(),$("#relationship_with").hide()}),$(document).on("click","#save_button",function(){return $("#save_spinner").show(),$("#save_button").hide(),!0}),$(document).on("click",".relationship_cancel",function(){return $(this).parents("li").remove(),!1})}),function(e){e.extend(e.fn,{poller:function(t){if(0==e(this).length)return this;var n=t.success,i=t.markerSelector,r=t.parameterName,o=t.url,a=t.interval||6e4,s=t.type,l=t.now,u=t.extraParams,c=function(){var t=e(i).attr("data-uuid");if(t){var a={};if(a[r]=t,u){var l=u();for(key in l)a[key]=l[key]}e.get(o,a,function(e){n(e)},s)}};return l&&c(),setInterval(c,a),this}})}(jQuery);var Poller=function(e){var t=null,n=null,i=_.bind(function(){n=setTimeout(_.bind(function(){this.poll()},this),inactivityPollTimeoutStrategy())},this);this.poll=function(){(!e.pollIf||e.pollIf())&&(t=$.ajax({url:e.url,data:_.isFunction(e.data)?e.data():e.data,type:e.type||"get",dataType:"json",complete:i,success:e.success}))},this.stop=function(){n&&clearTimeout(n),t&&t.abort()},this.start=function(){e.startNow?this.poll():i()}};$(function(){var e=$("[data-caption-form]"),t=$("[data-caption]"),n=$("textarea",e),i=null;autosize(n),$("[data-caption-edit]",t).click(function(){return t.hide(),e.removeClass("fl-hidden"),autosize.update(n),i=n.val(),!1}),$(".cancel",e).click(function(){return e.addClass("fl-hidden"),t.show(),n.val(i),!1}),$("form",e).submit(function(){var n=$("input[type=submit]",this).hide(),i=$(".processing",this).show(),r=$(".cancel",this).hide();return $.ajax({dataType:"json",type:"post",url:$(this).attr("action"),data:$(this).serialize(),success:function(o){e.hide(),n.show(),r.show(),i.hide();var a=distanceOfTimeInWords(new Date,new Date(o.created_at));$("time",t).replaceWith($('<time datetime="'+o.created_at+'">'+a+" ago</time>")),$(".fl-picture__caption",t).text(o.caption),t.show(),initTimeTagTimestamps()},error:function(){alert("So sorry, but there was some kind of error while processing your caption update. We'll fix it ASAP, but if that's not fast enough, go ahead and shoot us an email."),n.show(),r.show(),i.hide()}}),!1})}),$(function(){function e(e){$(e).html('<a href="#set_as_avatar">Set as Avatar</a>'),$("[data-delete-picture]").show()}$("[data-set-as-avatar]").click(function(t){t.preventDefault();var n="WARNING: setting this picture as your avatar will make it public. You down with that?";if("Just Friends"===$("[data-privacy-status]").text().trim()&&!confirm(n))return!1;var i=$(this);return i.text("Setting as Avatar..."),parseInt($("[data-delete-picture] a").data("pictures-count"))>1&&$("[data-delete-picture]").hide(),$("#set_as_avatar_form").ajaxForm({dataType:"json",success:function(t){if(t.is_avatar){var n=$("#profile_header img.avatar").attr("src");$('img[src="'+n+'"]').attr({title:t.nickname,alt:t.nickname,src:t.avatar_url}),i.replaceWith("Current avatar"),$("[data-privacy-status]").text("FetLifers"),$("[data-privacy-action]").parent().addClass("fl-hidden"),$("[data-privacy-is-avatar]").removeClass("fl-hidden"),$("[data-privacy-form] select")[0].selectedIndex=0,$("[data-privacy-form]").addClass("fl-hidden"),$("[data-privacy-view]").removeClass("fl-hidden"),i.unbind("click")}else e(i)},error:function(){e(i)}}).submit(),!1})}),$(function(){$("#user_country_id").change(function(){$("#country_spinner").show(),$("#city").hide(),$.post("/administrative_areas/select",{id:$("#user_country_id").val(),authenticity_token:$("#authenticity_token").html()},null,"script")}),$(document).on("change","#user_administrative_area_id",function(){$("#administrative_area_spinner").show(),$.post("/cities/select",{id:$("#user_administrative_area_id").val(),authenticity_token:$("#authenticity_token").html()},null,"script")})}),$(function(){$("#event_country_id").change(function(){$("#country_spinner").show(),$("#city").hide(),$.post("/events/select_administrative_area",{id:$("#event_country_id").val(),authenticity_token:$("#authenticity_token").html()},null,"script")}),$(document).on("change","#event_administrative_area_id",function(){$("#administrative_area_spinner").show(),$.post("/events/select_city",{id:$("#event_administrative_area_id").val(),authenticity_token:$("#authenticity_token").html()},null,"script")})}),$(function(){function e(){$(".status-timestamp").each(function(e,t){var n=$(t).html();$(t).attr("data-timestamp",n).addClass("refresh-status-timestamp").removeClass("status-timestamp"),setStatusTimeAgo(t)})}function t(e){var t=e.find(".view_other"),n=t.find("a:visible").length;n?(t.show(),1===n?t.find(".spacer").hide():t.find(".spacer").show()):t.hide()}function n(){$(".story_2.status ul.comments").each(function(e,t){var n=$(t).find("li.status_comment");n.get(0)&&$(n.get(0)).show(),n.get(1)&&$(n.get(1)).show()})}function i(){$(".story_2.status ul.comments .view_all").click(function(){return $(this).parents("ul.comments").find("li.status_comment").show(),$(this).hide().siblings(".spacer").hide(),!1})}function r(){$(".new_comment form").each(function(e,n){$(n).find(".submit_button").prop("disabled","disabled").click(function(){$(this).hide().siblings(".spinner").show()}),$(n).find("textarea").keyup(function(){var e=$(this).val().replace(/ /,"").length,t=$(this).parents("form").find(".submit_button");e>0?t.prop("disabled",""):t.prop("disabled","disabled")});var i=n;$(n).ajaxForm({complete:function(e){$(i).parents(".new_comment").find("textarea").val("").end().find(".spinner").hide().end().find(":submit").show().prop("disabled","disabled");var n=$(i).parents(".comments"),r=n.find("li.status_comment:last");r.length?r.after($(e.responseText)):n.prepend($(e.responseText)),$("#feed").trigger("updated"),n.find("li.status_comment:last").show(),$(i).parents(".story_2.status").find("li.view_other a.make_comment").show(),o($(i).parents("ul.comments")),t($(i).parents(".story_2.status"))}}),$(".story_2.status a.make_comment").click(function(){return $(this).parents(".story_2.status").find("ul.comments").show().end().find("li.view_other a.make_comment").hide().end().find("li.new_comment").show(),t($(this).parents(".story_2.status")),!1}),$(".story_2.status a.cancel").each(function(e,n){$(n).unbind().click(function(){$(this).parents("li.new_comment").hide().end().parents("ul.comments").find("li.view_other a.make_comment").show();var e=$(this).parents("ul.comments");return e.find("li.status_comment").length||e.hide(),t($(this).parents(".story_2.status")),!1})})})}function o(e){var t=$(e).find("li.status_comment").length;t?$(e).find(".view_other .view_all .count").text(t):$(e).find(".view_other").hide()}function a(){var e="Are you sure you want to delete this update and any comments made on it?  Once you tap that ass there is no going back.  By tap that ass I mean hit the 'Ok' button.";$(".story_2.status form.edit_status_comment").each(function(e,n){$(n).ajaxForm(function(){var e=$(n).parents("ul.comments");$(n).parents("li.status_comment").remove(),t($(e).parents(".story_2.status")),o(e)})}),$(".story_2.status .delete a").show().click(function(){return confirm(e)&&($(this).parents(".delete").hide().siblings(".delete_spinner").show(),$(this).parents("form").submit()),!1}),$(".story_2.status form.edit_status").each(function(e,t){var n=$(t);n.ajaxForm(function(){n.parents("div.story_2.status").remove()})}),$(".status-show ul.comments li.status_comment").show(),$(".status-show ul.comments li.view_other .view_all").hide(),$(".status-show ul.comments li.view_other .spacer").hide(),$("li.status_comment p.extract span.short a").click(function(){return $(this).parents(".short").hide().siblings(".long").show(),!1})}e(),$("#activity_feed #feed").bind("updated",e),$("#activity_feed").on("click",".view_more a",function(){var e=$(this).attr("href");return $("#activity_feed .view_more, #activity_feed .view_more_spinner").toggle(),$.ajax(e,{dataType:"html"}).done(function(e){$("#activity_feed .view_more, #activity_feed .view_more_spinner").remove(),$("#feed").append($(e).find("#feed").html()).trigger("updated")}),!1}),n(),$("#activity_feed #feed").bind("updated",n),i(),$("#activity_feed #feed").bind("updated",i),r(),$("#activity_feed #feed").bind("updated",r),a(),$("#feed").bind("updated",a),setInterval(refreshAllStatusTimestamps,3e5)}),$(function(){return 0==$("#home.v3 #groups").length?0:void $("#home #groups .view_more a").click(function(){var e=[new String(document.location),".js"].join(""),t=$("#feed_of_discussions li.post:last").attr("data-uuid");return $("#home .view_more").hide(),$("#home .view_more_spinner").show(),$.get(e,{start_after:t},function(e){$("#feed_of_discussions").append(e),$("#home .view_more").show(),$("#home .view_more_spinner").hide()}),!1})});var fetlife_formatter=function(){var e=asuka.formatter();return e.default_steps=function(){return asuka.formatter().default_steps().concat(["markdown_link","auto_link"])},e.markdown_link=function(t){return t.replace(/\[([^\]]+?)\]\(\s*(https?:\/\/[^\]\s]+)\s*\)/g,function(t,n,i){return e.make_link(n,i)})},e},asukaize=function(){var e=fetlife_formatter(),t=asuka.line_formatter(e),n=asuka.parser(t);return function(e){return asuka.document(e,n).to_html()}}(),bindNewCommentAnchor=function(){$('a[href="#new_generic_comment"]').click(function(){return $("#generic_comment_body_fake").click(),!1})},updateCommentCounts=function(){var e,t=$("[data-comment]:visible").length,n=1===t?"Comment":"Comments";e=0===t?"Be the first to leave your mark&hellip;":t.toString()+" "+n+' <a href="#new_generic_comment">(leave comment)</a>',$("#comments header h1").html(e),bindNewCommentAnchor();var i="<strong>"+t.toString()+"</strong> "+n;$("[data-comments-411]").html(i)};$(function(){var e=$("#generic_comment_form"),t=$("#generic_comment_body"),n=$("#generic_comment_form_fake"),i=$("#generic_comment_body_fake");if(0!==e.size()&&0!==t.size()){autosize(t),i.bind("click focus",function(){n.hide(),e.show(),t.focus()}),t.bind("attemptFormCleanup",function(){""!=t.val()||e.hasClass("submitting")||($("#errorExplanation").remove(),e.hide(),n.show()),t.blur()}),$("body").click(function(n){n.target!=e[0]&&n.target!=i[0]&&-1==$.inArray(n.target,e.find("*"))&&t.trigger("attemptFormCleanup")}),bindNewCommentAnchor();var r=$("input[type=submit]",e),o=$(".processing",e),a=$("span.formatting_options"),s=$(".keyboard_hint"),l=!1,u=function(){e.addClass("submitting"),r.hide(),o.show(),a.hide(),s.hide(),l="block"==$(".asuka_dst").css("display"),asuka_preview.close()},c=function(){e.removeClass("submitting"),$("#errorExplanation").remove(),o.hide(),a.show(),s.show(),r.show()};e.ajaxForm({beforeSend:u,dataType:"json",success:function(e){c(),$("#comments").append($(e.comment,!1)),t.val(""),clear_preview(),t.trigger("attemptFormCleanup"),updateCommentCounts()},error:function(n){c(),1==l&&asuka_preview.open(),e.prepend(n.responseText),t.focus()}})}}),$(function(){$("#comments").on("click","[data-comment] a.delete_comment",function(){if(confirm("To delete, or not to delete; that is the question!")){var e=$(this),t=e.parents("[data-comment]");$.post(e.attr("href"),{_method:"delete",authenticity_token:$("#authenticity_token").text(),dataType:"html"}),0!==$("#generic_comment_form").size()?t.fadeOut(400,updateCommentCounts):t.fadeOut()}return!1})}),$(function(){var e=function(e,t,n){this.isOpen=ko.observable(!1),this.isLoading=ko.observable(!1),this.isBanned=ko.observable(e),this.banUrl=t,this.unbanUrl=n,this.ban=function(){confirm("Are you sure you want to ban this user from the group? Banning will not remove any of their contributions but will no longer allow them to re-join and participate in the group. Ban them?")&&(this.isLoading(!0),$.ajax({url:this.banUrl,type:"POST",dataType:"html",complete:_.bind(function(e){200===e.status?this.isBanned(!0):alert("There was a problem banning this user. Try again or contact support if it keeps up!"),this.isLoading(!1)},this)}))},this.unban=function(){this.isLoading(!0),$.ajax({url:this.unbanUrl,type:"POST",dataType:"html",complete:_.bind(function(e){200===e.status?this.isBanned(!1):alert("There was a problem unbanning this user. Try again or contact support if it keeps up!"),this.isLoading(!1)},this)})},this.open=function(){this.isOpen(!0)},this.close=function(){this.isOpen(!1)}};if(window.Comments){var t=$("[data-comment]");if(ids=_.map(t,function(e){return $(e).attr("data-id")}),!Comments.type||0===ids.length)return;$.ajax({url:Comments.controlsUrl,type:"POST",dataType:"json",data:{ids:ids,type:Comments.type},success:function(t){_.each(t,function(t,n){var i=$("#"+n).find("[data-comment-actions]"),r=i.append(t).end();Gorilla&&Gorilla.Dialog&&Gorilla.Dialog.Manager&&Gorilla.Dialog.Manager.addHooksFor&&Gorilla.Dialog.Manager.addHooksFor(i);var o=r.find(".comment_options");if(o.length>0){var a=new e("true"==o.attr("data-banned"),o.attr("data-ban-url"),o.attr("data-unban-url"));ko.applyBindings(a,o[0]),o.show()}})}})}}),$(function(){$("[data-comment-reply]").each(function(){var e=$(this),t=e.parent(),n=e.data("comment-author-id"),i=FL.user.id==n,r=!_.isUndefined(FL.group),o=r?FL.group.allowedToReply:!0;(i||!o)&&t.remove()})}),$(function(){var e=$("[data-comment-textarea]"),t=$(".discussion_container .pagination:first"),n=/^@[a-zA-Z0-9_\-]+ ?$/;e.data("replying")&&setTimeout(function(){e.focus(),window.helpers.setCursorPosition(e,e.val().length)},0),$(document).on("click","[data-comment-reply]",function(i){i.preventDefault();var r=$(this).data("comment-author-nickname"),o="@"+r+" ";if(e.length){var a=0===e.val().length||e.val().match(n);a&&($("#generic_comment_body_fake").length&&$("#generic_comment_body_fake").trigger("click"),e.val(o),e.focus(),window.helpers.setCursorPosition(e,o.length))}else if(t.length){var s=t.find("a:nth-last-child(2)"),l=new URL(s.attr("href"),window.location);l.hash="#new_comment",l.searchParams.append("reply_to",r),window.location=l}})}),$(function(){$("form.ajax_comment").submit(function(){var e=this;return $.ajax({url:$(this).attr("action")+".json",dataType:"json",data:$(this).serializeArray(),type:"post",success:function(t){$("#errorExplanation").remove(),$("#comments").append($(t.comment,!1)),$(e)[0].reset(),$("#comments .count span").text(parseInt($("#comments .count span").text())+1),$("#comments .count").show(),$(".no_comments").hide(),initTimeTagTimestamps(),refreshAllTimestamps()},error:function(e){404==e.status?($("#new_comment").remove(),$("#new_group_post_comment_container").append("<p class='error'>Sorry, this group post was deleted while you were writing your comment!</p>"),$("#following_or_not").remove()):($("#errorExplanation").remove(),$("#new_comment").prepend(e.responseText))},complete:function(){clear_preview(),allow_submit()}}),!1}).removeClass("ajax_comment")}),$(function(){function e(e){$(e.target).is("#nav_dropdown a")||t()}$("#nav_dropdown li.nojs").removeClass("nojs");var t=null;t=function(){$("#nav_dropdown a.pulldown-trigger").removeClass("open").siblings("ul").hide(),$(document).unbind("click",e)},$("#nav_dropdown .pulldown-trigger").click(function(){return $(this).is(".open")?t():($(this).addClass("open").siblings("ul").show(),$(document).click(e)),!1})}),Gorilla.MediaFlaggingController=new JS.Class(Gorilla.Dialog.Controller,{initialize:function(e){this.callSuper(e),e.dialog.find(".step[data-path=dmca] input").bind("keydown keypress keyup",function(){this.validateCurrentStep()}.bind(this)),e.dialog.find(".step[data-path=permission] input").bind("click",function(){this.validateCurrentStep()
}.bind(this)),e.dialog.find(".step[data-path=copyright_in_question] input").bind("keydown keypress keyup",function(){this.validateCurrentStep()}.bind(this))},isCurrentStepValid:function(){switch(this.get("currentStep")){case 1:return this.getCurrentStepElement().find("input:radio:checked").length;case 2:return this.validateActivePath();default:return!0}},validateActivePath:function(){switch(this.get("activePath")){case"permission":return 2==this.getCurrentStepElement().find("input:checkbox:checked").length;case"dmca":var e=this.getCurrentStepElement().find("input").map(function(e,t){var n=$(t);return""!==n.val()&&n.val()!==n.data("placeholderValue")});return-1===$.inArray(!1,e);case"copyright_in_question":return this.getCurrentStepElement().find("#flagging_copyright_in_question_contact").val();default:return!0}}}),Gorilla.CommentFlaggingController=new JS.Class(Gorilla.Dialog.Controller,{open:function(e){this.callSuper();var t=e.parents("[data-comment]").attr("id").split("_"),n=t.pop(),i=t.join("_");$("#flagging_object_id",this.get("form")).val(n),$("#flagging_object_type",this.get("form")).val(i)},isCurrentStepValid:function(){return this.getCurrentStepElement().find("input:radio:checked").length}}),Gorilla.PostFlaggingController=new JS.Class(Gorilla.Dialog.Controller,{initialize:function(e){this.callSuper(e),e.dialog.find(".step[data-path=dmca] input").bind("keydown keypress keyup",function(){this.validateCurrentStep()}.bind(this)),e.dialog.find(".step[data-path=other], .step[data-path=content_not_permitted]").find("textarea").bind("keydown keypress keyup",function(){this.validateCurrentStep()}.bind(this)),e.dialog.find(".step[data-path=copyright_in_question] input").bind("keydown keypress keyup",function(){this.validateCurrentStep()}.bind(this))},isCurrentStepValid:function(){switch(this.get("currentStep")){case 1:return this.getCurrentStepElement().find("input:radio:checked").length;case 2:return this.validateActivePath();default:return!0}},validateActivePath:function(){switch(this.get("activePath")){case"content_not_permitted":case"dmca":case"other":var e=this.getCurrentStepElement().find("input, textarea").map(function(e,t){var n=$(t);return""!==n.val()&&n.val()!==n.data("placeholderValue")});return-1===$.inArray(!1,e);case"copyright_in_question":return this.getCurrentStepElement().find("#flagging_copyright_in_question_contact").val();default:return!0}}}),Gorilla.EventFlaggingController=new JS.Class(Gorilla.Dialog.Controller,{initialize:function(e){this.callSuper(e),e.dialog.find(".step[data-path=not_the_organizer], .step[data-path=other], .step[data-path=content_not_permitted]").find("textarea").bind("keydown keypress keyup",function(){this.validateCurrentStep()}.bind(this))},isCurrentStepValid:function(){switch(this.get("currentStep")){case 1:return this.getCurrentStepElement().find("input:radio:checked").length;case 2:return this.validateActivePath();default:return!0}},validateActivePath:function(){switch(this.get("activePath")){case"not_the_organizer":case"content_not_permitted":case"other":var e=this.getCurrentStepElement().find("input, textarea").map(function(e,t){var n=$(t);return""!==n.val()&&n.val()!==n.data("placeholderValue")});return-1===$.inArray(!1,e);default:return!0}}}),Gorilla.UserFlaggingController=new JS.Class(Gorilla.Dialog.Controller,{initialize:function(e){this.callSuper(e),e.dialog.find("textarea").bind("keydown keypress keyup",function(){this.validateCurrentStep()}.bind(this))},isCurrentStepValid:function(){switch(this.get("currentStep")){case 1:return this.getCurrentStepElement().find("input:radio:checked").length;case 2:return this.validateActivePath();default:return!0}},validateActivePath:function(){var e=this.getCurrentStepElement().find("textarea");return""!==e.val()&&e.val()!==e.data("placeholderValue")}}),Gorilla.FetishFlaggingController=new JS.Class(Gorilla.Dialog.Controller,{initialize:function(e){this.callSuper(e),e.dialog.find(".step[data-path=other], .step[data-path=content_not_permitted]").find("textarea").bind("keydown keypress keyup",function(){this.validateCurrentStep()}.bind(this))},isCurrentStepValid:function(){switch(this.get("currentStep")){case 1:return this.getCurrentStepElement().find("input:radio:checked").length;case 2:return this.validateActivePath();default:return!0}},validateActivePath:function(){switch(this.get("activePath")){case"content_not_permitted":case"other":var e=this.getCurrentStepElement().find("input, textarea").map(function(e,t){var n=$(t);return""!==n.val()&&n.val()!==n.data("placeholderValue")});return-1===$.inArray(!1,e);default:return!0}}}),Gorilla.WallPostFlaggingController=new JS.Class(Gorilla.Dialog.Controller,{open:function(e){this.callSuper();var t=e.parents(".wall_post").attr("id").split("_"),n=t.pop(),i=t.join("_");$("#flagging_object_id",this.get("form")).val(n),$("#flagging_object_type",this.get("form")).val(i)},isCurrentStepValid:function(){return this.getCurrentStepElement().find("input:radio:checked").length}}),Gorilla.CommentBlockingController=new JS.Class(Gorilla.Dialog.Controller,{removeBanLink:function(){var e=this.get("commentElId"),t=$("#"+e),n=t.find(".controls > .block_from_comment_button");n.replaceWith($('<a href="/settings/blocked">blocked</a>'))},_loadingStateObserver:function(e,t){switch(t){case"success":this.removeBanLink(),this.close();break;case"error":alert("There was an error creating the block, sorry :("),this.close()}}.observes("loadingState"),open:function(e){this.callSuper();var t=e.parents("[data-comment]"),n=t.attr("id");this.set("commentElId",n);var i=n.split("_"),r=i.pop(),o=i.join("_"),a=t.find("a.nickname"),s=a.text();$("#blocked_object_id",this.get("form")).val(r),$("#blocked_object_type",this.get("form")).val(o),$("span[data-blocked-username]").text(s),$("a.proceed_button").text("Block "+s),this.validateCurrentStep()},validateCurrentStep:function(){this.set("valid",!0)}}),$(function(){$("#new_picture input[type='file']").change(function(){$("tr").show(),autosize($(".expand_on_show"))}),$(".new_picture").submit(function(){return $("#new_picture input[type='file']").val()&&!$("#picture_is_of_or_by_user").is(":checked")?(alert("You must certify that this picture is of or by you."),$("#submit_button").show(),$("#processing_form").hide(),!1):void 0});var e=$(".new_picture input[name='picture[is_avatar]']");e.change(function(){$(this).get(0).checked?($(".privacy .mode .change").hide(),$(".privacy .mode select").get(0).selectedIndex=0,$(".privacy .mode select").change().change(),$(".private_avatar").show()):($(".privacy .mode .change").show(),$(".private_avatar").hide())}),$(".privacy a.option").click(function(){return $(this).parents(".privacy").find(".mode:not(.processing)").toggle(),!1}),$("td.privacy, p.privacy .mode.change select").change(function(){$selected_option=$('[name*="[only_friends]"] :selected'),$(this).find(".mode.display span.display").text($selected_option.text()).end().find(".mode.display").show().end().find(".mode.change").hide()})}),$(function(){var e=$("[data-privacy] [data-spinner]"),t=$("[data-privacy-form]"),n=$("[data-privacy-form] form"),i=$("[data-privacy-view]"),r=$("[data-privacy-status]"),o=$("[data-privacy-form] select"),a=$("[data-privacy-action]"),s="fl-hidden";n.ajaxForm({complete:function(){e.addClass(s),t.addClass(s),i.removeClass(s)}}),o.on("change",function(){var i=this;e.removeClass(s),r.text(i.options[i.selectedIndex].text),n.submit(),t.addClass(s)}),a.on("click",function(){i.toggleClass(s),t.toggleClass(s)})}),$(function(){$("#new_group_post").submit(function(){var e=$(this).find("#processing_form").children("span");$.each([5,10,15],function(t,n){setTimeout(function(){e.filter(":visible").hide(),e.filter("#"+n.toString()).show()},1e3*n)})})}),$(function(){var e=function(e,t){var n=t||window.location.href,i=new RegExp("[?&]"+e+"=([^&#]*)","i"),r=i.exec(n);return r?r[1]:null},t=e("reply_to");if(t)t="@"+t+" ";else{if(!e("open_comment"))return;t=""}var n=$("#generic_comment_body_fake"),i=$("#generic_comment_body");n.click(),i.val(t);var r=$("#new_post_comment_form textarea");r.focus(),r.val(t);var o=$(".status_comment_body");$(".make_comment").click(),o.focus(),o.val(t)});var InactivityTracker=function(){var e=new Date;$(document).mousemove(function(){e=new Date}),this.inactiveForInSeconds=function(){return(new Date-e)/1e3}},inactivityTracker,inactivityPollTimeoutStrategy=function(){var e=inactivityTracker.inactiveForInSeconds();return 300>e?6e4:900>e?3e5:9e5};$(function(){inactivityTracker=new InactivityTracker});var cp={};cp._maxify=function(e,t){return e>t?[t,"+"].join(""):e.toString()},cp.count=function(e){var t=ko.observable(0);return t.with_max=ko.dependentObservable(function(){return cp._maxify(this(),99)},t),t.with_label=ko.dependentObservable(function(){var t=this.with_max();return[e,"("+t+")"].join(" ")},t),t},cp.CountPoller=function(e){var t={friendship_requests:I18n.nav_icons.friendship_requests,new_messages:I18n.nav_icons.inbox,ats:I18n.nav_icons.ats,trends:"",stories:""},n=12e4,i=e;this.allTypes=["friendship_requests","new_messages","ats","trends","stories"],this.fetch=[],_.each(this.allTypes,_.bind(function(e){this[e]=new cp.count(t[e])},this)),this.addType=function(e,t){_.include(this.fetch,e)||(this.fetch.push(e),t&&i.registerGlobal(this[e]))},_.each(["friendship_requests","new_messages","ats"],_.bind(function(e){this.addType(e,!0)},this)),this.removeType=function(e){_.include(this.fetch,e)&&(this.fetch.splice(_.indexOf(this.fetch,e),1),i.deregisterGlobal(this[e]),this[e](0))},this.poller=new Poller({url:"/polling/counts",data:_.bind(function(){return{fetch:this.fetch.join(",")}},this),success:_.bind(function(e){_.each(e,_.bind(function(e,t){this[t](e)},this))},this),interval:n}),this.update=function(e,t){this[e](t)},this.start=function(){this.poller.start()},this.stop=function(){this.poller.stop()}},cp.CountAndSubscription=function(e,t){this.count=e,this.subscription=t},cp.TitleCountManager=function(e){var t,n,i=[],r=document.title,o=e||99,a=ko.observable(""),s=document.hasFocus&&document.hasFocus();$(window).focus(function(){s=!0,this.clearFlash()}.bind(this)),$(window).blur(function(){s=!1}),this.hasFocus=function(){return s},this.flash=ko.observableArray([]),this.total=ko.observable(0),this.addFlash=function(e){_.include(e,this.flash())||s||this.flash.push(e)},this.clearFlash=function(){this.flash([])};var l=_.bind(function(){clearTimeout(n);var e,i=this.total(),s=cp._maxify(i,o),l=a(),u=cp._maxify(l,o);if(e=i>0||l>0?t?["("+u+"/"+s+")",r].join(" "):["("+s+")",r].join(" "):r,document.title=e,this.flash().length>0){var c=_.map(_.range(0,this.flash().length),function(){return e}),d=_.flatten(_.zip(this.flash(),c)),h=0;performFlash=function(){h>d.length-1&&(h=0),document.title=d[h],h++}.bind(this),n=setInterval(performFlash,1500)}},this);this.total.subscribe(l),a.subscribe(l),this.flash.subscribe(l),this.setBaseTitle=function(e){r=e,l()},this.registerGlobal=function(e){i.push(new cp.CountAndSubscription(e,e.subscribe(_.bind(function(){this._recalculateTotal()},this)))),this._recalculateTotal()},this.registerPageSpecific=function(e){t=new cp.CountAndSubscription(e,e.subscribe(_.bind(function(e){a(e)},this))),a(e())};var u=function(e){return _.detect(i,function(t){return t.count==e})};this.deregisterGlobal=function(e){var t=u(e);t&&(t.subscription.dispose(),i.splice(_.indexOf(i,t),1),this._recalculateTotal())},this.deregisterPageSpecific=function(){var e=t;t=null,e&&(e.subscription.dispose(),a(0))},this._recalculateTotal=function(){var e=_.reduce(i,function(e,t){return e+t.count()},0);this.total(e)}},cp.titleCountManager=new cp.TitleCountManager,cp.countPoller=new cp.CountPoller(cp.titleCountManager),$(function(){cp.countPoller.new_messages(initialMessageCount),cp.countPoller.friendship_requests(friendshipRequestCount),cp.countPoller.ats(atsCount),FetLife.currentUser.shouldPoll&&cp.countPoller.start()}),$(function(){var e=$("[data-notification-counts]");e.length&&ko.applyBindings(cp.countPoller,e.get(0))}),jQuery.fn.addCommentsHotkeys=function(){if(0!==this.length){$(document).bind("keyup","c",function(){("undefined"==typeof gKeyPressed||0==gKeyPressed)&&$("#generic_comment_body_fake").click()});var e=$("#generic_comment_form textarea");e.bind("keydown","ctrl+return",function(e){$(this).parents("form").submit(),e.preventDefault()}),e.bind("keydown","esc",function(){$(this).trigger("attemptFormCleanup")}),e.bind("keydown","tab",function(){$(this).trigger("attemptFormCleanup")})}},jQuery.fn.addPictureLikesHotkeys=function(){if(0!==this.length){var e=$("[data-like-button]",this);$(document).bind("keyup","l",function(){document.toggleLikeOnlyIf=!1,e.click(),document.toggleLikeOnlyIf=null}),$(document).bind("keyup","r",function(){document.toggleLikeOnlyIf=!0,e.click(),document.toggleLikeOnlyIf=null})}},jQuery.fn.addPervNextHotkeys=function(){if(0!==this.length){var e=$("[data-perv-button]",this),t=$("[data-next-button]",this),n=function(){var e=$(".continuous_perving"),t=$(":checkbox",e);return e.is(":visible")&&t.is(":checked")};$(document).bind("keydown","left",function(){e.addClass("clicked_shortcut_key")}),$(document).bind("keyup","left",function(){e.removeClass("clicked_shortcut_key"),n()||(window.location=e.attr("href"))}),$(document).bind("keydown","right",function(){t.addClass("clicked_shortcut_key")}),$(document).bind("keyup","right",function(){t.removeClass("clicked_shortcut_key"),n()||(window.location=t.attr("href"))})}},jQuery.fn.addContinuousPervingHotkeys=function(){if(0!==this.length){var e=this;$(document).bind("keyup","t",function(){e.click(),e.change(),e.is(":not(:checked)")&&$(window).scrollTop(0)})}},$.fn.anchorHotkey=function(e,t){if(0!==this.length){var n=this.attr("href");$(document).bind("keydown",e,function(){(!t||t())&&(window.location=n)})}};var setupPeriod=function(){$(document).bind("keypress",".",function(){$(window).scrollTop(0),setTimeout(function(){$("#home #activity_feed .updates:visible").click()},168)})},setupSlash=function(){$(document).bind("keydown","/",function(e){e.preventDefault(),scrollTo(0,0),$("[data-nav-search]").focus()})},setupEsc=function(){$("input, textarea").bind("keydown","esc",function(){document.activeElement.blur()})};$(function(){if(!window.FL.config.isMobile()){$("#generic_comment_form").addCommentsHotkeys(),$("[data-likes-section]").addPictureLikesHotkeys(),$("[data-perv-next]").addPervNextHotkeys(),$(".continuous_perving :checkbox").addContinuousPervingHotkeys(),setupPeriod(),setupSlash(),setupEsc();var e=!1;$(document).bind("keyup","u",function(){e=!0,setTimeout(1e3,function(){e=!1})}),$("#user_videos_link").anchorHotkey("v",function(){return e}),$("#user_pictures_link").anchorHotkey("p",function(){return e}),$("#user_profile_link").anchorHotkey("u",function(){return e}),$("#keyboard_legend").show(),$(".keyboard_hint").show()}}),Fl={},Fl.Continuous={},Fl.Continuous.Paginator=new JS.Class(Gorilla.Model.Paginator,{currentPage:1,reachedLastPage:function(){return this.get("currentPage")==this.get("totalPages")}}),Fl.Continuous.Controller=new JS.Class(Gorilla.Controller,{initialize:function(e){this.callSuper(),this.set("paginator",e.paginator),e.paginator.observe("loading",this.method("_paginatorLoadingObserver")),this.set("active",this.isCookieEnabled())},scrollThresholdReached:function(){this.get("active")&&this.get("paginator").maybeLoadNextPage()},isCookieEnabled:function(){return"on"==this.getCookie()||null==this.getCookie()},getCookie:function(){return window.Cookies.get("_Fetlife_continuous_perving")},setCookie:function(e){window.Cookies.set("_Fetlife_continuous_perving",e,{path:"/",expires:9999})},_activeObserver:function(e,t){t?(this.setCookie("on"),""!=window.location.search&&"?page=1"!=window.location.search?(window.location=window.location.protocol+"//"+window.location.host+window.location.pathname,this.set("loading",!0)):this.get("paginator").maybeLoadNextPage()):(this.setCookie("off"),this.get("paginator").reset())}.observes("active"),_paginatorLoadingObserver:function(e,t){this.set("loading",t)}}),Fl.Picture=new JS.Class(Gorilla.Model,{properties:["src","href","alt","title","width"]}),Fl.PageInfo=new JS.Class(Gorilla.Model,{properties:["start","end","total"]}),Fl.Continuous.ScrollWatcher=new JS.Class(Gorilla.View,{initialize:function(e){this.set("controller",e.controller),this.set("methodName",e.methodName),this.set("scrollThreshold",e.scrollThreshold||900),this.callSuper(),$(window).bind("scroll resize",this.method("scrollObserver"))},scrollObserver:function(){this._reachedScrollThreshold()&&this.get("controller")[this.get("methodName")]()},_distanceToPageBottom:function(){return $(document).height()-$(window).scrollTop()-(window.innerHeight||$(window).height())},_reachedScrollThreshold:function(){return this._distanceToPageBottom()<=this.get("scrollThreshold")}}),Fl.Continuous.ContainerView=new JS.Class(Gorilla.BooleanView,{initialize:function(e){this.callSuper(e),this.set("paginator",e.paginator),this.set("item_template",$("#item_template",e.element)),this.set("page_template",$("#page_template",e.element)),this.set("page_header_template",$("#page_header_template",e.element)),this.set("itemsPerRow",parseInt(e.element.attr("data-items-per-row"))),this.set("totalItems",parseInt(e.element.attr("data-total-items"))),e.paginator.observe("pageLoaded",this.method("_pageLoadedObserver"))},disable:function(e){e.children(".page").not(":first").remove(),e.children("h2").remove()},_pageLoadedObserver:function(e,t){if(this.get("controller").get("active")){var n=new Fl.PageInfo({start:this.currentItemCount()+1,end:this.currentItemCount()+t.length,total:this.get("totalItems")}),i=$("#page_header_template").tmpl(n),r=$("#page_template").tmpl();$.each(t,function(e,t){var n=$("#item_template").tmpl(t);(e+1)%this.get("itemsPerRow")===0&&n.addClass("last"),r.append(n)}.bind(this)),this.get("element").children(".page:last").after(i),this.get("element").children("h2:last").after(r)}},currentItemCount:function(){return this.get("element").children(".page").children().length}}),Fl.Continuous.setup=function(){var e=$(".continuous_container");if(e.length){var t=$("#continuous_toggle");if(t.length){var n=parseInt(e.attr("data-total-pages")),i=e.attr("data-fetch-from"),r=new Fl.Continuous.Paginator({url:i,totalPages:n,model:Fl.Picture}),o=new Fl.Continuous.Controller({paginator:r});Controller=o;{new Fl.Continuous.ScrollWatcher({controller:o,methodName:"scrollThresholdReached"}),new Fl.Continuous.ContainerView({controller:o,property:"active",element:e,paginator:r})}t.change(function(){o.set("active",t.is(":checked"))});{new Gorilla.CheckBoxView({controller:o,property:"active",element:t}),$("[data-show-when]").map(function(e,t){return new Gorilla.BooleanVisibilityView({controller:o,element:$(t),property:$(t).attr("data-show-when")})}),$("[data-hide-when]").map(function(e,t){return new Gorilla.InverseVisibilityView({controller:o,element:$(t),property:$(t).attr("data-hide-when")})})}}}},$(function(){Fl.Continuous.setup()}),$(function(){var e=function(){var e=function(e){return String.fromCharCode(e)};$($.map([91,105,100,94,61,34,102,101,116,108,105,102,101,95,97,115,108,34,93],e).join("")).remove(),$($.map([110,97,118,32,108,97,98,101,108,58,99,111,110,116,97,105,110,115,40,34,65,47,83,47,76,34,41],e).join("")).remove()};setTimeout(e,100),setTimeout(e,500),setTimeout(e,1e3),setTimeout(e,3e3)}),$(document).ajaxSend(function(e,t){var n=$("meta[name='csrf-token']").attr("content");t.setRequestHeader("X-CSRF-Token",n)}),function(e){function t(e){return["storage",e].join(":")}function n(n){n.type=t(n.originalEvent.key),e(i).trigger(n)}var i={};e.storageEvent=function(n,r){e(i).bind(t(n),r)},e(function(){e(window).on("storage",n)})}(jQuery),$(function(){$(document).on("click",".hide_notice",function(){$(this).parents(".notice_bar").hide();var e=window.location.protocol.match(/https/),t={secure:e,path:"/",expires:1e3};return window.Cookies.set("hide_notice_id",window.FetLife.currentNoticeId,t),!1})}),$(function(){$(".modal").each(function(){var e=$(this).data("modal-auto-open"),t=$(this).data("modal-title"),n=$(this).data("modal-width")||"475",i=$(this).data("modal-height");$(this).dialog({modal:!0,autoOpen:e,width:n,height:i,title:t,draggable:!1,resizable:!1})}),$(".modal").on("click",".close",function(){var e=$(this).data("closes-modal");return $("#"+e).dialog("close"),!1}),$(document).on("click",".opens-modal",function(){var e=$(this).data("opens-modal");return $("#"+e).dialog("open"),!1}),$(".modal").on("click",".btnsqr",function(){var e=$(this).data("modal");$("#"+e+"-actions").hide(),$("#"+e+"-spinner").show()})}),ko.bindingHandlers.keyup={init:function(e,t,n,i){$(e).keyup(function(){t().apply(i,[$(this).val()])})}},ko.bindingHandlers.formatted={update:function(e,t){var n=t(),i=ko.utils.unwrapObservable(n);e.innerText=0==i?0:window.thousandsSeparator(i)}},ko.bindingHandlers.pluralWord={update:function(e,t){var n=t(),i=ko.utils.unwrapObservable(n);$(e).text(helpers.pluralizedWord(i.value(),i.word))}},ko.bindingHandlers.pluralize={update:function(e,t){var n=t(),i=ko.utils.unwrapObservable(n);e.innerText=helpers.pluralizeFormatted(i.value(),i.word)}},ko.bindingHandlers.displayGroup={init:function(e,t,n,i){var r=t(),o=n(),a=ko.utils.unwrapObservable(i),s=function(t){t?a.displayGroups.push([r,e]):a.displayGroups.remove([r,e])};s(o.visible()),o.visible.subscribe(s)}},ko.bindingHandlers.myVisible={init:function(e,t){var n=t();n.subscribe(function(t){t?$(e).show():$(e).hide()})}};var ImprovementPaginator=makePaginator();ImprovementPaginator.prototype.url=function(){return this.baseUrl+"&page="+this.page};var ImprovementSearchPaginator=makePaginator();ImprovementSearchPaginator.prototype.url=function(){return this.baseUrl+"?page="+this.page+"&query="+this.query},$(function(){if("undefined"!=typeof _improvements){Improvement.prototype.pageToggleAdd=function(){_youSpanked.push(this)},Improvement.prototype.pageToggleRemove=function(){_youSpanked.remove(function(e){return e.id==this.id}.bind(this))},_improvements=ko.observableArray(_.map(_improvements,function(e){return new Improvement(e)})),_youSpanked=ko.observableArray(_.map(_youSpanked,function(e){return new Improvement(e)}));var e=new ImprovementPaginator(_improvements,_improvementsURL),t=new ImprovementSearchPaginator(ko.observableArray(),_searchURL),n=new ImprovementLoader(e,t);loadMoreOnScroll(1500,n),ko.applyBindings(new ImprovementIndexView(_remaining,_youSpanked,n),$("#suggestionboxwrapper")[0])}else{if("undefined"==typeof _improvement)return!1;_improvement=ko.observable(new Improvement(_improvement));var i=new ItemTracker([],"Support",$("#votes_section"));Improvement.prototype.pageToggleAdd=function(){i.votes.unshift(_myVote),i.fixLastColumn(),i.totalCount(i.totalCount()+1)},Improvement.prototype.pageToggleRemove=function(){i.votes.remove(function(e){return e.user_id==FetLife.currentUser.id}),i.fixLastColumn(),i.totalCount(i.totalCount()-1)},i.votes=i.items,i.hasLoaded=ko.observable(!1),i.totalCount=ko.observable(0),i.load=function(){$.ajax({url:_votesUrl,dataType:"json",success:_.bind(function(e){this.hasLoaded(!0),this.items(e.members),this.totalCount(e.total),this.fixLastColumn()},this)})},i.load(),i.bind(),ko.applyBindings(new ImprovementShowView(_remaining,_improvement),$("#suggestionboxwrapper")[0])}}),$(function(){$("#created_no_more_votes").length>0&&_justCreated&&0===_remaining()&&!_improvement().changelog&&$("#created_no_more_votes").dialog("open")});var Trie=function(){function e(t,n,i,r){return t||(t=new o(n)),n<t["char"]?t.left=e(t.left,n,i,r):n>t["char"]?t.right=e(t.right,n,i,r):_.isEmpty(i)?(t.end=!0,t.value=r):t.child=e(t.child,_.head(i),_.tail(i),r),t}function t(e,n,i){if(null===e)return!1;if(e["char"]==n){if(_.isEmpty(i))return e.end?(e.end=!1,e.value=null,!0):!1;var r=e.child;t(r,_.head(i),_.tail(i))&&r.isEmpty()&&(e.child=null)}else{if(n<e["char"])return t(e.left,n,i);if(n>e["char"])return t(e.right,n,i)}}function n(e,t,i){return null===e?void 0:e["char"]==t?_.isEmpty(i)?e.end?e.value:void 0:n(e.child,_.head(i),_.tail(i)):t<e["char"]?n(e.left,t,i):t>e["char"]?n(e.right,t,i):void 0}function i(e,t,n){if(null===e)return[];if(e["char"]==t){if(_.isEmpty(n)){var o=e.end?[e.value]:[];return r(e.child,o)}return i(e.child,_.head(n),_.tail(n))}return t<e["char"]?i(e.left,t,n):t>e["char"]?i(e.right,t,n):void 0}function r(e,t,n){return null===e?t:(e.end&&(n?t.unshift(e.value):t.push(e.value)),r(e.left,t,!0),r(e.child,t),r(e.right,t),t)}var o=function(e){this["char"]=e,this.value=null,this.child=null,this.left=null,this.right=null,this.end=!1,this.isEmpty=function(){return null===this.left&&null===this.right&&null===this.child&&!this.end}},a=null;this.getRoot=function(){return a},this.insert=function(t,n){a=e(a,_.head(t),_.tail(t),n)},this.remove=function(e){t(a,_.head(e),_.tail(e))},this.get=function(e){return n(a,_.head(e),_.tail(e))},this.contains=function(e){return void 0!==n(a,_.head(e),_.tail(e))},this.prefixSearch=function(e){return i(a,_.head(e),_.tail(e))},this.toArray=function(){return r(a,[])}};ko.observableTrie=function(){var e=new Trie,t=ko.observable(e),n=!1,i=null;return t.bulkMutate=function(e){try{n=!0,e(),t.valueHasMutated()}finally{n=!1}},t.insert=function(i,r){return e.get(i)==r?!1:(e.insert(i,r),n||t.valueHasMutated(),!0)},t.remove=function(i){return e.contains(i)?(e.remove(i),n||t.valueHasMutated(),!0):!1},t.setPrefix=function(e){i=e,t.valueHasMutated()},t.clearPrefix=function(){i=null,t.valueHasMutated()},t.toArray=function(){return i?e.prefixSearch(i):e.toArray()},t},$(function(){var e=function(e){return e.parent().html()==$("<div></div>").append(e.clone()).html()};$(".may_contain_youtubes a").each(function(){var t=$(this),n=t.attr("href").match(new RegExp("youtube\\.com/watch.+v=([\\w-]+)&?"));if(n&&2==n.length&&e(t)){var i=n[1];t.parent().replaceWith('<div class="emvd"> <iframe width="610" height="310" frameborder="0" allowfullscreen src="https://www.youtube.com/embed/'+i+'?rel=0"> </iframe> </div>')}})});var Notifications={create:function(e){var t=$("#notification-template").tmpl(e);$(t).find(".closer").click(function(){t.remove()});var n;startTimeout=function(){n=setTimeout(function(){t.fadeOut(2e3)},4e3)},startTimeout(),t.mouseover(function(){t.stop(),t.css("opacity","1.0"),clearTimeout(n)}),t.mouseout(function(){startTimeout()}),t.appendTo("#notifications")}},Conversations={side_id:null,hasFocus:!0,newMessages:!1,init:function(){$(window).focus(function(){this.hasFocus=!0,this.markAsRead()}.bind(this)),$(window).blur(function(){this.hasFocus=!1}.bind(this))},markAsRead:function(){this.newMessages&&($.post(this.mark_as_read_url,{}),this.newMessages=!1,cp.countPoller.update("new_messages",cp.countPoller.new_messages()-1))}};$(function(){Conversations.init()}),/*!
 * Audio copyright
 *
 * sassy_sexy_sax.mp3:
 * Sound sample from the song "Careless Whisper" by George Michael (Wham!)
 * Songwriters: George Michael, Andrew Ridgeley Copyright: 1984. Epic/Columbia Records
 *
 * girl_from_ipanema.mp3:
 * Sound sample from the song "The Girl From Ipanema" by Tom Jobim and Vinicius de Moraes.
 *
 * ding.mp3:
 * Sourced from BenSound - www.bensound.com - Creative Commons.
 *
 * Plays some glorious sax while scrolling to top.
 */
$(function(){var e=document.querySelector(".js-elevator");if(e&&window.Audio&&window.requestAnimationFrame){{new Elevator({element:e,mainAudio:"/audio/girl_from_ipanema.mp3",endAudio:"/audio/ding.mp3",duration:3500})}$(e).one("click",function(){var e=document.querySelector(".js-valentines");e&&(e.src=e.src.replace(".png","_kinky.png"),e.alt="Sexy time!",e.title="Sexy time!")})}}),$(function(){$(document).on("click","#cc_submit",function(){$("#cc_spinner").removeClass("hidden"),$("#cc_submit").hide()})}),function(){if(document.querySelector(".explore-page")){var e=function(e){var t=ExploreView.likes(e.data("kp-target-item"));t.userCanLike(e.data("user-can-like")),t.isLikedByUser(e.data("is-liked-by-user")),t.count(e.data("likes-count")),t.url(e.data("like-url"))},t=function(e){this.id=ko.observable(e),this.userCanLike=ko.observable(),this.isLikedByUser=ko.observable(),this.count=ko.observable(),this.url=ko.observable(),this.formattedCount=ko.dependentObservable(function(){return window.thousandsSeparator(this.count()||0)}.bind(this)),this.toggle=function(){return $.ajax({url:this.url(),dataType:"json",type:"post",complete:_.bind(function(){this.isLikedByUser()?(this.isLikedByUser(!1),this.count(this.count()-1)):(this.isLikedByUser(!0),this.count(this.count()+1))},this)}),!1}};ExploreView={_likes:{},likes:function(e){var n=this._likes[e];return n||(this._likes[e]=new t(e),n=this._likes[e]),n},toggleLike:function(e){return this._likes[e].toggle(),!1}};var n=$("[data-kp-likes-binder]");_.each(n,function(t){e($(t))}),$(function(){var t=$(".sheet");if(t.show(),t.masonry({columnWidth:237.5,itemSelector:".kpbox",transitionDuration:"0"}),!noMoreStories){Fl.Explore={},Fl.Explore.Continuous={},Fl.Explore.Continuous.Controller=new JS.Class(Gorilla.Controller,{initialize:function(e){this.callSuper(),this.set("paginator",e.paginator),this.set("spinner",e.spinner),e.paginator.observe("loading",this.method("_paginatorLoadingObserver")),e.paginator.observe("pageLoaded",this.method("_pageLoadedObserver"))},scrollThresholdReached:function(){this.get("paginator").maybeLoadNextPage()},_pageLoadedObserver:function(t,n){var i=$.trim(n.html.replace(/(\r\n|\n|\r)/gm,"").replace(/>\s+</g,"><")),r=$(i),o=$(".sheet");n.last_timestamp&&(this.paginator.url="?until="+n.last_timestamp),"undefined"!=typeof n.no_more_stories&&(noMoreStories=n.no_more_stories,noMoreStories&&this.get("paginator").setReachedLastPage()),o.append(r).masonry("appended",r),ko.applyBindings(ExploreView),_.each(r.filter("[data-kp-likes-binder]"),function(t){e($(t))})},_paginatorLoadingObserver:function(e,t){t?this.get("spinner").removeClass("hidden"):this.get("spinner").addClass("hidden")}}),Fl.Explore.Continuous.Paginator=new JS.Class(Fl.Continuous.Paginator,{totalPages:1e3,currentPage:0,_initializeModelObjects:function(e){return e},setReachedLastPage:function(){this.set("totalPages",this.get("currentPage"))}});var n=new Fl.Explore.Continuous.Paginator({url:continuousUrl}),i=new Fl.Explore.Continuous.Controller({paginator:n,spinner:$("#spinner")}),r=new Fl.Continuous.ScrollWatcher({scrollThreshold:5e3,controller:i,methodName:"scrollThresholdReached"});i.set("scrollWatcher",r),r.scrollObserver()}});var i=$("[data-explore-subnav]");if(i.length){var r=$("[data-nav]").outerHeight()+i.outerHeight(),o=!1,a=i.clone();a.addClass("js-subnav-clone"),i.parent().append(a),$(window).on("scroll",function(){window.scrollY>=r?o||($("body").addClass("js-lock-subnav"),o=!0):o&&($("body").removeClass("js-lock-subnav"),o=!1)})}$(".js-subnav-clone").on("click",".fl-subnav__link--active",function(e){e.preventDefault(),window.scrollTo(0,0)})}}(),function(){if(document.querySelector("#activity_feed_container")){ko.bindingHandlers.focusWhen={update:function(e,t){t()()?e.focus():e.blur()}},ko.bindingHandlers.html={update:function(e,t){_.each(t()(),function(t){$(e).append(t)})}},$(function(){function e(e){var t=new Date($(e).attr("datetime")),n=distanceOfTimeInWords(new Date,t,!0)+" ago";if($(e).is(".status")){var i=$("<a></a>");i.attr("href",$(e).attr("data-url")),i.text(n),$(e).html(i)}else $(e).text(n);$(e).attr("title",$.format.date(t,"EEEE, MMMM d, yyyy @ h:mma"))}$(".timeago").livequery(function(){e(this)}),setInterval(function(){$(".timeago").each(function(t,n){e(n)})},6e4)});var e=function(e){this.element=$("#status_story_"+e),this.postTo=this.element.find(".new_comment").attr("data-post-to");var t=this.element.find(".icomment:not(.new_comment)");this.comments=ko.observableArray(t.get()),this.commentBoxOpen=ko.observable(this.comments().length>0),this.commentFormOpen=ko.observable(!1),this.commentValue=ko.observable(""),this.allCommentsVisible=ko.observable(!1),this.submitting=ko.observable(!1),this.element.find("textarea").bind("keydown","return",_.bind(function(e){this.saveComment(),e.preventDefault()},this)),this.openCommentBox=function(){this.commentBoxOpen(!0),this.openCommentForm()},this.openCommentForm=function(){this.commentFormOpen(!0)},this.closeCommentForm=function(){this.commentFormOpen(!1)},this.showAllComments=function(){this.allCommentsVisible(!0)},this.saveComment=function(){if(!this.submitting()){var e=this.commentValue();return""===e.replace(/\s+/,"")?($(this.element).find("textarea").addClass("animated shake"),!1):void this.submitNewComment()}},this.resetForm=function(){this.commentValue(""),this.commentFormOpen(!1),this.element.find("textarea").blur()},this.submitNewComment=function(){this.commentValue();this.submitting(!0),$.ajax({type:"post",url:this.postTo,dataType:"html",data:{"status_comment[body]":this.commentValue()},complete:_.bind(function(){this.submitting(!1)},this),success:_.bind(function(e){this.element.find(".comments").append(e),this.comments.push($(e)),this.resetForm()},this),error:_.bind(function(){alert("We're sorry, but there was a problem posting this comment. Try again in a couple of minutes and contact support if it keeps up!")})})}},t={lastEventUUID:ko.observable(null),markerHead:ko.observable(null),showCta:ko.observable(!1),newTrendsCount:cp.countPoller.trends,newFriendsFeedCount:cp.countPoller.stories,friendshipRequestsCount:cp.countPoller.friendship_requests,newMessageCount:cp.countPoller.new_messages,noMoreStories:ko.observable(!1),customizeFeedEnabled:ko.observable(!1),customizeBoxOpen:ko.observable(!1),customizeFormSubmitting:ko.observable(!1),currentPage:ko.observable(0),openCustomizeBox:function(){this.customizeBoxOpen(!0)},closeCustomizeBox:function(){this.customizeBoxOpen(!1)},saveCustomize:function(){this.customizeFormSubmitting(!0),$("#customize form").submit()},viewMoreVisible:ko.observable(!0),viewMoreLoading:ko.observable(!1),feedUnavailable:function(){return this.feedDownForMaintenance()||this.feedLoadFailed()},feedUrl:function(e){return"trends"==e?"/home/trend_stories.json":$("#stories").hasClass("v5-home")?"/home/v5_stories.json":"/home/v4_stories.json"},viewMore:function(){this.feedLoading()||this.viewMoreLoading()||this.feedUnavailable()||this.noMoreStories()||(this.viewMoreLoading(!0),this.currentPage(this.currentPage()+1),$.ajax({url:this.feedUrl(this.subfeed()),data:{subfeed:this.subfeed(),last_event_uuid:this.lastEventUUID()||"",page:this.currentPage()},type:"get",dataType:"json",complete:_.bind(function(){this.viewMoreLoading(!1)},this),error:_.bind(function(e){503==e.status?this.feedDownForMaintenance(!0):this.feedLoadFailed(!0)},this),success:_.bind(function(e){return e.stale?void this.noMoreStories(!0):(null!=e.last_event_uuid&&this.lastEventUUID(e.last_event_uuid),$("#stories").append(e.stories.join(""),!1),this.showCta(e.show_cta),ko.applyBindings(this,$("#activity_feed_container").get(0)),void this.noMoreStories(e.no_more_stories))},this)}))},statusStories:function(t){var n=this._statusStories[t];return n||(this._statusStories[t]=new e(t),n=this._statusStories[t]),n},subfeed:ko.observable(""),subfeedLabel:ko.observable(""),feedLoading:ko.observable(!1),feedLoadFailed:ko.observable(!1),feedDownForMaintenance:ko.observable(!1),_xhr:null,loadFeed:function(e){null!=this._xhr&&this._xhr.abort(),this.showCta(!1),this.noMoreStories(!1),this.feedLoading(!0),this.lastEventUUID(null),this.newUpdates([]),this.pollingForNewUpdates(!1),this.newMarkerHead(null),this.feedLoadFailed(!1),this.feedDownForMaintenance(!1),this._statusStories={},this.currentPage(0),$("#stories").html(""),this._xhr=$.ajax({url:this.feedUrl(e),data:{subfeed:e},type:"get",dataType:"json",timeout:3e4,complete:_.bind(function(){this.feedLoading(!1)},this),success:_.bind(function(e){$("#stories").html(e.stories.join(""),!1),null!=e.marker_head&&this.markerHead(e.marker_head),this.showCta(e.show_cta),this.lastEventUUID(e.last_event_uuid),ko.applyBindings(this,$("#activity_feed_container").get(0)),"trends_feed"==this.page()&&this.newTrendsCount(0),"friends_feed"==this.page()&&this.newFriendsFeedCount(0),this.noMoreStories(e.no_more_stories)},this),error:_.bind(function(e){503==e.status?this.feedDownForMaintenance(!0):this.feedLoadFailed(!0)},this)}),_.isUndefined(e)||this.subfeed(e)},mute:function(e,t){return this.feedLoading()?!1:void(confirm("Are you sure you want to hide all stories by "+t+"?")&&(this.feedLoading(!0),$("#stories").html(""),$.ajax({url:mutingsURL,type:"post",data:{muting:{muted_id:e}},error:_.bind(function(){alert("I'm sorry, but something went wrong. We weren't able to mute all your stories by "+t),this.loadFeed()},this),success:_.bind(function(){this.loadFeed()},this)})))},groupsLed:ko.observableArray([]),selectedGroup:ko.observable(),newUpdatesCount:cp.count("New Stories"),newUpdates:ko.observableArray([]),pollingForNewUpdates:ko.observable(!1),newMarkerHead:ko.observable(null),lastShowNewUpdatesClick:ko.observable(new Date),lastPollSubfeed:ko.observable(""),showNewUpdates:function(){this.lastShowNewUpdatesClick(new Date);var e=this.newUpdates().join("");this.newUpdates([]),_.each(this.createdStatuses(),function(e){e.remove()}),this.newUpdatesCount(0),this.createdStatuses([]),$("#stories").prepend(e,!1),ko.applyBindings(this,$("#activity_feed_container").get(0)),this.newMarkerHead()&&(this.markerHead(this.newMarkerHead()),this.commitMarker(this.markerHead()),this.newMarkerHead(null))},pollForNewUpdates:function(){if(null!=this.markerHead()&&!this.pollingForNewUpdates()&&"trends_feed"!=this.page()){this.lastPollSubfeed(this.subfeed());var e="/polling/home/new_stories_v4?subfeed="+this.subfeed()+"&marker="+this.markerHead();$.ajax({url:e,dataType:"json",success:_.bind(function(e){this.lastPollSubfeed()==this.subfeed()&&(this.newUpdates(e.stories),this.newUpdatesCount(e.stories.length),this.newMarkerHead(e.marker_head),this.scheduleNextPolling())},this),error:_.bind(function(){this.scheduleNextPolling()},this)})}},scheduleNextPolling:function(){var e=new Date-this.lastShowNewUpdatesClick(),t=e>36e5?3e5:6e4;setTimeout(_.bind(function(){this.pollForNewUpdates()},this),t)},commitMarker:function(e){$.ajax({url:"/home/commit_marker",method:"post",data:{marker:e}})},statusBoxOpen:ko.observable(!1),statusValue:ko.observable(""),statusSaving:ko.observable(!1),createdStatuses:ko.observableArray([]),submitStatus:function(){return""===this.statusValue().replace(/\s+/,"")?($("#status_textarea").addClass("animated shake"),$("#status_textarea").focus(),!1):this.statusValue().length>200?($("#status_chars_left").addClass("animated pulse"),$("#status_textarea").focus(),!1):(this.statusSaving(!0),void $.ajax({url:statusesURL,data:{status:{body:this.statusValue()}},type:"post",dataType:"json",complete:_.bind(function(){this.statusSaving(!1)},this),success:_.bind(function(e){if("everything"==this.subfeed()||"statuses"==this.subfeed()){var t=$(e.html,!1);$("#stories").prepend(t),ko.applyBindings(this,$("#activity_feed_container").get(0)),this.createdStatuses.push(t)}this.statusValue(""),this.statusBoxOpen(!1)},this),error:_.bind(function(){alert("We're sorry, but something went wrong posting your status. Try again in just a sec...")},this)}))},currentUserIsNot:function(e){return currentUserId!=e},deleteStatus:function(e,t){confirm("Are you sure you want to delete this status? There's no going back!")&&($("#status_story_"+e).fadeOut(),$.ajax({url:t,type:"delete",dataType:"text",error:function(){alert("I'm really sorry, but we weren't able to delete that status. Please try again shortly.")}}))},countString:function(e){return e>=99?"99+":e.toString()}};$(function(){if($("#activity_feed_container").length){t.statusCharactersLeft=ko.dependentObservable(function(){return 200-this.statusValue().length},t),t.page=ko.dependentObservable(function(){return"trends"==this.subfeed()?"trends_feed":"friends_feed"},t),t.page.subscribe(function(e){"trends_feed"==e?(cp.countPoller.addType("stories"),cp.titleCountManager.deregisterPageSpecific(t.newUpdatesCount)):(cp.countPoller.removeType("stories"),cp.titleCountManager.registerPageSpecific(t.newUpdatesCount)),cp.countPoller.poller.stop(),cp.countPoller.poller.poll()}),t.customizeFeedEnabled(customizeFeedEnabled),ko.applyBindings(t,$("#activity_feed_container").get(0)),t.statusValue.subscribe(function(e){$("#status_textarea").val()!=e&&$("#status_textarea").val(e)}),t.feedDownForMaintenance.subscribe(function(e){e&&($("#down_video_1").html('<iframe width="560" height="315" src="https://www.youtube.com/embed/Deqx-Xb-yHY" frameborder="0" allowfullscreen></iframe>'),$("#down_video_2").html('<iframe width="560" height="315" src="https://www.youtube.com/embed/9QS0q3mGPGg" frameborder="0" allowfullscreen></iframe>'),$("#down_video_3").html('<iframe width="420" height="315" src="https://www.youtube.com/embed/Bu8oRfE3ulE" frameborder="0" allowfullscreen></iframe>'),$("#down_video_4").html('<iframe width="560" height="315" src="https://www.youtube.com/embed/1CLCOvZOh1o" frameborder="0" allowfullscreen></iframe>'))}),$("#status_textarea").bind("keydown","ctrl+return",function(e){t.submitStatus(),$(this).blur(),e.preventDefault()});var e=$("#customize form");e.ajaxForm({url:e.attr("action"),complete:function(){t.customizeFormSubmitting(!1)},success:function(){t.customizeBoxOpen(!1),t.loadFeed()},error:function(){alert("Hate to tell you this, but something went wrong. It's probably best to blame John. Most things are his fault around here. You can give it another try anytime!")}}),$("body").click(function(e){$(".pdv").removeClass("open"),-1==$.inArray(e.target,$("#status_form").find("*"))&&t.statusBoxOpen(!1)}),$(document).on("click",".story_options",function(){return $(".pdv").removeClass("open"),$(this).parents(".pdv").addClass("open"),!1})}});var n=Sammy(function(){this.get("#everything",function(){t.loadFeed("everything"),t.subfeedLabel("Main")}),this.get("#group",function(){t.loadFeed("group"),t.subfeedLabel("Group Activity")}),this.get("#statuses",function(){t.loadFeed("statuses"),t.subfeedLabel("Status Updates")}),this.get("#writing",function(){t.loadFeed("writing"),t.subfeedLabel("Writing")}),this.get("#pictures",function(){t.loadFeed("pictures"),t.subfeedLabel("Pictures")}),this.get("#videos",function(){t.loadFeed("videos"),t.subfeedLabel("Videos")}),this.get("#trends",function(){t.loadFeed("trends"),t.subfeedLabel("")})});$(function(){$("#activity_feed_container").length>0&&(n.run("#everything"),new ScrollWatcher(250,function(){t.showCta()||t.viewMore()}),$.ajax({url:"/groups.json",dataType:"json",success:function(e){_.each(e.leader,function(e){t.groupsLed.push(e)})}}),t.scheduleNextPolling()),t.selectedGroup.subscribe(function(e){window.location=e})})}}(),$(function(){if($("#friend_requests_v5").length){var e={newStories:cp.countPoller.stories,newTrends:cp.countPoller.trends,newMessageCount:cp.countPoller.new_messages,newFriendshipRequestsCount:cp.countPoller.friendship_requests};cp.countPoller.addType("stories"),cp.titleCountManager.deregisterGlobal(cp.countPoller.friendship_requests),cp.titleCountManager.registerPageSpecific(e.newFriendshipRequestsCount),cp.countPoller.poller.stop(),cp.countPoller.poller.poll(),ko.applyBindings(e,$("nav.feeds").get(0)),$("#friend_requests_v5 form").submit(function(){$(this).parent().parent().hide(),$('#friend_requests_v5 form input[type="submit"]').attr("disabled","disabled")}),$("#friend_requests_v5 form.accept_form").submit(function(){$(this).parent().parent().siblings(".while_accepting").show()}),$("#friend_requests_v5 form.reject_form").submit(function(){$(this).parent().parent().siblings(".while_rejecting").show()})}}),$(function(){$(".load-hidden").removeClass("load-hidden"),$(".load-shown").removeClass("load-shown").hide()});var startConversation={mailCount:cp.countPoller.new_messages,friendshipRequestsCount:cp.countPoller.friendship_requests,newStoryCount:cp.countPoller.stories,newTrendsCount:cp.countPoller.trends,previewOpen:ko.observable(!1),submitting:ko.observable(!1),body:ko.observable(""),togglePreview:function(){this.previewOpen(!this.previewOpen())},submit:function(){var e=$('input[name="subject"]').val(),t=$('textarea[name="body"]'),n=this.body();""===e.replace(/\s+/,"")?(e.addClass("animated shake"),e.focus()):""===n.replace(/\s+/,"")?(t.addClass("animated shake"),t.focus()):(this.submitting(!0),$("form#new_conversation").submit())}};$(function(){function e(e){startConversation.submit(),$(this).blur(),e.preventDefault()}$("#start_conversation").length>0&&(startConversation.previewLinkText=ko.dependentObservable(function(){return startConversation.previewOpen()?"Close Preview":"Preview"},startConversation),$(document).bind("keydown","ctrl+return",e),$("#body_text").bind("keydown","ctrl+return",e),$("input[name='subject']").bind("keydown","ctrl+return",e),cp.countPoller.addType("stories"),cp.countPoller.addType("trends"),cp.countPoller.poller.stop(),cp.countPoller.poller.poll(),autosize($(".expand")),ko.applyBindings(startConversation,$("#start_conversation").get(0)))}),function(e,t){"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t(e)}):"object"==typeof module&&module&&module.exports?module.exports=t(e):e.Levenshtein=t(e)}(this,function(){function e(e,t){var n,i;for(n=-1,i=e.length;++n<i;)t(e[n],n,e)}function t(t,n){var i;return i=Array(t.length),e(t,function(e,t,r){i[t]=n(e,t,r)}),i}function n(t,n,i){return e(t,function(e,t,r){i=n(e,t,r)}),i}function i(t,n){var i,r,o;return o=this._matrix=[],t==n?this.distance=0:""==t?this.distance=n.length:""==n?this.distance=t.length:(i=[0],e(t,function(e,t){t++,i[t]=t}),o[0]=i,e(n,function(a,s){r=[++s],e(t,function(e,o){o++,r[o]=t.charAt(o-1)==n.charAt(s-1)?i[o-1]:Math.min(i[o]+1,r[o-1]+1,i[o-1]+1)}),i=r,o[o.length]=i}),this.distance=r[r.length-1])}return i.prototype.toString=i.prototype.inspect=function(){var e,i,r,o,a;for(e=this.getMatrix(),i=n(e,function(e,t){return Math.max(e,n(t,Math.max,0))},0),r=Array((i+"").length).join(" "),o=[];o.length<(e[0]&&e[0].length||0);)o[o.length]=Array(r.length+1).join("-");return o=o.join("-+")+"-",a=t(e,function(e){var n;return n=t(e,function(e){return(r+e).slice(-r.length)}),n.join(" |")+" "}),a.join("\n"+o+"\n")},i.prototype.getMatrix=function(){return this._matrix.slice()},i.prototype.valueOf=function(){return this.distance},i}),function(e,t){"use strict";var n=["gmail.com","yahoo.com","hotmail.com","outlook.com","hotmail.co.uk","yahoo.co.uk","live.com","msn.com","yahoo.ca","ymail.com","comcast.net","mail.com","yahoo.com.au","sbcglobal.net","verizon.net","rocketmail.com","googlemail.com","live.co.uk","live.nl","gmx.de"],i=[".com",".uk",".ca",".net",".au",".nl",".de",".org"],r="<p>Did you really mean ${supplied_domain}? Or did you mean ${alternatives} instead?</p>",o="<p>Did you really mean ${supplied_tld}? Or did you mean ${alternatives} instead?</p>",a=function(e){return l(e,n,2)},s=function(e){return l(e,i,1)},l=function(t,n,i){return _.contains(n,t)?[]:_.filter(n,function(n){var r=new e(t,n);return r.distance>0&&r.distance<=i})},u=function(e){var t=e.slice(0),n=t.pop();return t.join(", ")+" or "+n},c=function(e){if(e.indexOf("@")>=0&&e.indexOf(".")>=0){var n=e.substring(e.indexOf("@")+1),i=e.substring(e.lastIndexOf(".")),l=a(n),c=s(i),d=[];return 1==l.length?d.push(t.tmpl(r,{supplied_domain:n,alternatives:l[0]})):l.length>1&&d.push(t.tmpl(r,{supplied_domain:n,alternatives:u(l)})),1==c.length?d.push(t.tmpl(o,{supplied_tld:i,alternatives:c[0]})):c.length>1&&d.push(t.tmpl(o,{supplied_tld:i,alternatives:u(c)})),d}};t(function(){t("#user_email").on("change",function(e){var n=t("#user_email_misspelling");if(n.length>0){var i=c(t(e.target).val());i.length>0?(t("#user_email_misspelling").removeClass("hidden"),t("#user_email_misspelling div").html(i)):t("#user_email_misspelling").addClass("hidden")}})})}(window.Levenshtein,window.jQuery),$(function(){window.FetLife&&window.FetLife.oneSignalAppId&&(window.OneSignal=window.OneSignal||[],OneSignal.push(["init",{appId:window.FetLife.oneSignalAppId,safari_web_id:window.FetLife.safariWebId,autoRegister:!1,notifyButton:{enable:!1},welcomeNotification:{title:"FetLife",message:"We're here to serve you! :)"}}]),OneSignal.push(["getIdsAvailable",function(e){OneSignal.push(["getTags",function(t){t.member_token&&t.version==window.FetLife.pushNotificationsVersion||$.post("/settings/web_notifications",{user_id:e.userId,registration_id:e.registrationId})}])}]),OneSignal.push(["addListenerForNotificationOpened",function(e){e.heading.indexOf("[PM]")>=0&&window.location.reload(!0)}]),OneSignal.push(function(){OneSignal.isPushNotificationsSupported()?OneSignal.push(["isPushNotificationsEnabled",function(e){e||($("#web-notifications-notice-message").html("Web notifications for this browser: Off <a onclick='enableWebNotifications()'>Turn Them On Please</a>"),$("#web-notifications-notice").show())}]):($("#web-notifications-notice-message").html("Your browser doesn't currently support web notifications! :-(          To take advantage of web notifications, you have to be using          a modern version of Chrome or Firefox on Desktop or Chrome on Android."),$("#web-notifications-notice").show())}))}),$(function(){if(!window.Evaporate)return void console.error("Evaporate.js is not loaded...");var e="/videos/new?success=true",t=new window.Evaporate({signerUrl:"/videos/sign_upload",aws_key:window.FetLife.awsKey,bucket:window.FetLife.awsVideoUploadBucket,logging:"production"!==window.FetLife.environment}),n=$("[data-form-video-html5]"),i=["3g2","3gp","3gp2","3gpp","60d","ajp","arf","asf","asx","avi","bsf","camrec","dif","divx","dmb","dv","dvx","f4v","fbz","flv","ivf","ivr","ivs","m1v","m21","m2t","m2v","m4e","m4v","mj2","mjp","mjpg","mkv","mov","mp2v","mp4","mp4v","mpe","mpeg","mpg","mpg2","mpv2","mts","nsv","ogm","ogv","pmf","qt","rdb","rec","rm","rmvb","rts","rts","rum","rv","scm","spl","srt","swf","tp","trp","vc1","vgz","vid","vob","vp6","vp7","vro","wm","wmd","wmv","wmx","wvx","xvid","yuv"],r=function(){var e=$("[data-input-video]")[0];return e.files[0]},o=function(){var e=$.Deferred();return $.ajax({method:"POST",url:"/videos/draft",data:n.serialize(),dataType:"json",success:function(t){e.resolve(t)},error:function(){alert("Error occurred! Please try again later...")}}),e},a=function(e){var t=["bytes","kb","MB","GB","TB","PB"],n=Math.floor(Math.log(e)/Math.log(1024)),i=(e/Math.pow(1024,Math.floor(n))).toFixed(2);return i?i+" "+t[n]:"0 bytes"},s=function(){var e=r();$("#submit_button").hide(),$("#processing_form").show(),$("#progress_bar_container").show().find(".filename").html(e.name).end().find(".message").text("Uploading"),$("#progress_bar_container .total-size").text(a(e.size))},l=function(e){var t=r();$("#progress_bar_container .uploaded-size").text(a(t.size*e)),$("#progress_bar_container .progress").css("width",Math.round(100*e)+"%"),1===e&&$("#progress_bar_container .progress_bar_text").html("Upload complete&hellip; gerbils just finishing up.")},u=function(e){var n=$.Deferred(),i=r(),o=$('input[name="directory"]').val();return t.add({name:o+"/"+i.name,file:i,notSignedHeadersAtInitiate:{"Cache-Control":"max-age=3600"},xAmzHeadersAtInitiate:{"x-amz-meta-token":$("#token").val(),"x-amz-meta-video_id":e.id},signParams:{},signHeaders:{},beforeSigner:function(e){var t=(new Date).toISOString();e.setRequestHeader("Request-Header",t)},complete:function(){n.resolve()},progress:function(e){l(e)},error:function(){n.reject()}}),n},c=function(){window.location=e},d=function(){var e=r();if(e){var t=r().name.split(".");return t[t.length-1].toLowerCase()}},h=function(){if(void 0===r())alert("Please select a video");else if(-1===i.indexOf(d()))alert("The file you are uploading doesn't look like it's a video. Can you double check please? If you are sure it's a video, try converting it to a different format first like avi or mpg and then upload it.");else{if($("#video_is_of_or_by_user").is(":checked"))return!0;alert("You must certify that this video is of or by you.")}return!1};n.submit(function(e){e.preventDefault(),h()&&(s(),o().then(u).then(c))})}),$(function(){$("[data-toggle-menu]").on("click",function(e){e.preventDefault(),$("body").toggleClass("js-show-menu")}),$("body").on("click",function(e){$(e.target).hasClass("js-show-menu")&&(e.preventDefault(),$("body").removeClass("js-show-menu"))})});